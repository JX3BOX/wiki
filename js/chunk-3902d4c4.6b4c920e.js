(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3902d4c4"],{"07ac":function(e,t,i){"use strict";var a=i("23e7"),n=i("6f53").values;a({target:"Object",stat:!0},{values:function(e){return n(e)}})},"13d5":function(e,t,i){"use strict";var a=i("23e7"),n=i("d58f").left,s=i("a640"),l=i("1212"),c=i("9adc"),o=!c&&l>79&&l<83,r=o||!s("reduce");a({target:"Array",proto:!0,forced:r},{reduce:function(e){var t=arguments.length;return n(this,e,t,t>1?arguments[1]:void 0)}})},1450:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var a=i("41cb"),n=function(){return Object(a["f"])().get("api/team/my-game-roles?nopage&custom=0")}},1937:function(e,t,i){"use strict";i("d32c")},"25b5":function(e,t,i){},"326a":function(e,t,i){"use strict";i("6345")},"498a":function(e,t,i){"use strict";var a=i("23e7"),n=i("58a8").trim,s=i("c8d2");a({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},"4c11":function(e,t,i){"use strict";i("5790")},"4c53":function(e,t,i){"use strict";var a=i("23e7"),n=i("857a"),s=i("af03");a({target:"String",proto:!0,forced:s("sub")},{sub:function(){return n(this,"sub","","")}})},"54b6":function(e,t,i){},5790:function(e,t,i){},6345:function(e,t,i){},"6b1b":function(e,t,i){"use strict";i("25b5")},"6f53":function(e,t,i){"use strict";var a=i("83ab"),n=i("d039"),s=i("e330"),l=i("e163"),c=i("df75"),o=i("fc6a"),r=i("d1e7").f,u=s(r),d=s([].push),m=a&&n((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){var i,n=o(t),s=c(n),r=m&&null===l(n),h=s.length,v=0,f=[];while(h>v)i=s[v++],a&&!(r?i in n:u(n,i))||d(f,e?[i,n[i]]:n[i]);return f}};e.exports={entries:h(!0),values:h(!1)}},9485:function(e,t,i){"use strict";var a=i("23e7"),n=i("2266"),s=i("59ed"),l=i("825a"),c=i("46c4"),o=TypeError;a({target:"Iterator",proto:!0,real:!0},{reduce:function(e){l(this),s(e);var t=c(this),i=arguments.length<2,a=i?void 0:arguments[1],r=0;if(n(t,(function(t){i?(i=!1,a=t):a=e(a,t,r),r++}),{IS_RECORD:!0}),i)throw new o("Reduce of empty iterator with no initial value");return a}})},"9b30":function(e,t,i){e.exports=i.p+"img/leap_empty.6e4af458.png"},"9d4a":function(e,t,i){"use strict";i("9485")},b85c:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("a4d3"),i("e01a"),i("d28b"),i("d9e2"),i("d3b7"),i("3ca3"),i("ddb0");var a=i("06c5");function n(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Object(a["a"])(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return c=e.done,e},e:function(e){o=!0,l=e},f:function(){try{c||null==i["return"]||i["return"]()}finally{if(o)throw l}}}}},c30e:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-leap-main"},[e.mobile?t("mobile"):t("pc")],1)},n=[],s=(i("caad"),i("d3b7"),i("2532"),i("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-leap-pc"},[t("div",{staticClass:"m-title"},[t("div",{staticClass:"u-label-box"},[t("div",{staticClass:"u-label"},[e._v("渡劫方案")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length > 0"}],staticClass:"u-btn-created",on:{click:function(t){e.showForm=!0}}},[t("i",{staticClass:"el-icon-circle-plus-outline u-add-icon"}),e._v("定制方案 ")])]),t("div",{staticClass:"m-info-user",style:{opacity:e.currentRole?1:.5}},[t("span",{staticClass:"u-name"},[e._v(e._s(e.currentRole.name)+" "+e._s(e.currentRole.server&&"·")+" "+e._s(e.currentRole.server))]),t("el-dropdown",{attrs:{trigger:"click"}},[t("div",{staticClass:"u-toggle-btn"},[t("img",{attrs:{src:i("e5dd"),alt:""}})]),t("el-dropdown-menu",{staticClass:"m-role-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.roleList,(function(i){return t("el-dropdown-item",{key:i.ID},[t("div",{staticClass:"m-role-item",class:{active:i.jx3id===e.currentRole.jx3id},on:{click:function(t){return e.onChangeRole(i)}}},[t("span",[e._v(e._s(i.name))]),t("span",[e._v(e._s(i.server))])])])})),1)],1),t("div",{staticClass:"u-user-all_achievement"},[e._v(" 当前资历："),t("span",[e._v(e._s(e.currentRole.total||0))])])],1)]),e.showDetail?e._e():t("div",{staticClass:"m-main"},[t("div",{staticClass:"m-tables"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","row-class-name":"u-table-row","cell-class-name":"u-table-cell","header-row-class-name":"u-table-header_row","header-cell-class-name":"u-table-header_cell"}},[t("el-table-column",{attrs:{prop:"title"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("router-link",{attrs:{target:"_blank",to:{name:"leap",query:{id:i.row.id}}}},[t("div",{staticStyle:{"text-align":"left",height:"24px"}},[e._v(e._s(i.row.title))])])]}}],null,!1,1018025156)},[t("template",{slot:"header"},[t("div",{staticClass:"u-table-cell_left"},[e._v("方案名称")])])],2),t("el-table-column",{attrs:{label:"方案资历总点数",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var i;return[e._v(" "+e._s((null===(i=e.getSchemePoints(t.row.schema))||void 0===i?void 0:i.all)||0)+" ")]}}],null,!1,2162533873)}),t("el-table-column",{attrs:{width:"180"},scopedSlots:e._u([{key:"default",fn:function(i){var a;return[t("div",{staticStyle:{"text-align":"right"}},[e._v(e._s((null===(a=e.getSchemePoints(i.row.schema))||void 0===a?void 0:a.diffNum)||0))])]}}],null,!1,4223628313)},[t("template",{slot:"header"},[t("div",{staticClass:"u-table-cell_right"},[e._v("可提升资历点数")])])],2),t("el-table-column",{attrs:{width:"180"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"text-align":"right"}},[e._v(" "+e._s(1==i.row.is_official?"魔盒":"玩家")+" ")])]}}],null,!1,2594864838)},[t("template",{slot:"header"},[t("div",{staticClass:"u-table-cell_right"},[e._v("来源")])])],2)],1),t("div",{staticClass:"u-page"},[t("el-pagination",{attrs:{background:"","hide-on-single-page":"",layout:"prev, pager, next","page-size":e.queryParams.per,total:e.pageTotal},on:{"current-change":e.pageChange}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.list.length,expression:"list.length == 0"}],staticClass:"u-btn",on:{click:function(t){e.showForm=!0}}},[t("i",{staticClass:"el-icon-circle-plus-outline u-add-icon"}),t("div",[e._v("定制方案")])])]),t("createFrom",{attrs:{show:e.showForm,currentRole:e.currentRole,pointsData:e.pointsData},on:{reloadList:e.reloadList,cancel:function(t){e.showForm=!1}}}),e.showDetail&&!e.isEmpty(e.currentRole)?t("detail",{attrs:{currentRole:e.currentRole}}):e._e()],1)}),l=[],c=(i("4de4"),i("14d9"),i("0643"),i("2382"),i("4e3e"),i("159b"),i("262e")),o=i("c967"),r=(i("ac1f"),i("25f0"),i("5319"),function(){var e,t=this,a=t._self._c;return a("div",{staticClass:"m-dj-form"},[a("el-dialog",{attrs:{title:"创建方案",visible:t.dialogTableVisible,"lock-scroll":"",width:"888px","close-on-click-modal":!1,"custom-class":"m-custom-dialog"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"u-dialog-content"},[a("div",{staticClass:"u-dialog-header"},[a("div",{staticClass:"u-dialog-header_item"},[a("span",[t._v("方案名称：")]),a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.leapForm.title,callback:function(e){t.$set(t.leapForm,"title",e)},expression:"leapForm.title"}})],1),a("div",{staticClass:"u-dialog-header_item"},[a("span",[t._v("目标资历：")]),a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.leapForm.number,callback:function(e){t.$set(t.leapForm,"number",t._n(e))},expression:"leapForm.number"}})],1)]),a("div",{staticClass:"u-dialog-tips"},[t._v("请选择个人偏好，盒子娘将会为你制定专属渡劫方案：")]),a("div",{staticClass:"u-dialog-main"},[a("div",{staticClass:"u-dialog-main_left"},[a("div",{staticClass:"u-dialog-main_title"},[t._v("方向")]),a("div",{staticClass:"u-dialog-main_category"},[a("div",{staticClass:"u-dialog-main_category_item",class:{active:1==t.dialogQueryParams.is_official},on:{click:function(e){return t.changeCategory(1)}}},[t._v(" 推荐 ")]),a("div",{staticClass:"u-dialog-main_category_item",class:{active:0==t.dialogQueryParams.is_official},on:{click:function(e){return t.changeCategory(0)}}},[t._v(" 自选 ")])])]),a("div",{staticClass:"u-dialog-main_right"},[a("div",{staticClass:"u-dialog-main_title"},[1==t.dialogQueryParams.is_official?a("span",[t._v("推荐方案")]):a("div",{staticClass:"u-dialog-main_search"},[a("div",{staticClass:"u-dialog-main_search_title"},[t._v(" 自选方案 ")]),2==t.isSelectType?a("div",{staticClass:"u-select-input"},[a("el-input",{attrs:{placeholder:"输入成就名称/成就描述/称号/奖励物品「回车」进行搜索"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandle.apply(null,arguments)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[t._t("default",(function(){return[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",{staticClass:"u-text"},[t._v("关键词")])]}))]},proxy:!0}],null,!0),model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("el-button",{attrs:{slot:"append",type:"primary",plain:""},on:{click:t.searchHandle},slot:"append"},[a("i",{staticClass:"el-icon-position"}),a("span",{staticClass:"u-text"},[t._v("搜索")])])],1)],1):t._e()])]),1==t.dialogQueryParams.is_official?a("div",{staticClass:"u-dialog-main_recommend"},[t.recommendList.length?t._e():a("div",{staticClass:"u-recommend-empty"},[a("img",{attrs:{src:i("9b30"),width:"300px"}})]),t.recommendList.length?a("div",{staticClass:"u-recommend-list u-common-list"},t._l(t.recommendList,(function(e){return a("div",{key:e.id,staticClass:"u-item",class:{active:e.id==t.selectRecommendItem.id},attrs:{title:e.title},on:{click:function(i){return t.selectRecommend(e)}}},[t._v(" "+t._s(e.title)+" ")])})),0):t._e(),t.recommendList.length?a("div",{staticClass:"u-recommend-desc"},[a("div",{staticClass:"u-recommend-desc_title"},[t._v(" 方案总资历点数："+t._s((null===(e=t.selectRecommendItem)||void 0===e?void 0:e.all)||0)+" ")]),a("div",{staticClass:"u-recommend-desc_source"},[t._v(" 来源："+t._s(t.selectRecommendItem?1==t.selectRecommendItem.is_official?"魔盒":"玩家":"-")+" ")]),a("div",{staticClass:"u-recommend-desc_text"},[a("span",[t._v("简介：")]),a("div",{domProps:{innerHTML:t._s(t.selectRecommendItem.desc)}})])]):t._e()]):a("div",{staticClass:"u-dialog-main_custom"},[a("div",{staticClass:"u-dialog-main_category"},[a("div",{staticClass:"u-dialog-main_category_item",class:{active:1==t.isSelectType},on:{click:function(e){return t.changeSelfCategory(1)}}},[t._v(" 总览 ")]),a("div",{staticClass:"u-dialog-main_category_item",class:{active:2==t.isSelectType},on:{click:function(e){return t.changeSelfCategory(2)}}},[t._v(" 地图 ")])]),1==t.isSelectType?a("div",{staticClass:"u-dialog-main_box"},[a("div",{staticClass:"u-dialog-main_custom_list u-common-list u-first-box"},t._l(t.menuList,(function(e){return a("div",{key:e.id,staticClass:"u-item u-first",class:{active:t.selectMenuItem.id==e.id},on:{click:function(i){return t.selectMenu(e,1)}}},[a("el-badge",{staticClass:"u-badge-item",attrs:{value:t.selectMenuNum(e)}},[t._v(" "+t._s(e.name)+" ")])],1)})),0),a("div",{staticClass:"u-dialog-main_custom_list u-common-list"},t._l(t.selectMenuItem.children,(function(e){return a("div",{key:e.id,staticClass:"u-item",class:{active:t.selectMenuChildrenItem.id==e.id},on:{click:function(i){return t.selectMenu(e)}}},[a("el-badge",{attrs:{"is-dot":t.isSelectMenu(e)}},[t._v(" "+t._s(e.name)+" ")])],1)})),0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAchievement,expression:"loadingAchievement"}],staticClass:"u-dialog-main_custom_list u-common-list"},[0==t.achievements.length?a("img",{attrs:{src:i("9b30"),width:"90%"}}):a("div",{staticClass:"u-item u-select-all",on:{click:function(e){return t.selectAllAchievement()}}},[t._v("全部")]),t._l(t.achievements,(function(e){return a("div",{key:e.ID,staticClass:"u-item u-select",class:{"achievement-active":t.isSelectAchievement(e)},on:{click:function(i){return t.selectAchievement(e)}}},[a("img",{attrs:{src:i("f024")}}),a("el-tooltip",{attrs:{effect:"dark",content:e.Name,placement:"top-start"}},[a("div",[t._v(t._s(e.Name))])])],1)}))],2)]):a("div",{staticClass:"u-dialog-main_box"},[a("div",{staticClass:"u-dialog-main_custom_list u-common-list u-first-box"},t._l(t.mapList,(function(e){return a("div",{key:e.value,staticClass:"u-item u-first",class:{active:t.selectMapItem.value==e.value},on:{click:function(i){return t.selectMap(e,1)}}},[a("el-badge",{staticClass:"u-badge-item",attrs:{value:t.selectMapNum(e)}},[t._v(" "+t._s(e.label)+" ")])],1)})),0),a("div",{staticClass:"u-dialog-main_custom_list u-common-list"},t._l(t.selectMapItem.children,(function(e){return a("div",{key:e.value,staticClass:"u-item",class:{active:t.selectMapChildrenItem.value==e.value},on:{click:function(i){return t.selectMap(e)}}},[a("el-badge",{attrs:{"is-dot":t.isSelectMap(e)}},[t._v(" "+t._s(e.label)+" ")])],1)})),0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAchievement,expression:"loadingAchievement"}],staticClass:"u-dialog-main_custom_list u-common-list"},[0==t.achievements.length?a("img",{attrs:{src:i("9b30"),width:"90%"}}):a("div",{staticClass:"u-item u-select-all",on:{click:function(e){return t.selectAllAchievement()}}},[t._v("全部")]),t._l(t.achievements,(function(e){return a("div",{key:e.ID,staticClass:"u-item u-select",class:{"achievement-active":t.isSelectAchievement(e)},on:{click:function(i){return t.selectAchievement(e)}}},[a("img",{attrs:{src:i("f024")}}),a("el-tooltip",{attrs:{effect:"dark",content:e.Name,placement:"top-start"}},[a("div",[t._v(t._s(e.Name))])])],1)}))],2)])])])]),a("div",{staticClass:"u-filter"},[a("el-checkbox",{model:{value:t.isFilter,callback:function(e){t.isFilter=e},expression:"isFilter"}},[t._v("过滤已完成成就")])],1),a("div",{staticClass:"u-dialog-footer"},[a("div",{staticClass:"u-dialog-footer_tips"},[t._v(" 当前方案共 "),a("span",[t._v(t._s(t.leapForm.all.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))]),t._v(" 资历，可为你提供 "),a("span",[t._v(t._s(this.leapForm.diffNum.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))]),t._v(" 资历提升，距离目标还剩 "),a("span",[t._v(t._s(t.leapForm.remaining.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))]),t._v(" 资历。 ")]),a("div",{staticClass:"u-btn",on:{click:function(e){return t.submitLeap()}}},[t._v("生成方案")])])])])],1)}),u=[],d=(i("99af"),i("13d5"),i("a9e3"),i("07ac"),i("4c53"),i("9d4a"),i("2ef0")),m={components:{},props:{show:{type:Boolean,default:!1},currentRole:{type:Object,default:function(){return{}}},pointsData:{type:Object,default:function(){return{}}}},watch:{show:{deep:!0,handler:function(e){e&&this.createLeap(e)}},"leapForm.number":{deep:!0,handler:function(e){this.schemeCompute()}},customList:{deep:!0,handler:function(){this.schemeCompute()}},dialogTableVisible:{handler:function(e){e||this.$emit("cancel",e)}},isFilter:{handler:function(e){this.reloadCustom()}}},data:function(){return{dialogTableVisible:!1,isFilter:!0,leapForm:{title:"",all:0,diffNum:0,remaining:0,number:0},dialogQueryParams:{is_official:1,_no_page:1},recommendList:[],selectRecommendItem:{},isSelectType:1,customList:[],menuList:[],selectMenuItem:{},selectMenuChildrenItem:{},mapList:[],selectMapItem:{},selectMapChildrenItem:{},achievements:[],achievements_bak:[],loadingAchievement:!1,searchInput:"",isSelectSearchType:""}},created:function(){},mounted:function(){},methods:{createLeap:function(e){this.getMenuList(),this.loadMapList(),this.dialogTableVisible=e,this.leapForm={title:"",all:0,diffNum:0,remaining:0,number:0},this.dialogQueryParams={is_official:1,_no_page:1},this.customList=[],this.dialogQuery()},changeCategory:function(e){this.leapForm={title:"",all:0,diffNum:0,remaining:0,number:0},this.dialogQueryParams.is_official=e,1==e&&this.dialogQuery()},reloadCustom:function(){this.initCustomList()},changeSelfCategory:function(e){var t=this;this.customList.length>0&&this.isSelectType!=e?this.$confirm("切换分类将导致之前选择的数据失效，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.isSelectType=e,t.initCustomList()})):(this.isSelectType=e,this.initCustomList())},initCustomList:function(){this.customList=[],1==this.isSelectType?this.selectMenu(this.menuList[1],1):(this.selectMapItem=this.mapList[0],this.selectMapChildrenItem=this.selectMapItem.children[0],this.getMapAchievements(this.selectMapChildrenItem.value))},dialogQuery:function(){var e=this;Object(o["g"])(this.dialogQueryParams).then((function(t){var i;e.recommendList=(null===(i=t.data)||void 0===i?void 0:i.data)||[]}))},selectRecommend:function(e){this.selectRecommendItem=e;var t=this.getSchemePoints(this.selectRecommendItem.schema),i=0;this.leapForm.number>0&&this.leapForm.number>t.diffNum&&(i=this.leapForm.number-t.diffNum),this.leapForm.all=t.all,this.leapForm.diffNum=t.diffNum,this.leapForm.remaining=i},loadMapList:function(){var e=this,t=this.$store.state.client,i={client:t,_no_page:1};Object(c["g"])(i).then((function(t){var i=t.data.data||[],a=Object.values(i.reduce((function(e,t){return t.RegionName?(e[t.RegionName]||(e[t.RegionName]={value:Number(t.Region),label:t.RegionName,children:[]}),e[t.RegionName].children.push({value:Number(t.ID),label:t.MapName,parent:Number(t.Region)}),e):e}),{}));e.mapList=a}))},getMenuList:function(){var e=this;Object(c["i"])({general:1,client:this.$store.state.client}).then((function(t){var i=t.data.data.menus;e.menuList=i,e.initCustomList()}))},getSchemePoints:function(e){var t=this.pointsData,i=[];e.forEach((function(e){i.push({ID:e,Point:t[e]})}));var a=this.schemeCompute(i);return{all:a.all,diffNum:a.diffNum}},selectMenu:function(e,t){var i;1==t?(this.selectMenuItem=e,this.selectMenuChildrenItem={},0==e.achievements.length&&(this.selectMenuChildrenItem=(null===(i=e.children)||void 0===i?void 0:i[0])||{}),this.getMenuAchievements(e.sub,0==e.achievements.length?this.selectMenuChildrenItem.detail:"")):(this.selectMenuChildrenItem=e,this.getMenuAchievements(e.sub,e.detail))},getMenuAchievements:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1?arguments[1]:void 0;this.loadingAchievement=!0,Object(c["h"])(t,i).then((function(t){var i=t.data.data.achievements||[],a=[];if(i.forEach((function(e){a.push(e),e.SeriesAchievementList&&e.SeriesAchievementList.forEach((function(e,t){t>0&&a.push(e)}))})),e.isFilter){var n=[];a.forEach((function(t){-1==e.currentRole.achievements.indexOf(t.ID)&&n.push(t)})),e.achievements=n}else e.achievements=a})).finally((function(){e.loadingAchievement=!1}))},selectMenuNum:function(e){for(var t=0,i=this.customList,a=i.length,n=0;n<a;n++)i[n].Sub==e.sub&&t++;return t},isSelectMenu:function(e,t){for(var i=!1,a=this.customList,n=a.length,s=0;s<n;s++)if(1==t){if(a[s].Sub==e.sub&&!a[s].Detail){i=!0;break}}else if(a[s].Detail==e.detail){i=!0;break}return i},isSelectAchievement:function(e){for(var t=!1,i=this.customList,a=i.length,n=0;n<a;n++)if(i[n].ID==e.ID){t=!0;break}return t},selectMap:function(e,t){var i;1==t?(this.selectMapItem=e,this.selectMapChildrenItem=(null===(i=e.children)||void 0===i?void 0:i[0])||{}):this.selectMapChildrenItem=e;this.getMapAchievements(this.selectMapChildrenItem.value)},searchHandle:function(){var e=this.searchInput;this.selectMapItem={},this.selectMapChildrenItem={},this.getMapAchievements("",e)},getMapAchievements:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={keyword:i,scene:t,client:this.$store.state.client,_no_page:1,limit:99999};Object(c["r"])(a).then((function(t){var i=t.data.data.achievements||[];if(e.isFilter){var a=[];i.forEach((function(t){-1==e.currentRole.achievements.indexOf(t.ID)&&a.push(t)})),e.achievements=a}else e.achievements=i;e.$forceUpdate()}))},selectMapNum:function(e){var t=this,i=0;return e.children.forEach((function(e){t.customList.forEach((function(t){e.value==t.SceneID&&i++}))})),i},isSelectMap:function(e){for(var t=!1,i=this.customList,a=i.length,n=0;n<a;n++)if(i[n].SceneID==e.value){t=!0;break}return t},selectAllAchievement:function(){var e=this;1==this.isSelectType?Object(d["isEmpty"])(this.selectMenuChildrenItem)?this.isSelectMenu(this.selectMenuItem,1)?this.customList=this.customList.filter((function(t){return t.Sub!=e.selectMenuItem.sub||t.Sub==e.selectMenuItem.sub&&null!=t.Detail})):this.customList=this.customList.concat(this.achievements):this.isSelectMenu(this.selectMenuChildrenItem)?this.customList=this.customList.filter((function(t){return t.Detail!=e.selectMenuChildrenItem.detail})):this.customList=this.customList.concat(this.achievements):this.isSelectMap(this.selectMapChildrenItem)?this.customList=this.customList.filter((function(t){return t.SceneID!=e.selectMapChildrenItem.value})):this.customList=this.customList.concat(this.achievements)},selectAchievement:function(e){this.isSelectAchievement(e)?this.customList=this.customList.filter((function(t){return t.ID!=e.ID})):this.customList.push(e)},schemeCompute:function(e){var t=0,i=0,a=0,n=this,s=e||this.customList,l=s.filter((function(e){var i;return t+=e.Point,-1==(null===(i=n.currentRole.achievements)||void 0===i?void 0:i.indexOf(e.ID))||!1}));if(l.forEach((function(e){i+=e.Point})),e)return{all:t,diffNum:i};a=Number(this.leapForm.number)-this.currentRole.total-i,this.leapForm.all=t,this.leapForm.diffNum=i,this.leapForm.remaining=a>0?a:0},submitLeap:function(){var e=this,t=[];if(this.customList.forEach((function(e){t.push(e.ID)})),Object(d["isEmpty"])(this.leapForm.title))return this.$message.warning("请输入方案名称");if(!Number(this.leapForm.number))return this.$message.warning("请输入目标资历");var i={createBy:"recommend"};0==this.dialogQueryParams.is_official&&(i.createBy=1==this.isSelectType?"overview":"map");var a={title:Object(d["isEmpty"])(this.leapForm.title)?"未命名方案":this.leapForm.title,schema:t,meta:i};Object(o["a"])(a).then((function(t){e.dialogTableVisible=!1,e.$message.success("创建成功"),e.$emit("reloadList",t.data.data);var i=e.$router.resolve({name:"leap",query:{id:t.data.data.id}});window.open(i.href,"_blank")}))}}},h=m,v=(i("6b1b"),i("2877")),f=Object(v["a"])(h,r,u,!1,null,null,null),p=f.exports,g=function(){var e,t=this,i=t._self._c;return i("div",{staticClass:"m-detail"},[i("div",{staticClass:"u-detail-left"},[i("ul",{staticClass:"u-detail-left_item"},[i("li",{staticClass:"u-menu-parent u-menu-text",class:{active:null==t.detailSelectMenu},on:{click:function(e){return t.changeDetailMenu(null,0)}}},[t._v(" 全部 ")])]),"map"==(null===(e=t.detail.meta)||void 0===e?void 0:e.createBy)?i("div",t._l(t.mapList,(function(e,a){return i("div",{key:a},[e.show?i("ul",{staticClass:"u-detail-left_item"},[i("li",{staticClass:"u-menu-parent u-menu-text"},[t._v(" "+t._s(e.label)+" ")]),t._l(e.children,(function(e,a){return i("div",{key:a,on:{click:function(i){return i.stopPropagation(),t.changeDetailMenu(e,2)}}},[e.show?i("li",{staticClass:"u-menu-item_children u-menu-text",class:{active:t.detailSelectMenu==e.value}},[t._v(" "+t._s(e.label)+" ")]):t._e()])}))],2):t._e()])})),0):i("div",t._l(t.menuList,(function(e,a){return i("div",{key:a,on:{click:function(i){return t.changeDetailMenu(e,1)}}},[e.show?i("ul",{staticClass:"u-detail-left_item"},[i("li",{staticClass:"u-menu-parent u-menu-text",class:{active:t.detailSelectMenu==e.id}},[t._v(" "+t._s(e.name)+" ")]),t._l(e.children,(function(e,a){return i("div",{key:a,on:{click:function(i){return i.stopPropagation(),t.changeDetailMenu(e,2)}}},[e.show?i("li",{staticClass:"u-menu-item_children u-menu-text",class:{active:t.detailSelectMenu==e.id}},[t._v(" "+t._s(e.name)+" ")]):t._e()])}))],2):t._e()])})),0)]),i("div",{staticClass:"u-detail-right"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.detail.achievements||[],stripe:"",height:"100%","row-class-name":"u-table-row","cell-class-name":"u-table-cell","header-row-class-name":"u-table-header_row","header-cell-class-name":"u-table-header_cell"}},[i("el-table-column",{attrs:{prop:"Name",label:"成就名称"},scopedSlots:t._u([{key:"default",fn:function(e){var a;return[i("a",{attrs:{href:t.getLink("achievement",e.row.ID),target:"_blank"}},[i("div",{staticClass:"u-achievement-name"},[i("img",{staticClass:"u-icon",attrs:{src:t.iconLink(null===(a=e.row)||void 0===a?void 0:a.IconID)}}),i("span",[t._v(t._s(e.row.Name))])])])]}}])}),i("el-table-column",{attrs:{label:"资历点数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.Point||0)+" ")]}}])}),i("el-table-column",{attrs:{label:"完成情况",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:e.row.isCompleted?"success":"danger"}},[t._v(t._s(e.row.isCompleted?"已完成":"未完成"))])]}}])}),i("el-table-column",{attrs:{label:"难度",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-rate",{attrs:{value:e.row.difficulty,disabled:"","allow-half":"","disabled-void-color":"#574938"}})]}}])}),i("el-table-column",{attrs:{label:"奖励",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a;return[e.row.item?i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("jx3-item",{attrs:{item:e.row.item}})],1),i("img",{staticClass:"u-icon",attrs:{src:t.iconLink(null===(a=e.row.item)||void 0===a?void 0:a.IconID)}})]):t._e()]}}])})],1)],1)])},_=[],b=(i("7db0"),i("d81d"),i("b680"),i("b64b"),i("fffc"),i("a573"),i("c7fa")),y=i("85e4"),w={components:{"jx3-item":b["a"]},props:{currentRole:{type:Object}},data:function(){return{menuList:[],mapList:[],detail:{},detailSelectMenu:null,loading:!1}},watch:{currentRole:{deep:!0,handler:function(e,t){this.getSchemaDetail()}}},created:function(){},mounted:function(){},methods:{iconLink:y["k"],getLink:y["f"],getSchemaDetail:function(){var e=this;Object(o["f"])(this.$route.query.id).then((function(t){var i,a,n,s,l,c,o,r,u,d;(e.detail=(null===(i=t.data)||void 0===i?void 0:i.data)||{},(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.data)||void 0===n||null===(s=n.schema)||void 0===s?void 0:s.length)>0)&&("map"==(null===(l=e.detail)||void 0===l||null===(c=l.meta)||void 0===c?void 0:c.createBy)?e.loadMapList(null===t||void 0===t||null===(o=t.data)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.schema):e.getMenuList(null===t||void 0===t||null===(u=t.data)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.schema))}))},loadMapList:function(e){var t=this,i=this.$store.state.client,a={client:i,_no_page:1};Object(c["g"])(a).then((function(i){var a=i.data.data||[],n=Object.values(a.reduce((function(e,t){return t.RegionName?(e[t.RegionName]||(e[t.RegionName]={value:Number(t.Region),label:t.RegionName,children:[]}),e[t.RegionName].children.push({value:Number(t.ID),label:t.MapName,parent:Number(t.Region)}),e):e}),{}));t.mapList=n,t.getAchievements(e)}))},getMenuList:function(e){var t=this;Object(c["i"])({general:1,client:this.$store.state.client}).then((function(i){var a=i.data.data.menus;t.menuList=a,t.getAchievements(e)}))},getAchievements:function(e){var t,i=this;this.loading=!0;var a="Name,Sub,Detail,IconID,Point,ID";"map"==(null===(t=this.detail.meta)||void 0===t?void 0:t.createBy)&&(a="Name,IconID,Point,SceneID,ID"),Object(c["c"])({ids:e.toString(),attributes:a}).then((function(t){for(var a,n,s,l=(null===(a=t.data)||void 0===a?void 0:a.data)||[],c=l.length,o=i.currentRole,r=0;r<c;r++){var u;-1!=(null===o||void 0===o||null===(u=o.achievements)||void 0===u?void 0:u.indexOf(l[r].ID))&&(l[r].isCompleted=!0)}if(console.log(l),"map"==(null===(n=i.detail)||void 0===n||null===(s=n.meta)||void 0===s?void 0:s.createBy)){var m=Object(d["cloneDeep"])(i.mapList);m.forEach((function(e){e.children.forEach((function(t){for(var i=0;i<c;i++)t.value==l[i].SceneID&&(l[i].show=!0,t.show=!0,e.show=!0)}))})),console.log(m),i.$set(i,"mapList",m)}else{var h=Object(d["cloneDeep"])(i.menuList);Object.keys(h).map((function(e){h[e].children.forEach((function(t){for(var i=0;i<c;i++)h[e].sub==l[i].Sub&&(h[e].show=!0),l[i].Detail==t.detail&&(t.show=!0)}))})),i.$set(i,"menuList",h)}i.detail.achievements=l,i.detail.achievementsBak=Object(d["cloneDeep"])(i.detail.achievements),i.loading=!1,i.getAchievementProgress(e)}))},getAchievementProgress:function(e){var t=this;Object(o["h"])(e).then((function(e){var i;t.detail.progressAndDifficulty=(null===(i=e.data)||void 0===i?void 0:i.data)||[]}))},getDifficulty:function(){var e=this,t=[];this.detail.achievementsBak.forEach((function(i){var a=e.detail.progressAndDifficulty.find((function(e){return e.achievement_id==i.ID}));i.difficulty=((null===a||void 0===a?void 0:a.difficulty)||0)/10,i.process=((a.completed_role_count/a.total_role_count*100).toFixed(2)||0)+"%",t.push(i)})),this.$set(this.detail,"achievements",t),this.$forceUpdate()},changeDetailMenu:function(e,t){var i,a;if(0==t)return this.detailSelectMenu=null,void(this.detail.achievements=Object(d["cloneDeep"])(this.detail.achievementsBak));"map"==(null===(i=this.detail.meta)||void 0===i?void 0:i.createBy)&&(this.detailSelectMenu=e.value),"map"==(null===(a=this.detail.meta)||void 0===a?void 0:a.createBy)?this.detailSelectMenu=e.value:this.detailSelectMenu=e.id;for(var n=[],s=this.detail.achievementsBak,l=s.length,c=0;c<l;c++){var o;"map"==(null===(o=this.detail.meta)||void 0===o?void 0:o.createBy)?s[c].SceneID==e.value&&n.push(s[c]):(1==t&&s[c].Sub==e.sub||2==t&&s[c].Detail==e.detail)&&n.push(s[c])}this.detail.achievements=n}}},C=w,k=(i("326a"),Object(v["a"])(C,g,_,!1,null,null,null)),S=k.exports,L=i("c9d2"),D=i("1450"),I={components:{createFrom:p,detail:S},data:function(){return{currentRole:{},roleList:[],loading:!1,list:[],queryParams:{page:1,per:12},pageTotal:0,showForm:!1,pointsData:{},showDetail:!1}},watch:{},created:function(){this.loadUserRoles(),this.$route.query.id&&(this.showDetail=!0)},mounted:function(){},methods:{iconLink:y["k"],getLink:y["f"],isEmpty:d["isEmpty"],reloadList:function(){this.showForm=!1,this.getSchemaList()},loadUserRoles:function(){var e=this;L["a"].isLogin()?Object(D["a"])().then((function(t){var i,a,n,s;e.roleList=(null===(i=t.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.list)||[],e.currentRole=(null===(n=t.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.list[0])||{},e.getPoints()})):this.$confirm("请先登录").then((function(e){L["a"].toLogin(window.location.href)}))},getPoints:function(){var e=this;return Object(c["b"])().then((function(t){var i=t.data.data.points;e.pointsData=i,e.$route.query.id?e.getRoleGameAchievements():e.getSchemaList()}))},onChangeRole:function(e){this.currentRole=e,this.getRoleGameAchievements()},getRoleGameAchievements:function(){var e=this;Object(c["m"])(this.currentRole.jx3id).then((function(t){var i,a;e.currentRole.achievements=(null===(i=t.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.achievements)||[];var n=0,s=Object(d["cloneDeep"])(e.currentRole.achievements).split(",")||[];s.forEach((function(t){n+=e.pointsData[t]||0})),e.$set(e.currentRole,"total",n)}))},pageChange:function(e){this.queryParams.page=e,this.getSchemaList(!0)},getSchemaList:function(e){var t=this;this.loading=!0,Object(o["g"])(this.queryParams).then((function(i){var a,n,s,l;t.list=(null===(a=i.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.list)||[],t.pageTotal=(null===(s=i.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.total)||0,e||t.getRoleGameAchievements()})).finally((function(){t.loading=!1}))},getSchemePoints:function(e){var t=this.pointsData,i=[];e.forEach((function(e){i.push({ID:e,Point:t[e]})}));var a=this.schemeCompute(i);return{all:a.all,diffNum:a.diffNum}},schemeCompute:function(e){var t=0,i=0,a=this,n=e||this.customList,s=n.filter((function(e){var i;return t+=e.Point,-1==(null===(i=a.currentRole.achievements)||void 0===i?void 0:i.indexOf(e.ID))||!1}));return s.forEach((function(e){i+=e.Point})),{all:t,diffNum:i}}}},M=I,R=(i("1937"),Object(v["a"])(M,s,l,!1,null,null,null)),x=R.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-leap-mobile",class:{fold:e.isFold}},[t("div",{staticClass:"m-overview-header_mobile"},[t("div",{staticClass:"u-name"},[t("i",{class:e.isFold?"el-icon-s-unfold":"el-icon-s-fold ",on:{click:e.changeFold}}),e._v("  ")]),t("div",{staticClass:"u-select"},[t("el-dropdown",{attrs:{trigger:"click"}},[t("div",{staticClass:"u-select-btn"},[t("span",[e._v(e._s(e.currentRole.name)+" "+e._s(e.currentRole.server&&"·")+" "+e._s(e.currentRole.server))]),t("img",{attrs:{src:i("e5dd"),alt:"",width:"16px",height:"16px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.roleList,(function(i){return t("el-dropdown-item",{key:i.ID},[t("div",{staticClass:"m-role-item",on:{click:function(t){return e.onChangeRole(i)}}},[t("span",[e._v(e._s(i.name))]),t("span",[e._v(e._s(i.server))])])])})),1)],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isFold&&e.isDetail,expression:"!isFold && isDetail"}],staticClass:"m-achievement-tab"},[t("ul",{staticClass:"u-zl-item",class:{active:null==e.detailSelectMenu}},[t("div",{staticClass:"u-zl-item_title",on:{click:function(t){return e.changeDetailMenu(null,0)}}},[e._v("全部")])]),e._l(e.menuList,(function(i,a){return t("div",{key:a,on:{click:function(t){return e.changeDetailMenu(i,1)}}},[i.show?t("ul",{staticClass:"u-zl-item",class:{active:e.detailSelectMenu==i.id}},[t("div",{staticClass:"u-zl-item_title"},[e._v(e._s(i.name))]),e._l(i.children,(function(i,a){return t("div",{key:a,on:{click:function(t){return t.stopPropagation(),e.changeDetailMenu(i,2)}}},[i.show?t("li",{staticClass:"u-zl-item_children",class:{active:e.detailSelectMenu==i.id}},[e._v(" "+e._s(i.name)+" ")]):e._e()])}))],2):e._e()])}))],2),e.isDetail?t("div",{staticClass:"m-leap-detail"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.detail.achievements||[],stripe:"",height:"100%","row-class-name":"u-table-row","cell-class-name":"u-table-cell","header-row-class-name":"u-table-header_row","header-cell-class-name":"u-table-header_cell"}},[t("el-table-column",{attrs:{prop:"Name",label:"成就名称"},scopedSlots:e._u([{key:"default",fn:function(i){var a;return[t("a",{attrs:{href:e.getLink("achievement",i.row.ID),target:"_blank"}},[t("div",{staticClass:"u-achievement-name"},[t("img",{staticClass:"u-icon",attrs:{src:e.iconLink(null===(a=i.row)||void 0===a?void 0:a.IconID)}}),t("span",[e._v(e._s(i.row.Name))])])])]}}])}),t("el-table-column",{attrs:{label:"资历点数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.Point||0)+" ")]}}])}),t("el-table-column",{attrs:{label:"难度",width:"140"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-rate",{attrs:{value:e.row.difficulty,disabled:"","allow-half":"","disabled-void-color":"#574938"}})]}}])}),t("el-table-column",{attrs:{label:"奖励",width:"60"},scopedSlots:e._u([{key:"default",fn:function(i){var a;return[i.row.item?t("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[t("div",[t("jx3-item",{attrs:{item:i.row.item}})],1),t("img",{staticClass:"u-icon",attrs:{slot:"reference",src:e.iconLink(null===(a=i.row.item)||void 0===a?void 0:a.IconID)},slot:"reference"})]):e._e()]}}])})],1)],1):t("div",{staticClass:"m-leap-main"},[t("el-table",{staticStyle:{width:"100%","max-height":"calc(100vh - 85px)"},attrs:{data:e.list,height:"100%",stripe:"","row-class-name":"u-table-row","cell-class-name":"u-table-cell","header-row-class-name":"u-table-header_row","header-cell-class-name":"u-table-header_cell"}},[t("el-table-column",{attrs:{prop:"title",label:"方案名称",width:"160"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("router-link",{attrs:{target:"_blank",to:{name:"leap",query:{id:i.row.id}}}},[e._v(" "+e._s(i.row.title)+" ")])]}}],null,!1,2830009994)}),t("el-table-column",{attrs:{label:"方案资历总点数",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var i;return[e._v(" "+e._s((null===(i=e.getSchemePoints(t.row.schema))||void 0===i?void 0:i.all)||0)+" ")]}}],null,!1,2162533873)}),t("el-table-column",{attrs:{label:"可提升资历点数",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var i;return[e._v(" "+e._s((null===(i=e.getSchemePoints(t.row.schema))||void 0===i?void 0:i.diffNum)||0)+" ")]}}],null,!1,1534313675)}),t("el-table-column",{attrs:{label:"来源",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.is_official?"魔盒":"玩家")+" ")]}}],null,!1,2935795252)})],1),t("div",{staticClass:"u-page"},[t("el-pagination",{attrs:{background:"","hide-on-single-page":"",layout:"prev, pager, next",total:e.pageTotal},on:{"current-change":e.pageChange}})],1)],1)])},O=[],N={components:{"jx3-item":b["a"]},data:function(){return{isFold:!1,isDetail:!1,currentRole:{},roleList:[],loading:!1,menuList:[],selectMenuItem:{},selectMenuChildrenItem:{},achievements:[],list:[],queryParams:{page:1,per:20},pageTotal:0,customList:[],detail:{},detailSelectMenu:null,detailPageTotal:0}},created:function(){this.$route.query.id&&(this.isDetail=!0,this.getMenuList()),this.loadUserRoles()},mounted:function(){},methods:{changeFold:function(){this.isFold=!this.isFold,this.$store.commit("SET_STATE",{key:"is_fold",value:this.isFold})},iconLink:y["k"],getLink:y["f"],getMenuList:function(){var e=this;Object(c["i"])({general:1,client:this.$store.state.client}).then((function(t){var i=t.data.data.menus;e.menuList=i,e.getSchemaDetail()}))},loadUserRoles:function(){var e=this;L["a"].isLogin()&&Object(D["a"])().then((function(t){var i,a,n,s;e.roleList=(null===(i=t.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.list)||[],e.currentRole=(null===(n=t.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.list[0])||{},e.getPoints()}))},getPoints:function(){var e=this;return Object(c["b"])().then((function(t){var i=t.data.data.points;e.pointsData=i,e.$route.query.id?e.getRoleGameAchievements():e.getSchemaList()}))},onChangeRole:function(e){this.currentRole=e,this.getRoleGameAchievements()},getRoleGameAchievements:function(){var e=this;Object(c["m"])(this.currentRole.jx3id).then((function(t){var i,a;e.currentRole.achievements=(null===(i=t.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.achievements)||[];var n=0,s=Object(d["cloneDeep"])(e.currentRole.achievements).split(",")||[];s.forEach((function(t){n+=e.pointsData[t]||0})),e.$set(e.currentRole,"total",n)}))},pageChange:function(e){this.queryParams.page=e,this.getSchemaList(!0)},getSchemaList:function(e){var t=this;Object(o["g"])(this.queryParams).then((function(i){var a,n,s,l;t.list=(null===(a=i.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.list)||[],t.pageTotal=(null===(s=i.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.total)||0,e||t.getRoleGameAchievements()}))},getSchemePoints:function(e){var t=this.pointsData,i=[];e.forEach((function(e){i.push({ID:e,Point:t[e]})}));var a=this.schemeCompute(i);return{all:a.all,diffNum:a.diffNum}},getSchemaDetail:function(){var e=this;Object(o["f"])(this.$route.query.id).then((function(t){var i,a,n;e.detail=(null===(i=t.data)||void 0===i?void 0:i.data)||{},e.getAchievements(null===(a=t.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.schema)}))},getAchievements:function(e){var t=this;this.loading=!0,Object(c["c"])({ids:e.toString(),attributes:"Name,Sub,Detail,IconID,Item,Point,ID"}).then((function(i){var a;t.detail.achievements=(null===(a=i.data)||void 0===a?void 0:a.data)||[],t.detail.achievementsBak=Object(d["cloneDeep"])(t.detail.achievements);var n=Object(d["cloneDeep"])(t.menuList);Object.keys(n).map((function(e){n[e].children.forEach((function(i){t.detail.achievements.forEach((function(t){n[e].sub==t.Sub&&(n[e].show=!0),t.Detail==i.detail&&(i.show=!0)}))}))})),t.loading=!1,t.$set(t,"menuList",n),t.getAchievementProgress(e)}))},getAchievementProgress:function(e){var t=this;Object(o["h"])(e).then((function(e){var i;t.detail.progressAndDifficulty=(null===(i=e.data)||void 0===i?void 0:i.data)||[],t.getDifficulty()}))},getDifficulty:function(){var e=this,t=[];this.detail.achievementsBak.forEach((function(i){var a=e.detail.progressAndDifficulty.find((function(e){return e.achievement_id==i.ID}));i.difficulty=((null===a||void 0===a?void 0:a.difficulty)||0)/10,i.process=((a.completed_role_count/a.total_role_count*100).toFixed(2)||0)+"%",t.push(i)})),this.$set(this.detail,"achievements",t),this.$forceUpdate()},changeDetailMenu:function(e,t){if(0==t)return this.detailSelectMenu=null,void(this.detail.achievements=Object(d["cloneDeep"])(this.detail.achievementsBak));this.detailSelectMenu=e.id;var i=[];this.detail.achievementsBak.forEach((function(a){1==t&&a.Sub==e.sub&&i.push(a),2==t&&a.Detail==e.detail&&i.push(a)})),this.detail.achievements=i},schemeCompute:function(e){var t=0,i=0,a=this,n=e||this.customList,s=n.filter((function(e){var i;return t+=e.Point,-1==(null===(i=a.currentRole.achievements)||void 0===i?void 0:i.indexOf(e.ID))||!1}));return s.forEach((function(e){i+=e.Point})),{all:t,diffNum:i}}}},A=N,F=(i("4c11"),Object(v["a"])(A,j,O,!1,null,null,null)),P=F.exports,E={components:{pc:x,mobile:P},data:function(){return{}},computed:{mobile:function(){var e=navigator.userAgent.toLowerCase(),t=["android","iphone","ipad","ipod","windows phone"];return t.some((function(t){return e.includes(t)}))}},created:function(){},mounted:function(){},methods:{}},T=E,$=(i("ee81"),Object(v["a"])(T,a,n,!1,null,"221f15b6",null));t["default"]=$.exports},c8d2:function(e,t,i){"use strict";var a=i("5e77").PROPER,n=i("d039"),s=i("5899"),l="​᠎";e.exports=function(e){return n((function(){return!!s[e]()||l[e]()!==l||a&&s[e].name!==e}))}},c967:function(e,t,i){"use strict";i.d(t,"i",(function(){return n})),i.d(t,"e",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return o})),i.d(t,"g",(function(){return r})),i.d(t,"a",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"h",(function(){return m}));var a=i("41cb");function n(e){return Object(a["a"])().get("/api/cms/wiki/post/rank",{params:e})}function s(e,t){return Object(a["a"])().get("/api/cms/wiki/post/id/".concat(e),{params:t})}function l(e){return Object(a["a"])({mute:!0}).get("/api/cms/user/".concat(e,"/info"))}function c(e){return Object(a["a"])().get("/api/cms/user/kith/my")}function o(e){return Object(a["a"])().get("/api/cms/user/kith/game-roles/".concat(e))}function r(e){return Object(a["a"])().get("/api/cms/pvx/wiki_achievement_leap_schema",{params:e})}function u(e){return Object(a["a"])().post("/api/cms/pvx/wiki_achievement_leap_schema",e)}function d(e){return Object(a["a"])().get("/api/cms/pvx/wiki_achievement_leap_schema/".concat(e))}function m(e){return Object(a["a"])().post("/api/cms/pvx/wiki_achievement_difficulty/list",e)}},d32c:function(e,t,i){},d58f:function(e,t,i){"use strict";var a=i("59ed"),n=i("7b0b"),s=i("44ad"),l=i("07fa"),c=TypeError,o="Reduce of empty array with no initial value",r=function(e){return function(t,i,r,u){var d=n(t),m=s(d),h=l(d);if(a(i),0===h&&r<2)throw new c(o);var v=e?h-1:0,f=e?-1:1;if(r<2)while(1){if(v in m){u=m[v],v+=f;break}if(v+=f,e?v<0:h<=v)throw new c(o)}for(;e?v>=0:h>v;v+=f)v in m&&(u=i(u,m[v],v,d));return u}};e.exports={left:r(!1),right:r(!0)}},e5dd:function(e,t,i){e.exports=i.p+"img/toggle-user-icon.4a7a0c8b.svg"},ee81:function(e,t,i){"use strict";i("54b6")},f024:function(e,t,i){e.exports=i.p+"img/tick.d0920657.svg"}}]);
//# sourceMappingURL=chunk-3902d4c4.6b4c920e.js.map