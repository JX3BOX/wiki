(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae09a536"],{"0636":function(t,e,a){t.exports=a.p+"img/tog_15.1f7bb44b.svg"},"07cb":function(t,e,a){t.exports=a.p+"img/tog_12.eb4b8e89.svg"},"0a8a":function(t,e,a){t.exports=a.p+"img/tog_41.e54c1e63.svg"},"0c74":function(t,e,a){t.exports=a.p+"img/tog_9.63ff7127.svg"},"13d5":function(t,e,a){"use strict";var o=a("23e7"),r=a("d58f").left,n=a("a640"),i=a("1212"),s=a("9adc"),c=!s&&i>79&&i<83,g=c||!n("reduce");o({target:"Array",proto:!0,forced:g},{reduce:function(t){var e=arguments.length;return r(this,t,e,e>1?arguments[1]:void 0)}})},"1b89":function(t,e,a){t.exports=a.p+"img/tog_17.5c8b5a5e.svg"},2372:function(t,e,a){t.exports=a.p+"img/tog_7.d065990e.svg"},3822:function(t,e,a){t.exports=a.p+"img/tog_4.ae3c48b4.svg"},3835:function(t,e,a){"use strict";function o(t){if(Array.isArray(t))return t}a.d(e,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d28b"),a("14d9"),a("d3b7"),a("3ca3"),a("ddb0");function r(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var o,r,n,i,s=[],c=!0,g=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;c=!1}else for(;!(c=(o=n.call(a)).done)&&(s.push(o.value),s.length!==e);c=!0);}catch(t){g=!0,r=t}finally{try{if(!c&&null!=a["return"]&&(i=a["return"](),Object(i)!==i))return}finally{if(g)throw r}}return s}}var n=a("06c5");a("d9e2");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return o(t)||r(t,e)||Object(n["a"])(t,e)||i()}},"3ba9":function(t,e,a){var o={"./Dark/comparison.svg":"c5bf","./Dark/count.svg":"ac83","./Dark/improvement.svg":"6886","./Dark/jia.svg":"7bad","./Dark/quan.svg":"d3fa","./Dark/right.svg":"fb970","./Dark/search.svg":"dfcb","./Dark/shaixuan.svg":"ea5b","./Dark/sum.svg":"7176","./Dark/tog_1.svg":"7a8e","./Dark/tog_10.svg":"852b","./Dark/tog_11.svg":"8029","./Dark/tog_12.svg":"984b","./Dark/tog_13.svg":"2cfb","./Dark/tog_15.svg":"9ca0","./Dark/tog_16.svg":"be26","./Dark/tog_17.svg":"0768","./Dark/tog_2.svg":"1aa3","./Dark/tog_3.svg":"bbdc","./Dark/tog_4.svg":"484b","./Dark/tog_40.svg":"fc87","./Dark/tog_41.svg":"27aa","./Dark/tog_5.svg":"d1be","./Dark/tog_6.svg":"2681","./Dark/tog_7.svg":"b4e8","./Dark/tog_8.svg":"d1e9","./Dark/tog_9.svg":"45e1","./Light/comparison.svg":"fb2b","./Light/count.svg":"8fe4","./Light/improvement.svg":"ac01","./Light/jia.svg":"e51b","./Light/quan.svg":"a8cd","./Light/right.svg":"5904","./Light/search.svg":"9bd5","./Light/shaixuan.svg":"a106","./Light/sum.svg":"f1ba","./Light/tog_1.svg":"680e","./Light/tog_10.svg":"88a5","./Light/tog_11.svg":"4828","./Light/tog_12.svg":"07cb","./Light/tog_13.svg":"f312","./Light/tog_15.svg":"0636","./Light/tog_16.svg":"d168","./Light/tog_17.svg":"1b89","./Light/tog_2.svg":"63ee","./Light/tog_3.svg":"8c41","./Light/tog_4.svg":"3822","./Light/tog_40.svg":"45f1","./Light/tog_41.svg":"0a8a","./Light/tog_5.svg":"a299","./Light/tog_6.svg":"9edd","./Light/tog_7.svg":"2372","./Light/tog_8.svg":"4ead","./Light/tog_9.svg":"0c74","./finish.svg":"11f9","./search_black.svg":"3a30","./unfinished.svg":"2b7a","./warning.svg":"5720"};function r(t){var e=n(t);return a(e)}function n(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=n,t.exports=r,r.id="3ba9"},"45f1":function(t,e,a){t.exports=a.p+"img/tog_40.8f4e8cc1.svg"},4828:function(t,e,a){t.exports=a.p+"img/tog_11.57cbcc0f.svg"},"4ead":function(t,e,a){t.exports=a.p+"img/tog_8.bc15415d.svg"},5720:function(t,e,a){t.exports=a.p+"img/warning.c59d3be8.svg"},5904:function(t,e,a){t.exports=a.p+"img/right.258873ca.svg"},"63ee":function(t,e,a){t.exports=a.p+"img/tog_2.6d3d6ed7.svg"},"680e":function(t,e,a){t.exports=a.p+"img/tog_1.93447118.svg"},6886:function(t,e,a){t.exports=a.p+"img/improvement.c17a031c.svg"},"6e98":function(t,e,a){},7176:function(t,e,a){t.exports=a.p+"img/sum.2d38a1fd.svg"},"7bad":function(t,e,a){t.exports=a.p+"img/jia.a4ed607e.svg"},"88a5":function(t,e,a){t.exports=a.p+"img/tog_10.4bea69ad.svg"},"8c41":function(t,e,a){t.exports=a.p+"img/tog_3.e4ec62c3.svg"},"8fe4":function(t,e,a){t.exports=a.p+"img/count.6033f8f4.svg"},"96dea":function(t,e,a){"use strict";a("6e98")},"9edd":function(t,e,a){t.exports=a.p+"img/tog_6.19bcab65.svg"},a299:function(t,e,a){t.exports=a.p+"img/tog_5.b1775791.svg"},a8cd:function(t,e,a){t.exports=a.p+"img/quan.b9b6f7b4.svg"},ac01:function(t,e,a){t.exports=a.p+"img/improvement.5709fa8f.svg"},ac83:function(t,e,a){t.exports=a.p+"img/count.e9081d68.svg"},c5bf:function(t,e,a){t.exports=a.p+"img/comparison.dfcc1cad.svg"},d168:function(t,e,a){t.exports=a.p+"img/tog_16.7901e7f6.svg"},d3fa:function(t,e,a){t.exports=a.p+"img/quan.f7959a84.svg"},d58f:function(t,e,a){"use strict";var o=a("59ed"),r=a("7b0b"),n=a("44ad"),i=a("07fa"),s=TypeError,c="Reduce of empty array with no initial value",g=function(t){return function(e,a,g,u){var v=r(e),l=n(v),f=i(v);if(o(a),0===f&&g<2)throw new s(c);var d=t?f-1:0,p=t?-1:1;if(g<2)while(1){if(d in l){u=l[d],d+=p;break}if(d+=p,t?d<0:f<=d)throw new s(c)}for(;t?d>=0:f>d;d+=p)d in l&&(u=a(u,l[d],d,v));return u}};t.exports={left:g(!1),right:g(!0)}},e51b:function(t,e,a){t.exports=a.p+"img/jia.748a1596.svg"},e51d:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("4c53");var o=function(){var t,e,a,o=this,r=o._self._c;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}],staticClass:"p-mini-leap_catalogue"},[r("div",{ref:"infoTop",staticClass:"m-info-top"},[r("div",{staticClass:"m-avatar-list"},[r("div",{staticClass:"m-avatar-item",on:{click:o.handleClickCategory}},[r("div",{staticClass:"u-avatar-placeholder"},[null!==(t=o.category)&&void 0!==t&&t.sub?r("img",{staticClass:"u-category-icon-img",attrs:{src:o.getIconPath(null===(e=o.category)||void 0===e?void 0:e.sub)}}):o._e()]),r("div",{staticClass:"m-avatar-info"},[r("div",{staticClass:"u-avatar-name"},[o._v(o._s(null===(a=o.category)||void 0===a?void 0:a.name))])])]),o._l(o.compareRoles,(function(t){return r("div",{key:t.jx3id,staticClass:"m-avatar-item",on:{click:function(e){return o.handleDeleteRole(t)}}},[r("RoleAvatar",{staticClass:"u-avatar-img",attrs:{mount:t.mount,body_type:t.body_type}}),r("div",{staticClass:"m-avatar-info"},[r("div",{staticClass:"u-avatar-name"},[o._v(o._s(t.name))]),r("div",{staticClass:"u-avatar-server"},[o._v(o._s(t.server))])])],1)})),o._l(3-o.compareRoles.length,(function(t){return r("div",{key:t,staticClass:"m-avatar-item m-avatar-item--add"})}))],2),r("Search",{on:{submit:o.handleSearchClick}})],1),r("div",{staticClass:"m-category-section",style:{height:o.categoryHeight+"px"}},o._l(o.list,(function(t,e){return r("div",{key:e,staticClass:"m-category-card",on:{click:function(e){return o.handleCategoryClick(t)}}},[r("div",{staticClass:"m-category-box"},[r("div",{staticClass:"u-category-title"},[o._v(o._s(t.name))])]),o._l(o.compareRoles,(function(e,a){return r("div",{key:a,staticClass:"m-category-box"},[r("span",{staticClass:"u-value-text"},[o._v(o._s(o.getUserProgress(e,t)))]),r("span",{staticClass:"u-percent-symbol"},[o._v("%")])])}))],2)})),0),r("CataloguePop",{attrs:{visible:o.drawerCatalogueVisible,category:o.currentCategory,compareRoles:o.compareRoles,showDetailBtn:o.showDetailBtn},on:{"update:visible":function(t){o.drawerCatalogueVisible=t},handleDetailClick:o.handleDetailClick}})],1)},r=[],n=a("5530"),i=a("c7eb"),s=a("1da1"),c=(a("99af"),a("caad"),a("a15b"),a("d81d"),a("14d9"),a("fb6a"),a("b680"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("138d")),g=a("fa1f"),u=a("a01f"),v=a("0dee"),l=a("2ef0"),f=a("7720"),d={name:"CompareCatalogue",components:{RoleAvatar:u["a"],CataloguePop:g["a"],Search:v["a"]},data:function(){return{loading:!1,categoryHeight:0,roles:[],compareRoles:[],pointsData:{},compareAchievements:[],list:[],category:null,currentCategory:null,drawerCatalogueVisible:!1,showDetailBtn:!0}},computed:{isDark:function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return t.matches}},created:function(){document.title="亲友对比",this.init()},methods:{handleClickCategory:function(){this.showDetailBtn=!1,this.currentCategory=Object(l["cloneDeep"])(this.category),this.drawerCatalogueVisible=!0},handleSearchClick:function(t){var e=[];this.compareRoles.forEach((function(t,a){e.push("".concat(t.jx3id,"|").concat(t.server,"|").concat(t.mount,"|").concat(t.body_type,"|").concat(t.name))}));var a=t.params||{};Object(f["b"])(this.$router.resolve({name:"compare/achievement",query:{source:1,roles:e.join(","),keyword:a.keyword||"",scene:a.scene||""}}).href)},init:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var a,o,r,n,g;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=decodeURIComponent(decodeURIComponent(decodeURIComponent(t.$route.query.roles))).split(","),o=t.$route.query.menuId,e.next=4,Promise.all(a.map(function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(e){var a,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.split("|"),t.next=3,Object(c["c"])(a[0]);case 3:return o=t.sent,t.abrupt("return",{jx3id:a[0],server:a[1],mount:a[2],body_type:a[3],name:a[4],finishedAchievements:o.list||[]});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return r=e.sent,t.compareRoles=r,e.next=8,Object(c["b"])(t.$store.state.client);case 8:n=e.sent,g=n.menuList||[],t.pointsData=n.pointsList||[],Object.keys(g).forEach((function(e){var a=g[e];a.sub==o&&(t.category=a,t.list=a.children||[])})),t.$nextTick((function(){t.categoryHeight=document.querySelector("body").offsetHeight-document.querySelector(".m-info-top").offsetHeight})),t.loading=!1;case 14:case"end":return e.stop()}}),e)})))()},getIconPath:function(t){return t?a("3ba9")("./".concat(this.isDark?"Light":"Dark","/tog_").concat(t,".svg")):""},setNumber:function(t,e){if(!t)return"";var a=t.toString();return"w"==e?a.length>4?a.slice(0,-4):"":a.length>4?a.slice(-4):a},handleCategoryClick:function(t){var e=this;this.showDetailBtn=!0,this.currentCategory=Object(l["cloneDeep"])(t),this.currentCategory.name=this.category.name+"-"+this.currentCategory.name;var a=[];console.log(t),this.compareRoles.forEach((function(o){var r=e.getUserProgress(o,t,2);a.push(Object(n["a"])(Object(n["a"])({},o),{},{progress:r.progress,achievementCount:r.achievementCount,allPoints:r.allPoints,ownPoints:r.ownPoints}))})),this.currentCategory.roleAchievements=a,this.drawerCatalogueVisible=!0},handleDetailClick:function(){this.drawerCatalogueVisible=!1,Object(f["b"])(this.$router.resolve({name:"compare/achievement",query:{roles:this.$route.query.roles,sub:this.currentCategory.sub,detail:this.currentCategory.detail}}).href)},getUserProgress:function(t,e){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t||!e||!this.pointsData)return"0.00";var r=0,n=0,i=0,s=function(e){e.forEach((function(e){if(Array.isArray(e))s(e);else{var o=a.pointsData[e]||0;r+=o,i++,t.finishedAchievements&&t.finishedAchievements.includes(String(e))&&(n+=o)}}))};return s(e.achievements),0===r?"0.00":1==o?(n/r*100).toFixed(2):{progress:(n/r*100).toFixed(2),achievementCount:i,allPoints:r,ownPoints:n}}}},p=d,h=(a("96dea"),a("2877")),m=Object(h["a"])(p,o,r,!1,null,"7a05c266",null);e["default"]=m.exports},f1ba:function(t,e,a){t.exports=a.p+"img/sum.a2f21be4.svg"},f312:function(t,e,a){t.exports=a.p+"img/tog_13.5711bcbb.svg"},fb2b:function(t,e,a){t.exports=a.p+"img/comparison.389bdb0c.svg"},fb970:function(t,e,a){t.exports=a.p+"img/right.b843a32f.svg"}}]);