(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f669b78"],{"0636":function(t,e,n){t.exports=n.p+"img/tog_15.1f7bb44b.svg"},"0768":function(t,e,n){t.exports=n.p+"img/tog_17.6d3efb0a.svg"},"07cb":function(t,e,n){t.exports=n.p+"img/tog_12.eb4b8e89.svg"},"0a8a":function(t,e,n){t.exports=n.p+"img/tog_41.e54c1e63.svg"},"0c74":function(t,e,n){t.exports=n.p+"img/tog_9.63ff7127.svg"},"11f9":function(t,e,n){t.exports=n.p+"img/finish.c82022e3.svg"},"138d":function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return p}));var s=n("c7eb"),i=n("1da1"),r=(n("caad"),n("14d9"),n("e9c4"),n("b64b"),n("d3b7"),n("2532"),n("159b"),n("1450")),o=n("262e"),a="wiki_my_roles";function c(){return u.apply(this,arguments)}function u(){return u=Object(i["a"])(Object(s["a"])().mark((function t(){var e,n,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=function(){return n=Object(i["a"])(Object(s["a"])().mark((function t(){var e,n,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])();case 2:return i=t.sent,o=(null===(e=i.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.list)||[],sessionStorage.setItem(a,JSON.stringify(o||[])),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)},e=function(){return n.apply(this,arguments)},o=[],!sessionStorage.getItem(a)){t.next=7;break}o=JSON.parse(sessionStorage.getItem(a)),t.next=10;break;case 7:return t.next=9,e();case 9:o=t.sent;case 10:return t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function l(t){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(Object(s["a"])().mark((function t(e){var n,i,r,a,c,u,l,g;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["m"])(e);case 2:return u=t.sent,l=!(null===(n=u.data)||void 0===n||null===(i=n.data)||void 0===i||!i.jx3id),g=null===(r=(null===(a=u.data)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.achievements)||"")||void 0===r?void 0:r.split(","),t.abrupt("return",{isSync:l,list:g});case 6:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}var f="wiki_achievement_points";function v(t){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(Object(s["a"])().mark((function t(e){var n,i,r,a,c,u,l,g;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["i"])({general:1,client:e||"std"});case 2:return c=t.sent,t.next=5,Object(o["b"])();case 5:return u=t.sent,l=(null===(n=c.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.menus)||[],g=(null===(r=u.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.points)||[],sessionStorage.setItem(f,JSON.stringify(g||[])),t.abrupt("return",{menuList:l,pointsList:g});case 10:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{allPoints:0,ownPoints:0},r=[];try{r=JSON.parse(sessionStorage.getItem(f))}catch(o){}return t.achievements.forEach((function(t){Array.isArray(t)?t.forEach((function(t){r[t]&&(i.allPoints+=r[t],n.push(t),e.includes(String(t))&&(i.ownPoints+=r[t],s.push(t)))})):r[t]&&(i.allPoints+=r[t],n.push(t),e.includes(String(t))&&(i.ownPoints+=r[t],s.push(t)))})),t.children&&t.children.forEach((function(t){p(t,e,n,s,i)})),{allAchievements:n,allPoints:i.allPoints,ownAchievements:s,ownPoints:i.ownPoints}}},"13d5":function(t,e,n){"use strict";var s=n("23e7"),i=n("d58f").left,r=n("a640"),o=n("1212"),a=n("9adc"),c=!a&&o>79&&o<83,u=c||!r("reduce");s({target:"Array",proto:!0,forced:u},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},1450:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var s=n("41cb"),i=function(){return Object(s["f"])().get("api/team/my-game-roles?nopage&custom=0")}},"1aa3":function(t,e,n){t.exports=n.p+"img/tog_2.8ae213ab.svg"},"1b89":function(t,e,n){t.exports=n.p+"img/tog_17.5c8b5a5e.svg"},"1d4a":function(t,e,n){var s={"./Dark/improvement.svg":"6886","./Light/improvement.svg":"ac01"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="1d4a"},2372:function(t,e,n){t.exports=n.p+"img/tog_7.d065990e.svg"},2681:function(t,e,n){t.exports=n.p+"img/tog_6.fd7052b7.svg"},"27aa":function(t,e,n){t.exports=n.p+"img/tog_41.867bbf38.svg"},"2b7a":function(t,e,n){t.exports=n.p+"img/unfinished.e9a234a5.svg"},"2cfb":function(t,e,n){t.exports=n.p+"img/tog_13.741ac369.svg"},"33a5":function(t){t.exports=JSON.parse('{"0":"江湖","1":"天策","2":"万花","3":"纯阳","4":"七秀","5":"少林","6":"藏剑","7":"丐帮","8":"明教","9":"五毒","10":"唐门","18":"苍云","19":"长歌","20":"霸刀","21":"蓬莱","22":"凌雪","23":"衍天","24":"药宗","26":"刀宗","29":"万灵","38":"段氏","39":"无相"}')},3822:function(t,e,n){t.exports=n.p+"img/tog_4.ae3c48b4.svg"},3835:function(t,e,n){"use strict";function s(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d28b"),n("14d9"),n("d3b7"),n("3ca3"),n("ddb0");function i(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,r,o,a=[],c=!0,u=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=r.call(n)).done)&&(a.push(s.value),a.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(u)throw i}}return a}}var r=n("06c5");n("d9e2");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){return s(t)||i(t,e)||Object(r["a"])(t,e)||o()}},"3a30":function(t,e,n){t.exports=n.p+"img/search_black.8d2ab45b.svg"},"3ba9":function(t,e,n){var s={"./Dark/comparison.svg":"c5bf","./Dark/count.svg":"ac83","./Dark/improvement.svg":"6886","./Dark/jia.svg":"7bad","./Dark/quan.svg":"d3fa","./Dark/right.svg":"fb970","./Dark/search.svg":"dfcb","./Dark/shaixuan.svg":"ea5b","./Dark/sum.svg":"7176","./Dark/tog_1.svg":"7a8e","./Dark/tog_10.svg":"852b","./Dark/tog_11.svg":"8029","./Dark/tog_12.svg":"984b","./Dark/tog_13.svg":"2cfb","./Dark/tog_15.svg":"9ca0","./Dark/tog_16.svg":"be26","./Dark/tog_17.svg":"0768","./Dark/tog_2.svg":"1aa3","./Dark/tog_3.svg":"bbdc","./Dark/tog_4.svg":"484b","./Dark/tog_40.svg":"fc87","./Dark/tog_41.svg":"27aa","./Dark/tog_5.svg":"d1be","./Dark/tog_6.svg":"2681","./Dark/tog_7.svg":"b4e8","./Dark/tog_8.svg":"d1e9","./Dark/tog_9.svg":"45e1","./Light/comparison.svg":"fb2b","./Light/count.svg":"8fe4","./Light/improvement.svg":"ac01","./Light/jia.svg":"e51b","./Light/quan.svg":"a8cd","./Light/right.svg":"5904","./Light/search.svg":"9bd5","./Light/shaixuan.svg":"a106","./Light/sum.svg":"f1ba","./Light/tog_1.svg":"680e","./Light/tog_10.svg":"88a5","./Light/tog_11.svg":"4828","./Light/tog_12.svg":"07cb","./Light/tog_13.svg":"f312","./Light/tog_15.svg":"0636","./Light/tog_16.svg":"d168","./Light/tog_17.svg":"1b89","./Light/tog_2.svg":"63ee","./Light/tog_3.svg":"8c41","./Light/tog_4.svg":"3822","./Light/tog_40.svg":"45f1","./Light/tog_41.svg":"0a8a","./Light/tog_5.svg":"a299","./Light/tog_6.svg":"9edd","./Light/tog_7.svg":"2372","./Light/tog_8.svg":"4ead","./Light/tog_9.svg":"0c74","./finish.svg":"11f9","./search_black.svg":"3a30","./unfinished.svg":"2b7a","./warning.svg":"5720"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="3ba9"},"45e1":function(t,e,n){t.exports=n.p+"img/tog_9.b91da4f4.svg"},"45f1":function(t,e,n){t.exports=n.p+"img/tog_40.8f4e8cc1.svg"},"478d":function(t,e,n){},4828:function(t,e,n){t.exports=n.p+"img/tog_11.57cbcc0f.svg"},"484b":function(t,e,n){t.exports=n.p+"img/tog_4.cc4bee1c.svg"},"4ead":function(t,e,n){t.exports=n.p+"img/tog_8.bc15415d.svg"},"4eaf":function(t,e,n){var s={"./Dark/count.svg":"ac83","./Light/count.svg":"8fe4"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="4eaf"},5720:function(t,e,n){t.exports=n.p+"img/warning.c59d3be8.svg"},5904:function(t,e,n){t.exports=n.p+"img/right.258873ca.svg"},"63ee":function(t,e,n){t.exports=n.p+"img/tog_2.6d3d6ed7.svg"},"680e":function(t,e,n){t.exports=n.p+"img/tog_1.93447118.svg"},6886:function(t,e,n){t.exports=n.p+"img/improvement.c17a031c.svg"},"700f":function(t,e,n){var s={"./Dark/right.svg":"fb970","./Light/right.svg":"5904"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="700f"},7176:function(t,e,n){t.exports=n.p+"img/sum.2d38a1fd.svg"},"7a8e":function(t,e,n){t.exports=n.p+"img/tog_1.ee8ab329.svg"},"7bad":function(t,e,n){t.exports=n.p+"img/jia.a4ed607e.svg"},8029:function(t,e,n){t.exports=n.p+"img/tog_11.fe0a7d76.svg"},"852b":function(t,e,n){t.exports=n.p+"img/tog_10.2f0ed734.svg"},"88a5":function(t,e,n){t.exports=n.p+"img/tog_10.4bea69ad.svg"},"8c41":function(t,e,n){t.exports=n.p+"img/tog_3.e4ec62c3.svg"},"8fe4":function(t,e,n){t.exports=n.p+"img/count.6033f8f4.svg"},"984b":function(t,e,n){t.exports=n.p+"img/tog_12.f3a07dcf.svg"},"9a1b":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var s=n("41cb");function i(){return Object(s["a"])().get("/api/cms/user/my/info").then((function(t){return t.data.data}))}function r(t){return Object(s["a"])().post("/api/cms/system/common/reporter")}},"9bd5":function(t,e,n){t.exports=n.p+"img/search.781ce470.svg"},"9ca0":function(t,e,n){t.exports=n.p+"img/tog_15.2b6a6cf7.svg"},"9edd":function(t,e,n){t.exports=n.p+"img/tog_6.19bcab65.svg"},a01f:function(t,e,n){"use strict";var s=function(){var t=this,e=t._self._c;return e("img",{attrs:{src:t.showAvatar(t.mount,t.body_type)}})},i=[],r=n("01ea"),o={name:"roleAvatar",props:["mount","body_type"],components:{},data:function(){return{}},computed:{},methods:{showAvatar:function(t,e){return r["c"]+"design/avatar/xisai/"+t+"-"+e+".png"}},filters:{},created:function(){},mounted:function(){}},a=o,c=n("2877"),u=Object(c["a"])(a,s,i,!1,null,null,null);e["a"]=u.exports},a299:function(t,e,n){t.exports=n.p+"img/tog_5.b1775791.svg"},a8cd:function(t,e,n){t.exports=n.p+"img/quan.b9b6f7b4.svg"},ac01:function(t,e,n){t.exports=n.p+"img/improvement.5709fa8f.svg"},ac83:function(t,e,n){t.exports=n.p+"img/count.e9081d68.svg"},b4e8:function(t,e,n){t.exports=n.p+"img/tog_7.0dea2d20.svg"},bbdc:function(t,e,n){t.exports=n.p+"img/tog_3.a580ed01.svg"},bc1f:function(t,e,n){"use strict";n("478d")},be23:function(t,e,n){},be26:function(t,e,n){t.exports=n.p+"img/tog_16.ffa7d0d0.svg"},c5bf:function(t,e,n){t.exports=n.p+"img/comparison.dfcc1cad.svg"},c70e:function(t,e,n){var s={"./Dark/comparison.svg":"c5bf","./Light/comparison.svg":"fb2b"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="c70e"},c93f:function(t,e,n){"use strict";n("be23")},d168:function(t,e,n){t.exports=n.p+"img/tog_16.7901e7f6.svg"},d1be:function(t,e,n){t.exports=n.p+"img/tog_5.40c9a70c.svg"},d1e9:function(t,e,n){t.exports=n.p+"img/tog_8.df78604c.svg"},d3fa:function(t,e,n){t.exports=n.p+"img/quan.f7959a84.svg"},d58f:function(t,e,n){"use strict";var s=n("59ed"),i=n("7b0b"),r=n("44ad"),o=n("07fa"),a=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(e,n,u,l){var g=i(e),f=r(g),v=o(g);if(s(n),0===v&&u<2)throw new a(c);var d=t?v-1:0,p=t?-1:1;if(u<2)while(1){if(d in f){l=f[d],d+=p;break}if(d+=p,t?d<0:v<=d)throw new a(c)}for(;t?d>=0:v>d;d+=p)d in f&&(l=n(l,f[d],d,g));return l}};t.exports={left:u(!1),right:u(!0)}},dfcb:function(t,e,n){t.exports=n.p+"img/search.4918b175.svg"},e00d:function(t,e,n){var s={"./Dark/sum.svg":"7176","./Light/sum.svg":"f1ba"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="e00d"},e256:function(t,e,n){"use strict";n.r(e);n("b0c0"),n("4c53");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mini-program-overview"},[e("div",{staticClass:"user-info-section"},[e("div",{staticClass:"avatar-container"},[e("div",{staticClass:"avatar-bg"},[t.avatar_frame?e("img",{staticClass:"u-avatar-border",attrs:{src:t.avatar_frame,alt:"头像边框"}}):t._e(),e("RoleAvatar",{staticClass:"u-avatar-img",attrs:{mount:t.currentRole.mount,body_type:t.currentRole.body_type}})],1)]),e("div",{staticClass:"user-name",on:{click:t.openRoleDrawer}},[t._v(t._s(t.currentRole.name))]),e("div",{staticClass:"user-detail"},[e("img",{staticClass:"hb-icon",attrs:{width:"30",height:"30",src:t.mpAvatar}}),e("span",[t._v(" "+t._s(t.xfName)+" ")]),e("span",[t._v(" "+t._s(t.currentRole.server)+" ")])])]),e("div",{staticClass:"total-progress"},[e("div",{staticClass:"progress-info"},[e("span",{staticClass:"progress-percentage"},[t._v(t._s(t.totalProgress)),e("span",[t._v("%")])]),e("span",{staticClass:"progress-value"},[t._v(" "+t._s(t.ownPointsCountW)),e("span",[t._v(t._s(t.ownPointsCountOther))])])]),e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"progress-fill",style:{width:t.totalProgress+"%"}})])]),e("div",{staticClass:"friend-comparison"},[e("div",{staticClass:"section-title"},[e("div",{staticClass:"title-content",on:{click:function(e){return t.handleClickBtn("friendComparison")}}},[e("img",{staticClass:"u-icon-left",attrs:{height:"24",src:n("c70e")("./".concat(t.isDark?"Dark":"Light","/comparison.svg"))}}),t._v(" 亲友对比 ")]),e("img",{staticClass:"u-icon-right",attrs:{height:"14",src:n("700f")("./".concat(t.isDark?"Dark":"Light","/right.svg"))}})]),e("div",{staticClass:"section-title disabled"},[e("div",{staticClass:"title-content"},[e("img",{staticClass:"u-icon-left",attrs:{height:"24",src:n("1d4a")("./".concat(t.isDark?"Dark":"Light","/improvement.svg"))}}),t._v(" 渡劫方案 ")]),e("img",{staticClass:"u-icon-right",attrs:{height:"14",src:n("700f")("./".concat(t.isDark?"Dark":"Light","/right.svg"))}})])]),e("div",{staticClass:"progress-overview"},[t._m(0),e("div",{staticClass:"category-progress"},t._l(t.list,(function(s,i){return e("div",{key:i,staticClass:"progress-card",on:{click:function(e){return t.handleClick(s)}}},[e("div",{staticClass:"u-top-detailed"},[e("div",{staticClass:"u-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"progress-bar-small"},[e("div",{staticClass:"progress-fill",style:{width:t.getCurrentProgress(s.ownPoints,s.allPoints)+"%"}})]),e("div",{staticClass:"progress-percentage-small"},[t._v(" "+t._s(t.getCurrentProgress(s.ownPoints,s.allPoints))+"% ")]),e("div",{staticClass:"u-info"},[e("div",{staticClass:"u-num"},[e("img",{attrs:{width:"14",height:"14",src:n("4eaf")("./".concat(t.isDark?"Dark":"Light","/count.svg")),alt:"成就logo"}}),t._v(" "+t._s(s.ownAchievements.length)+"/"+t._s(s.allAchievements.length)+" ")]),e("div",{staticClass:"u-num"},[e("img",{attrs:{width:"14",height:"14",src:n("e00d")("./".concat(t.isDark?"Dark":"Light","/sum.svg")),alt:"资历logo"}}),t._v(" "+t._s(s.ownPoints)+"/"+t._s(s.allPoints)+" ")])])]),e("div",{staticClass:"u-icon"},[e("img",{staticClass:"hb-icon",attrs:{src:t.getIconPath(s.sub),alt:"","svg-inline":""}})])])})),0)]),e("RoleListVue",{attrs:{visible:t.drawerVisible,roles:t.roleList,currentRole:t.currentRole},on:{"update:visible":function(e){t.drawerVisible=e},confirmSelection:t.handleConfirmSelection}})],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-header"},[e("div",{staticClass:"section-title"},[t._v("进度概览")])])}],r=n("c7eb"),o=n("1da1"),a=(n("99af"),n("d81d"),n("14d9"),n("13d5"),n("fb6a"),n("b680"),n("b64b"),n("d3b7"),n("25f0"),n("c9d2")),c=n("85e4"),u=n("33a5"),l=n("9a1b"),g=n("01ea"),f=n("65c2"),v=n("a01f"),d=function(){var t=this,e=t._self._c;return e("el-drawer",{staticClass:"c-role-list-drawer",attrs:{title:"选择角色",visible:t.drawerVisible,direction:"btt",size:"420px"},on:{close:t.handleClose}},[e("div",{staticClass:"role-list-wrapper"},[e("div",{ref:"roleListContainer",staticClass:"role-list-container"},[e("div",{staticClass:"role-items"},t._l(t.roles,(function(n,s){return e("div",{key:s,staticClass:"role-item",class:{selected:t.selectedRole.jx3id==n.jx3id},on:{click:function(e){return t.selectRole(n)}}},[e("div",{staticClass:"u-img"},[e("RoleAvatar",{staticClass:"u-avatar-img",attrs:{mount:n.mount,body_type:n.body_type}}),e("div",{staticClass:"role-name"},[t._v(t._s(n.name))])],1),e("div",{staticClass:"role-info",domProps:{innerHTML:t._s("<".concat(n.server,">"))}})])})),0)]),e("div",{staticClass:"role-button-group"},[e("el-button",{staticClass:"u-reset",on:{click:t.resetSelection}},[t._v("重置")]),e("el-button",{staticClass:"u-submit",on:{click:t.confirmSelection}},[t._v("确定")])],1),t.showMask?e("div",{staticClass:"bottom-mask"}):t._e()])])},p=[],h={name:"RoleList",components:{RoleAvatar:v["a"]},props:{visible:{type:Boolean,default:!1},roles:{type:Array,default:function(){return[]}},currentRole:{type:Object,default:function(){return{}}}},computed:{drawerVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{selectedRole:null,showMask:!1}},watch:{drawerVisible:function(t){var e=this;t?this.$nextTick((function(){e.$refs.roleListContainer&&(e.$refs.roleListContainer.addEventListener("scroll",e.checkScrollPosition),e.checkScrollPosition())})):this.removeScrollListener()},currentRole:{handler:function(t){t&&(this.selectedRole=t)},deep:!0,immediate:!0}},beforeDestroy:function(){this.removeScrollListener()},methods:{showSchoolIcon:c["s"],removeScrollListener:function(){this.$refs.roleListContainer&&this.$refs.roleListContainer.removeEventListener("scroll",this.checkScrollPosition)},selectRole:function(t){this.selectedRole=t},resetSelection:function(){this.selectedRole=this.currentRole},confirmSelection:function(){null!==this.selectedRole&&(this.$emit("confirmSelection",this.selectedRole),this.drawerVisible=!1)},handleClose:function(){this.drawerVisible=!1},checkScrollPosition:function(){if(this.$refs.roleListContainer){var t=this.$refs.roleListContainer,e=t.scrollHeight,n=t.clientHeight,s=t.scrollTop,i=e-(n+s);this.showMask=i>40}}}},m=h,b=(n("bc1f"),n("2877")),_=Object(b["a"])(m,d,p,!1,null,null,null),w=_.exports,x=n("7720"),k=n("138d"),C={name:"OverviewMiniProgram",components:{RoleAvatar:v["a"],RoleListVue:w},data:function(){return{userInfo:{},roleList:[],currentRole:{},drawerVisible:!1,menuList:[],pointsData:{},list:[],allPointsCount:0,ownPointsCount:0,ownPointsCountW:null,ownPointsCountOther:0}},computed:{isDark:function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return t.matches},avatar_frame:function(){if(this.userInfo){var t=this.userInfo.user_avatar_frame;if(t)return g["e"]+"avatar/images/".concat(t,"/").concat(t,".svg")}return null},totalProgress:function(){return this.ownPointsCount||this.allPointsCount?(this.ownPointsCount/this.allPointsCount*100).toFixed(2):0},xfName:function(){return this.currentRole.mount&&u[this.currentRole.mount]||""},mpAvatar:function(){return this.currentRole.mount?f["__cdn"]+"design/vector/school/".concat(this.currentRole.mount,".svg"):null}},watch:{currentRole:{deep:!0,handler:function(t){if(t){var e=t.jx3id;e&&this.loadRoleAchievements(e)}}}},created:function(){document.title="资历宝典",this.getUserInfo()},methods:{showSchoolIcon:c["s"],handleClickBtn:function(t){"friendComparison"===t&&this.$router.push({name:"compare",query:{}})},handleClick:function(t){console.log(t),Object(x["b"])(this.$router.resolve({name:"catalogue",query:{menuId:t.sub,jx3id:this.currentRole.jx3id}}).href)},getIconPath:function(t){return n("3ba9")("./".concat(this.isDark?"Dark":"Light","/tog_").concat(t,".svg"))},getCurrentProgress:function(t,e){return(t/e*100).toFixed(2)},getUserInfo:function(){var t=this;a["a"].isLogin()?Object(l["a"])().then((function(e){t.userInfo=e,t.init()})):this.$confirm("请先登录再使用")},init:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["b"])(t.$store.state.client);case 2:return n=e.sent,t.menuList=n.menuList||[],t.pointsData=n.pointsList||[],e.next=7,Object(k["d"])();case 7:t.roleList=e.sent,t.roleList.length&&(t.currentRole=t.roleList[0]);case 9:case"end":return e.stop()}}),e)})))()},loadRoleAchievements:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function n(){var s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(k["c"])(t);case 2:s=n.sent,e.isSync=s.isSync,e.currentRole.achievements=s.list||[],e.getRenderList();case 6:case"end":return n.stop()}}),n)})))()},openRoleDrawer:function(){this.drawerVisible=!0},handleConfirmSelection:function(t){this.currentRole=t,this.drawerVisible=!1},getRenderList:function(){var t=this,e=this.menuList||[],n=this.currentRole.achievements||[],s=Object.keys(e).map((function(t){var s=e[t],i=Object(k["a"])(s,n);return{sub:s.sub,detail:s.detail,name:s.name,allAchievements:i.allAchievements,ownAchievements:i.ownAchievements,children:s.children,allPoints:i.allPoints,ownPoints:i.ownPoints}}));this.list=s,this.allPointsCount=s.reduce((function(t,e){return t+e.allPoints}),0),this.ownPointsCount=n.reduce((function(e,n){return e+(t.pointsData[n]||0)}),0);var i=this.ownPointsCount.toString();i.length>4?(this.ownPointsCountW=i.slice(0,-4),this.ownPointsCountOther=i.slice(-4)):(this.ownPointsCountW="",this.ownPointsCountOther=i)}}},L=C,y=(n("c93f"),Object(b["a"])(L,s,i,!1,null,null,null));e["default"]=y.exports},e51b:function(t,e,n){t.exports=n.p+"img/jia.748a1596.svg"},f1ba:function(t,e,n){t.exports=n.p+"img/sum.a2f21be4.svg"},f312:function(t,e,n){t.exports=n.p+"img/tog_13.5711bcbb.svg"},fb2b:function(t,e,n){t.exports=n.p+"img/comparison.389bdb0c.svg"},fb970:function(t,e,n){t.exports=n.p+"img/right.b843a32f.svg"},fc87:function(t,e,n){t.exports=n.p+"img/tog_40.ef7c5acf.svg"}}]);