(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1ce6820"],{"480c":function(t,s,e){},"500d":function(t,s,e){"use strict";e.d(s,"a",(function(){return o})),e.d(s,"b",(function(){return n}));var i=e("41cb");const a=(t,s)=>Object(i["d"])().get("/pet/"+t,{params:s}),c=location.href.includes("origin")?"origin":"std",o={latest({type:t},s){return Object(i["a"])().get("/api/cms/wiki/post/latest",{params:{client:c,...s,type:t}})},mine(t){return Object(i["a"])().get("/api/cms/wiki/post/mine",{params:t})},counter({type:t},s){return Object(i["a"])().get("/api/cms/wiki/post/counter",{params:{client:c,...s,type:t}})},achievements(t){return Object(i["d"])().get("/achievement/list",{params:{client:c,...t}})},get({type:t,id:s},e){return Object(i["a"])().get(`/api/cms/wiki/post/type/${t}/source/${s}`,{params:{client:c,...e}})},getById(t){return Object(i["a"])().get("/api/cms/wiki/post/id/"+t)},post(t){return Object(i["a"])().post("/api/cms/wiki/post",t)},update(t,s){return Object(i["a"])().put("/api/cms/wiki/post/"+t,s)},remove(t){return Object(i["a"])().delete("/api/cms/wiki/post/"+t)},versions({type:t,id:s},e){return Object(i["a"])().get(`/api/cms/wiki/post/type/${t}/source/${s}/versions`,{params:{client:c,...e}})},async handleMix(t,s,e,i){let a="",c="",o=!0,n=!1,r=[];if("std"===e){const l=await this.get({type:t,id:s},{client:e,...i});return a=l.data.data.post,c=l.data.data.source,r=l.data.data.users,a&&(o=!1),console.log("获取旗舰攻略"),{post:a,source:c,isEmpty:o,compatible:n,type:t,source_id:s,users:r}}{const l=await this.get({type:t,id:s},{client:e,...i});c=l.data.data.source,a=l.data.data.post,r=l.data.data.users,a&&(o=!1),console.log("获取缘起攻略");const u=!!l.data.data.post;return u?{post:a,source:c,isEmpty:o,compatible:n,type:t,source_id:s,users:r}:(console.log("兼容：获取旗舰攻略"),this.get({type:t,id:s},{client:"std",...i}).then(e=>(a=e.data.data.post,c||(c=e.data.data.source),a&&(o=!1),r=e.data.data.users,n=!0,{post:a,source:c,isEmpty:o,compatible:n,type:t,source_id:s,users:r})))}},async mix({type:t,id:s,client:e},i){let c="",o="";if(c="cj"===t?"achievement":"pet"===t?"item":t||"achievement",s){if(o=s,"pet"===t){const t=await a(s,{client:e});let o=t.data,n=o.ItemTabType+"_"+o.ItemTabIndex;return this.handleMix(c,n,e,i)}return this.handleMix(c,o,e,i)}}},n={list({type:t,id:s},e){return Object(i["a"])().get("/api/cms/wiki/comment",{params:{...e,type:t,source_id:s}})},post(t){return Object(i["a"])().post("/api/cms/wiki/comment",t)},delete(t){return Object(i["a"])().delete("/api/cms/wiki/comment/"+t)},myList(t){return Object(i["a"])().get("/api/cms/wiki/comment/mine",{params:t})}}},"6d98":function(t,s,e){},8812:function(t,s,e){"use strict";e("6d98")},ac85:function(t,s,e){"use strict";e("480c")},d2a1:function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"c-wiki-panel",class:{"border-none":t.borderNone,"m-detail-scene":t.wikiPost||"detail"===t.scene}},[s("div",{staticClass:"m-panel-head"},[t._t("head-before"),s("div",{staticClass:"m-panel-actions"},[t.wikiPost&&t.showQR?s("QRcode",{staticClass:"u-qr"}):t._e(),t._t("head-actions")],2),s("div",{staticClass:"m-panel-title"},[t._t("head-title")],2),t._t("head-after")],2),s("div",{staticClass:"m-panel-body"},[t._t("body-before"),t._t("meta",(function(){return[t.wikiPost&&t.wikiPost.post?s("div",{staticClass:"m-wiki-metas"},[t.wikiPost.users&&t.wikiPost.users.length?s("div",{staticClass:"u-meta"},[s("em",{staticClass:"u-label"},[t._v("参与贡献")]),t._l(t.wikiPost.users,(function(e,i){return s("a",{key:i,staticClass:"u-value u-creator",attrs:{target:"_blank",href:e.id?t.author_url(e.id):null}},[s("img",{attrs:{src:t.thumbnail_url(e.avatar),alt:e.nickname,title:e.nickname}})])}))],2):t._e(),t.wikiPost.post&&t.wikiPost.post.level?s("div",{staticClass:"u-meta"},[s("em",{staticClass:"u-label"},[t._v("综合难度")]),s("span",{staticClass:"u-value"},t._l(t.wikiPost.post.level,(function(t){return s("i",{key:t,staticClass:"el-icon-star-on"})})),0)]):t._e(),t.stat?s("div",{staticClass:"u-meta"},[s("em",{staticClass:"u-label"},[t._v("热度")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.stat.views)}})]):t._e(),t.wikiPost.post&&t.wikiPost.post.updated?s("div",{staticClass:"u-meta"},[s("em",{staticClass:"u-label"},[t._v("更新时间")]),s("span",{staticClass:"u-value",domProps:{textContent:t._s(t.ts2str(t.wikiPost.post.updated))}})]):t._e()]):t._e()]})),t._t("body"),t._t("body-after")],2),s("design-task",{attrs:{post:t.currentPost},model:{value:t.showDesignTask,callback:function(s){t.showDesignTask=s},expression:"showDesignTask"}})],1)},a=[],c=e("5530"),o=(e("2ef0"),function(){var t=this,s=t._self._c;return"cms"==t.mode?s("div",{staticClass:"w-qrcode",class:{on:t.active},on:{click:t.togglePic}},[s("svg",{class:"u-icon",attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[s("path",{attrs:{d:"M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zM127 482H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zM497 370c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z"}})]),s("span",{staticClass:"u-text"},[t._v("二维码")]),s("div",{staticClass:"u-qrcode"},[s("qrcode-vue",{staticClass:"u-pic",attrs:{value:t.value,size:t.size,level:"H"}}),s("span",[t._v("扫一扫即可访问")])],1)]):"static"==t.mode?s("div",{staticClass:"w-qrcode-static"},[s("div",{staticClass:"u-qrcode"},[s("qrcode-vue",{staticClass:"u-pic",attrs:{value:t.value,size:t.size,level:"H"}}),s("span",{staticClass:"u-txt"},[s("svg",{class:"u-icon",attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[s("path",{attrs:{d:"M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zM127 482H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zM497 370c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z"}})]),t._v("扫一扫手机访问")])],1)]):t._e()}),n=[],r=e("d7b0"),l={name:"QRcode",props:["href","v","s"],data:function(){return{value:this.href||location.href,size:this.s||100,active:!1,mode:this.v||"cms"}},computed:{},methods:{togglePic:function(t){t.stopPropagation(),this.active=!this.active}},mounted:function(){var t=this;document.addEventListener("click",(function(){t.active=!1}))},components:{QrcodeVue:r["a"]}},u=l,d=(e("ac85"),e("2877")),p=Object(d["a"])(u,o,n,!1,null,null,null),v=p.exports,h=e("85e4"),m=e("9616"),w=e("7d14"),k=(e("500d"),e("c9d2")),b={name:"WikiPost",props:{wikiPost:{type:[Object,String],default:null},scene:{type:String,default:"default"},borderNone:{type:Boolean,default:!1},showQR:{type:Boolean,default:!0}},data:function(){return{stat:null,showDesignTask:!1,currentPost:{},isEditor:k["a"].isEditor()}},watch:{wikiPost:{immediate:!0,handler:function(){var t=this;if(this.wikiPost&&this.wikiPost.type&&this.wikiPost.source_id){var s=this.wikiPost.type;"achievement"===s&&(s="cj"),Object(m["a"])(s,this.wikiPost.source_id).then((function(s){200===s.status&&(t.stat=s.data)}))}}}},methods:{author_url:h["a"],ts2str:h["s"],thumbnail_url:function(t){return Object(h["q"])(t)},onPush:function(){var t,s,e,i,a,o,n;this.showDesignTask=!0,this.currentPost=Object(c["a"])(Object(c["a"])({},(null===(t=this.wikiPost)||void 0===t?void 0:t.post)||{}),{},{post_title:null===(s=this.wikiPost)||void 0===s||null===(e=s.post)||void 0===e?void 0:e.title,post_type:null===(i=this.wikiPost)||void 0===i||null===(a=i.post)||void 0===a?void 0:a.type,ID:null===(o=this.wikiPost)||void 0===o||null===(n=o.post)||void 0===n?void 0:n.source_id})}},components:{QRcode:v,DesignTask:w["a"]},mounted:function(){}},C=b,f=(e("8812"),Object(d["a"])(C,i,a,!1,null,null,null));s["a"]=f.exports}}]);
//# sourceMappingURL=chunk-b1ce6820.f13fcee8.js.map