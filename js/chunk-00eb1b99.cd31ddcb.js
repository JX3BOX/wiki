(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00eb1b99"],{"0577":function(t,e,n){t.exports=n.p+"img/武学.5c424609.png"},"0fc5":function(t,e,n){t.exports=n.p+"img/帮会.25e60701.png"},1282:function(t,e,n){t.exports=n.p+"img/活动.ac36974e.png"},"13df":function(t,e,n){t.exports=n.p+"img/技艺.f15bcb66.png"},1450:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("41cb"),s=function(){return Object(i["f"])().get("api/team/my-game-roles?nopage&custom=0")}},1903:function(t,e,n){t.exports=n.p+"img/武学.140dc6db.png"},2053:function(t,e,n){t.exports=n.p+"img/cj-logo.c38b6034.svg"},"279b":function(t,e,n){t.exports=n.p+"img/节日.fff93f54.png"},"32ee":function(t,e,n){t.exports=n.p+"img/任务.3e15bb56.png"},3527:function(t,e,n){t.exports=n.p+"img/家园.47ba9f37.png"},"400a":function(t,e,n){t.exports=n.p+"img/修为.15e120bf.png"},"401b":function(t,e,n){t.exports=n.p+"img/声望.892c43ed.png"},4163:function(t,e,n){t.exports=n.p+"img/足迹.d9886016.png"},4750:function(t,e,n){t.exports=n.p+"img/zl-logo.3af9eb6b.svg"},"498a":function(t,e,n){"use strict";var i=n("23e7"),s=n("58a8").trim,o=n("c8d2");i({target:"String",proto:!0,forced:o("trim")},{trim:function(){return s(this)}})},"4b0c":function(t,e,n){t.exports=n.p+"img/足迹.4c589e91.png"},"4b35":function(t,e,n){t.exports=n.p+"img/杂闻.93f53fe0.png"},"4c53":function(t,e,n){"use strict";var i=n("23e7"),s=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("sub")},{sub:function(){return s(this,"sub","","")}})},"4d2e":function(t,e,n){t.exports=n.p+"img/战斗.697ed8fc.png"},"57f0":function(t,e,n){t.exports=n.p+"img/阅读.b10280d0.png"},"5f28":function(t,e,n){t.exports=n.p+"img/杂闻.350b5781.png"},"783d":function(t,e,n){t.exports=n.p+"img/秘境.72a09a32.png"},8037:function(t,e,n){t.exports=n.p+"img/家园.72ca69d6.png"},8877:function(t,e,n){t.exports=n.p+"img/阅读.1357b5fe.png"},"88c0":function(t,e,n){t.exports=n.p+"img/阵营.a0c11640.png"},"8b45":function(t,e,n){"use strict";n("99ea")},9897:function(t,e,n){t.exports=n.p+"img/阵营.daa099b0.png"},"99ea":function(t,e,n){},"9e93":function(t,e,n){t.exports=n.p+"img/风雨江湖路.9477f04f.png"},a1a0:function(t,e,n){t.exports=n.p+"img/节日.dc2e010b.png"},a286:function(t,e,n){t.exports=n.p+"img/声望.dc23defe.png"},a298:function(t,e,n){t.exports=n.p+"img/item-left-border.592d42e7.svg"},a424:function(t,e,n){t.exports=n.p+"img/任务.241c1e56.png"},a849:function(t,e,n){t.exports=n.p+"img/装备.36bece2f.png"},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("d9e2"),n("d3b7"),n("3ca3"),n("ddb0");var i=n("06c5");function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(i["a"])(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(c)throw a}}}}},c8d2:function(t,e,n){"use strict";var i=n("5e77").PROPER,s=n("d039"),o=n("5899"),a="​᠎";t.exports=function(t){return s((function(){return!!o[t]()||a[t]()!==a||i&&o[t].name!==t}))}},c967:function(t,e,n){"use strict";n.d(e,"j",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"k",(function(){return m})),n.d(e,"b",(function(){return v})),n.d(e,"i",(function(){return p}));var i=n("41cb");function s(t){return Object(i["a"])().get("/api/cms/wiki/post/rank",{params:t})}function o(t,e){return Object(i["a"])().get("/api/cms/wiki/post/id/".concat(t),{params:e})}function a(t){return Object(i["a"])({mute:!0}).get("/api/cms/user/".concat(t,"/info"))}function r(t){return Object(i["a"])().get("/api/cms/user/kith/my")}function c(t){return Object(i["a"])().get("/api/cms/user/kith/game-roles/".concat(t))}function l(t){return Object(i["a"])().get("/api/cms/pvx/wiki_achievement_leap_schema",{params:t})}function u(t){return Object(i["a"])().post("/api/cms/pvx/wiki_achievement_leap_schema",t)}function d(t){return Object(i["a"])().get("/api/cms/pvx/wiki_achievement_leap_schema/".concat(t))}function m(t,e){return Object(i["a"])().put("/api/cms/pvx/wiki_achievement_leap_schema/".concat(t),e)}function v(t){return Object(i["a"])().delete("/api/cms/pvx/wiki_achievement_leap_schema/".concat(t))}function p(t){return Object(i["a"])().post("/api/cms/pvx/wiki_achievement_difficulty/list",t)}},ce68:function(t,e,n){t.exports=n.p+"img/修为.ec1eab72.png"},cea3:function(t,e,n){t.exports=n.p+"img/装备.177b9e09.png"},d110:function(t,e,n){var i={"./任务.png":"32ee","./修为.png":"ce68","./剑侠录.png":"f972","./声望.png":"a286","./家园.png":"3527","./帮会.png":"0fc5","./战斗.png":"4d2e","./技艺.png":"e0e1","./杂闻.png":"5f28","./武学.png":"0577","./活动.png":"e6ae","./秘境.png":"783d","./节日.png":"a1a0","./装备.png":"cea3","./足迹.png":"4b0c","./阅读.png":"8877","./阵营.png":"9897","./风雨江湖路.png":"9e93"};function s(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=o,t.exports=s,s.id="d110"},d3d8:function(t,e,n){t.exports=n.p+"img/剑侠录.03fe0933.png"},d67e:function(t,e,n){var i={"./任务.png":"a424","./修为.png":"400a","./剑侠录.png":"d3d8","./声望.png":"401b","./家园.png":"8037","./帮会.png":"fa6c","./战斗.png":"e275","./技艺.png":"13df","./杂闻.png":"4b35","./武学.png":"1903","./活动.png":"1282","./秘境.png":"e7de","./节日.png":"279b","./装备.png":"a849","./足迹.png":"4163","./阅读.png":"57f0","./阵营.png":"88c0","./风雨江湖路.png":"ece9"};function s(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=o,t.exports=s,s.id="d67e"},df9c:function(t,e,n){"use strict";n.r(e);n("b0c0"),n("d3b7"),n("25f0");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-achievement-overview",class:{is_mobile:t.mobile}},[t.mobile?t._e():e("div",{staticClass:"m-overview-header"},[e("div",{staticClass:"m-header-info"},[e("div",{staticClass:"m-info-user",style:{opacity:t.currentRole?1:.5}},[e("span",{staticClass:"u-name"},[t._v(t._s(t.currentRole.name)+" "+t._s(t.currentRole.server&&"·")+" "+t._s(t.currentRole.server))]),e("img",{attrs:{width:"30",height:"30",src:t.showSchoolIcon(t.currentRole.mount),alt:"jx3logo"}}),e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticClass:"u-toggle-btn"},[e("div",[e("span",[t._v("切换角色")]),e("img",{attrs:{src:n("e5dd"),alt:""}})])]),e("el-dropdown-menu",{staticClass:"m-role-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.roleList,(function(n){return e("el-dropdown-item",{key:n.ID},[e("div",{staticClass:"m-role-item",class:{active:n.jx3id===t.currentRole.jx3id},on:{click:function(e){return t.onChangeRole(n)}}},[e("span",[t._v(t._s(n.name))]),e("span",[t._v(t._s(n.server))])])])})),1)],1),t.viewAchievementsName?e("div",{staticClass:"u-overview",on:{click:t.onSeeOverview}},[e("i",{staticClass:"el-icon-back"}),t._v(t._s(t.showList?"返回":"返回总览")+" ")]):t._e()],1),e("div",{staticClass:"m-info-zl"},[e("div",{staticClass:"m-info-zl__info"},[e("div",[e("span",{staticClass:"u-title"},[t._v(t._s(t.viewAchievementsName||"总")+"资历：")]),e("img",{attrs:{width:"32",height:"32",src:n("4750"),alt:"资历logo"}}),e("span",{staticClass:"u-number"},[t._v(t._s(t.ownPointsCount))])]),e("div",{staticClass:"u-rate"},[t._v(t._s(t.totalProgress)+"%")])]),e("div",{staticClass:"m-info-zl__progress"},[e("div",{staticClass:"u-active-progress",style:{width:"".concat(t.totalProgress,"%"),background:t.getCurrentProgressBg(t.totalProgress)}})])])]),t.viewAchievementsName&&!t.showList?e("div",{staticClass:"m-info-avatar"},[e("img",{staticClass:"u-achievement-icon",attrs:{height:"70",src:n("d67e")("./".concat(t.viewAchievementsName,".png")),alt:""}})]):e("div",{staticClass:"m-info-avatar"},[t.avatar_frame?e("img",{staticClass:"u-avatar-border",attrs:{src:t.avatar_frame,alt:"头像边框"}}):t._e(),e("RoleAvatar",{staticClass:"u-avatar-img",attrs:{mount:t.currentRole.mount,body_type:t.currentRole.body_type}})],1)]),t.mobile?e("div",{staticClass:"m-overview-header_mobile"},[e("div",{staticClass:"u-name"},[t._v(" "+t._s(t.currentRole.name)+" "+t._s(t.currentRole.server&&"·")+" "+t._s(t.currentRole.server)+" "),e("img",{attrs:{width:"30",height:"30",src:t.showSchoolIcon(t.currentRole.mount),alt:"jx3logo"}})]),e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticClass:"u-toggle-btn"},[e("span",[t._v("切换")]),e("img",{attrs:{src:n("e5dd"),alt:"",width:"16px",height:"16px"}})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.roleList,(function(n){return e("el-dropdown-item",{key:n.ID},[e("div",{staticClass:"m-role-item",class:{active:n.jx3id===t.currentRole.jx3id},on:{click:function(e){return t.onChangeRole(n)}}},[e("span",[t._v(t._s(n.name))]),e("span",[t._v(t._s(n.server))])])])})),1)],1)],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobile,expression:"mobile"}],staticClass:"u-overview_mobile",class:{isScroll:t.isScroll},on:{click:t.onSeeOverview}},[e("i",{staticClass:"el-icon-back"}),t._v(t._s(t.showList?"返回":"返回总览")+" ")]),t.showList?e("div",{staticClass:"m-cj-list"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.achievements_list||[],stripe:"",height:"100%","row-class-name":"u-table-row","cell-class-name":"u-table-cell","header-row-class-name":"u-table-header_row","header-cell-class-name":"u-table-header_cell"}},[e("el-table-column",{attrs:{prop:"Name",label:"成就名称"},scopedSlots:t._u([{key:"default",fn:function(n){var i;return[e("a",{attrs:{href:t.getLink("achievement",n.row.ID),target:"_blank"}},[e("div",{staticClass:"u-achievement-name"},[e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(null===(i=n.row)||void 0===i?void 0:i.IconID)}}),e("span",[t._v(t._s(n.row.Name))])])])]}}])}),e("el-table-column",{attrs:{label:"成就简介",width:t.mobile?"200":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.ShortDesc||"-")+" ")]}}])}),e("el-table-column",{attrs:{label:"资历点数",width:t.mobile?"80":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.Point||0)+" ")]}}])}),e("el-table-column",{attrs:{label:"完成情况",width:t.mobile?"80":"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-tag",{attrs:{type:0==n.row.isCompleted?"danger":"success"}},[t._v(t._s(0==n.row.isCompleted?"未完成":"已完成"))])]}}])}),e("el-table-column",{attrs:{label:"奖励",width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row.ItemID?e("el-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("jx3-item",{attrs:{item_id:n.row.ItemType+"_"+n.row.ItemID.toString()}})],1),e("img",{staticClass:"u-icon",attrs:{src:t.getIconRewards(n.row)}})]):t._e()]}}])})],1)],1):e("div",{ref:"overviewList",staticClass:"m-overview-main",class:{is_mobile:t.mobile,isScroll:t.isScroll},on:{scroll:t.overviewListScroll}},[t.mobile?e("div",{staticClass:"m-info-zl"},[t.isScroll?t._e():e("div",{staticClass:"m-info-zl__info"},[e("span",{staticClass:"u-title"},[t._v(t._s(t.viewAchievementsName||"总")+"资历："),e("span",{staticClass:"u-number"},[t._v(t._s(t.ownPointsCount))])]),e("span",{staticClass:"u-rate"},[t._v(t._s(t.totalProgress)+"%")])]),e("div",{staticClass:"m-info-zl__progress"},[e("div",{staticClass:"u-active-progress",style:{width:"".concat(t.totalProgress,"%"),background:t.getCurrentProgressBg(t.totalProgress)}})])]):t._e(),t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"m-cj-item",on:{click:function(e){return t.onEnterCategory(i)}}},[e("img",{staticClass:"u-border",attrs:{src:n("a298"),alt:""}}),e("div",{staticClass:"m-cj-wrapper"},[e("div",{staticClass:"m-cj-content"},[e("div",{staticClass:"u-cj-info"},[e("div",{staticClass:"u-name"},[t._v(t._s(i.name))]),e("div",{staticClass:"u-rate"},[t._v(t._s(t.getCurrentProgress(i.ownPoints,i.allPoints))+"%")])]),e("div",{staticClass:"m-count-box"},[e("div",{staticClass:"m-count-inner"},[e("div",{staticClass:"u-item"},[e("img",{attrs:{width:"14",height:"14",src:n("2053"),alt:"成就logo"}}),e("span",[t._v(t._s(i.ownAchievements.length)+"/"+t._s(i.allAchievements.length))])]),e("div",{staticClass:"u-item"},[e("img",{attrs:{width:"14",height:"14",src:n("4750"),alt:"资历logo"}}),e("span",[t._v(t._s(i.ownPoints)+"/"+t._s(i.allPoints))])])])])]),i.children?e("div",{staticClass:"u-logo"},[e("img",{attrs:{height:"70",src:n("d110")("./".concat(i.name,".png")),alt:""}})]):t._e(),e("div",{staticClass:"u-progress",style:{width:"".concat(t.getCurrentProgress(i.ownPoints,i.allPoints),"%"),background:t.getCurrentProgressBg(i.ownPoints,i.allPoints)}})])])}))],2),t.isScroll?e("div",{staticClass:"m-zl-info_bottom"},[e("div",{staticClass:"m-box_bottom"},[e("span",{staticClass:"u-title"},[t._v(t._s(t.viewAchievementsName||"总")+"资历： "),e("span",{staticClass:"u-number"},[t._v(t._s(t.ownPointsCount))])]),e("span",{staticClass:"u-rate"},[t._v(t._s(t.totalProgress)+"%")])]),e("div",{staticClass:"m-info-zl__progress"},[e("div",{staticClass:"u-active-progress",style:{width:"".concat(t.totalProgress,"%"),background:t.getCurrentProgressBg(t.totalProgress)}})])]):t._e()])},s=[],o=n("5530"),a=(n("99af"),n("7db0"),n("caad"),n("d81d"),n("14d9"),n("e9f5"),n("f665"),n("7d54"),n("ab43"),n("b680"),n("b64b"),n("2532"),n("4c53"),n("159b"),n("c9d2")),r=n("85e4"),c=n("262e"),l=n("1450"),u=function(){var t=this,e=t._self._c;return e("img",{attrs:{src:t.showAvatar(t.mount,t.body_type)}})},d=[],m=n("65c2"),v={name:"roleAvatar",props:["mount","body_type"],components:{},data:function(){return{}},computed:{},methods:{showAvatar:function(t,e){return m["__cdn"]+"design/avatar/xisai/"+t+"-"+e+".png"}},filters:{},created:function(){},mounted:function(){}},p=v,g=n("2877"),f=Object(g["a"])(p,u,d,!1,null,null,null),h=f.exports,b=n("c967"),_=n("c7fa"),w=n("2ef0"),C={name:"wiki-achievement-overview",props:[],components:{RoleAvatar:h,"jx3-item":_["a"]},data:function(){return{userInfo:null,achievementData:{},pointsData:{},list:[],roleList:[],currentRole:"",isLogin:a["a"].isLogin(),virtualRole:Object(o["a"])(Object(o["a"])({},a["a"].getInfo()),{},{jx3id:0,ID:~~a["a"].getInfo().uid}),isScroll:!1,showList:!1,achievements_list:[],loading:!1,list_bak:[],name_bak:""}},computed:{mobile:function(){var t=navigator.userAgent.toLowerCase(),e=["android","iphone","ipad","ipod","windows phone"];return e.some((function(e){return t.includes(e)}))},avatar_frame:function(){if(this.userInfo){var t=this.userInfo.user_avatar_frame;if(t)return m["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")}return null},viewAchievementsName:function(){return this.$store.state.viewAchievementsName},totalProgress:function(){return this.ownPointsCount||this.allPointsCount?(this.ownPointsCount/this.allPointsCount*100).toFixed(2):0},allPointsCount:function(){var t=0;return this.list.forEach((function(e){t+=e.allPoints||0})),t},ownPointsCount:function(){var t=this;if(!this.viewAchievementsName){var e=0,n=this.$store.state.achievements;return n.forEach((function(n){e+=t.pointsData[n]||0})),e}var i=0;return this.list.forEach((function(t){i+=t.ownPoints||0})),i}},watch:{achievementData:function(){this.getRenderList()},"$store.state.achievements":{deep:!0,handler:function(t){this.getRenderList()}},currentRole:{deep:!0,handler:function(t){if(t){localStorage.setItem("wiki_last_sync",t.jx3id||0),this.$store.commit("SET_STATE",{key:"role",value:t});var e=t.jx3id;e&&(this.$store.commit("SET_STATE",{key:"achievementsVirtual",value:[]}),this.loadRoleAchievements(e)),this.getRenderList()}}}},mounted:function(){this.getUserInfo()},methods:{iconLink:r["l"],getLink:r["f"],getIconRewards:function(t){var e="item-".concat(this.$store.state.client,"-").concat(t.ItemType,"_").concat(t.ItemID);try{var n=JSON.parse(sessionStorage.getItem(e));return null!==n&&void 0!==n&&n.IconID?this.iconLink(n.IconID):""}catch(i){}},overviewListScroll:function(t){this.mobile&&(this.$refs.overviewList.scrollTop>70?this.isScroll=!0:this.isScroll=!1)},getUserInfo:function(){var t=this;if(a["a"].isLogin()){var e=a["a"].getInfo().uid;e&&Object(b["e"])(e).then((function(e){0==e.data.code&&(t.userInfo=e.data.data,t.loadData())}))}else this.$confirm("请先登录").then((function(t){a["a"].toLogin(window.location.href)}))},onChangeRole:function(t){var e=this;this.currentRole=t,this.$nextTick((function(){e.$refs.overviewList.scrollTop=0}))},showSchoolIcon:r["r"],onEnterCategory:function(t){var e=this;this.name_bak=Object(w["cloneDeep"])(this.viewAchievementsName),this.list_bak=Object(w["cloneDeep"])(this.list),this.$store.commit("SET_STATE",{key:"viewAchievementsName",value:t.name}),t.children?(this.getRenderList(t.children),this.$nextTick((function(){e.$refs.overviewList.scrollTop=0}))):(this.list=[t],this.showList=!0,this.getMenuAchievements(t))},getMenuAchievements:function(t){var e=this;this.loading=!0,Object(c["h"])(t.sub,t.detail).then((function(n){var i=n.data.data.achievements||[],s=[];i.forEach((function(e){e.isCompleted=t.ownAchievements.includes(e.ID),s.push(e),e.SeriesAchievementList&&e.SeriesAchievementList.forEach((function(e,n){n>0&&(e.isCompleted=t.ownAchievements.includes(e.ID),s.push(e))}))})),e.achievements_list=s})).finally((function(){e.loading=!1}))},onSeeOverview:function(){var t=this;if(this.showList)return this.list=Object(w["cloneDeep"])(this.list_bak),this.$store.commit("SET_STATE",{key:"viewAchievementsName",value:this.name_bak}),this.showList=!1,void(this.achievements_list=[]);this.showList=!1,this.achievements_list=[],this.$store.commit("SET_STATE",{key:"viewAchievementsName",value:null}),this.getRenderList(),this.$nextTick((function(){t.$refs.overviewList.scrollTop=0}))},loadData:function(){this.getList(),this.getPoints()},getRenderList:function(t){var e=this;t=t||this.achievementData;var n=Object.keys(t).map((function(n){var i=t[n],s=e.getAllachievementsData(i);return{sub:i.sub,detail:i.detail,name:i.name,allAchievements:s.allAchievements,ownAchievements:s.ownAchievements,children:i.children,allPoints:s.allPoints,ownPoints:s.ownPoints}}));this.list=n},getCurrentProgress:function(t,e){return(t/e*100).toFixed(2)},getCurrentProgressBg:function(t,e){var n=0;return n=e?(t/e*100).toFixed(2):t,n>66?"linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(204, 184, 155, 1) 100%)":n>33?"linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(191, 191, 191, 1) 100%)":"linear-gradient(90deg, rgba(247, 247, 247, 1) 0%, rgba(204, 177, 175, 1) 100%)"},getAllachievementsData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allPoints:0,ownPoints:0},o=this.$store.state.achievements;return t.achievements.forEach((function(t){Array.isArray(t)?t.forEach((function(t){e.pointsData[t]&&(s.allPoints+=e.pointsData[t],n.push(t),o.includes(String(t))&&(s.ownPoints+=e.pointsData[t],i.push(t)))})):e.pointsData[t]&&(s.allPoints+=e.pointsData[t],n.push(t),o.includes(String(t))&&(s.ownPoints+=e.pointsData[t],i.push(t)))})),t.children&&t.children.forEach((function(t){e.getAllachievementsData(t,n,i,s)})),{allAchievements:n,allPoints:s.allPoints,ownAchievements:i,ownPoints:s.ownPoints}},getList:function(){var t=this;return Object(c["i"])({general:1,client:this.$store.state.client}).then((function(e){var n=e.data.data.menus;t.achievementData=n}))},getPoints:function(){var t=this;return Object(c["b"])().then((function(e){var n=e.data.data.points;t.pointsData=n,t.loadUserRoles()}))},loadUserRoles:function(){var t=this;this.isLogin&&Object(l["a"])().then((function(e){var n,i;t.roleList=(null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.list)||[];var s=localStorage.getItem("wiki_last_sync");s&&"0"!==s?t.currentRole=t.roleList.find((function(t){return t.jx3id==s}))||"":(t.currentRole=t.virtualRole,t.$store.commit("SET_STATE",{key:"role",value:t.virtualRole}),t.loadVirtualAchievements())}))},loadRoleAchievements:function(t){var e=this;Object(c["m"])(t).then((function(t){var n,i,s,o,a=(null===(n=t.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.achievements)||"",r=null===(s=t.data)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.jx3id;e.isSync=!!r;var c=a.split(",");e.$store.commit("SET_STATE",{key:"achievements",value:c,isSession:!0})}))},loadVirtualAchievements:function(){var t=this;this.currentRole&&!this.currentRole.jx3id&&Object(c["n"])().then((function(e){var n,i,s=(null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.achievements)||"",o=s.split(",");t.$store.commit("SET_STATE",{key:"achievementsVirtual",value:o})}))}}},x=C,k=(n("8b45"),Object(g["a"])(x,i,s,!1,null,null,null));e["default"]=k.exports},e0e1:function(t,e,n){t.exports=n.p+"img/技艺.d186c205.png"},e275:function(t,e,n){t.exports=n.p+"img/战斗.63998b29.png"},e5dd:function(t,e,n){t.exports=n.p+"img/toggle-user-icon.4a7a0c8b.svg"},e6ae:function(t,e,n){t.exports=n.p+"img/活动.7f999d06.png"},e7de:function(t,e,n){t.exports=n.p+"img/秘境.9be67753.png"},ece9:function(t,e,n){t.exports=n.p+"img/风雨江湖路.d959ace0.png"},f972:function(t,e,n){t.exports=n.p+"img/剑侠录.553cdc49.png"},fa6c:function(t,e,n){t.exports=n.p+"img/帮会.d07db77c.png"}}]);
//# sourceMappingURL=chunk-00eb1b99.cd31ddcb.js.map