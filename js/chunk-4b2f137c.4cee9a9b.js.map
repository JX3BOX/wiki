{"version":3,"sources":["webpack:///./src/utils/quest.js","webpack:///./src/components/quest/nav.vue?9c7c","webpack:///./src/service/quest.js","webpack:///./src/views/quest/quest.vue?4d82","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/views/quest/quest.vue","webpack:///./src/components/quest/nav.vue","webpack:///src/components/quest/nav.vue","webpack:///./src/components/quest/nav.vue?57dc","webpack:///./src/components/quest/nav.vue?4ca5","webpack:///src/views/quest/quest.vue","webpack:///./src/views/quest/quest.vue?cc3b","webpack:///./src/views/quest/quest.vue?f284"],"names":["buildPoints","quest","_quest$questValues","_quest$needItems","_quest$killNpcs","result","pushPoint","map","point","push","start","guides","length","_step","point_info","Types","ObjectName","name","ObjectID","id","ObjectType","type","_iterator","_createForOfIteratorHelper","s","n","done","guide","value","coordinates","_step2","_iterator2","coordinate","_objectSpread","Coordinates","err","e","f","end","_step3","_iterator3","_step4","_iterator4","questValues","index","_questValue$guides","questValue","_step5","_iterator5","concat","parseInt","_step6","_iterator6","needItems","_needItem$guides","needItem","_step7","_iterator7","_step8","_iterator8","killNpcs","_killNpc$guides","killNpc","_step9","_iterator9","_step0","_iterator0","schoolIcon","school","filenameMap","万灵山庄","北天药宗","凌雪阁","衍天宗","__imgPath","questDescFormat","desc","ignoreColor","arguments","undefined","_getPlayerName","getPlayerName","playerName","playerBody","replace","match","exec","font","questFont","style","color","questTargetDescFormat","target","localStorage","getItem","$","$node","getQuest","params","get","getQuests","body","post","getNewestQuests","getWaiting","Object","assign","$cms","getQuestMaps","getBreadcrumb","key","then","res","data","html","completeUserQuest","role_id","quest_id","cancelUserQuest","delete","listUserQuest","r","t","Symbol","iterator","Array","isArray","unsupportedIterableToArray","_n","F","TypeError","o","a","u","call","next","render","_vm","this","_c","_self","attrs","scopedSlots","_u","fn","proxy","staticClass","placeholder","on","search","model","chain","callback","$$v","expression","_v","slot","settingVisible","handlePlayerInfoChange","staticStyle","$event","_s","staticRenderFns","onRolesLoaded","role","keyword","uncompleted","total","completedNum","_e","ref","maps","defaultProps","filterNode","clickNode","_ref","node","isLeaf","menuLink","domProps","count","completed","components","RoleSelect","questType","children","label","computed","mapState","state","completedQuests","client","$store","reduce","b","watch","val","commit","onlyNotCompleted","$refs","tree","filter","_this","ID","_res$data","setItem","jx3id","updateNav","methods","indexOf","menu","query","map_id","_this2","forEach","item","group_count","child","quests","includes","loadMaps","_this3","_res$data2","mapObj","group","window","innerWidth","Bus","$emit","list","virtualRole","quests_last_sync_jx3id","find","mounted","component","QuestNav","CommonNav","DefaultLayout","Search","$router"],"mappings":"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","file":"js/chunk-4b2f137c.4cee9a9b.js","sourcesContent":["import { __imgPath } from \"@/utils/config\";\nimport questFont from \"@/assets/data/quest-font.json\";\n\nexport const buildPoints = (quest) => {\n    let result = {};\n    const pushPoint = (map, point) => {\n        if (!result[map]) result[map] = [];\n        result[map].push(point);\n    };\n\n    if (quest.start.guides.length > 0) {\n        let start = quest.start;\n        let point_info = {\n            Types: \"Start\",\n            ObjectName: start.name,\n            ObjectID: start.id,\n            ObjectType: start.type,\n        };\n        for (let guide of start.guides)\n            if (guide.coordinates) {\n                for (let coordinate of guide.coordinates)\n                    pushPoint(guide.map, {\n                        ...point_info,\n                        Coordinates: coordinate,\n                    });\n            } else if (guide.coordinate) {\n                pushPoint(guide.map, {\n                    ...point_info,\n                    Coordinates: guide.coordinate,\n                });\n            }\n    }\n    if (quest.end.guides.length > 0) {\n        let end = quest.end;\n        let point_info = {\n            Types: \"End\",\n            ObjectName: end.name,\n            ObjectID: end.id,\n            ObjectType: end.type,\n        };\n        for (let guide of end.guides)\n            if (guide.coordinates) {\n                for (let coordinate of guide.coordinates)\n                    pushPoint(guide.map, {\n                        ...point_info,\n                        Coordinates: coordinate,\n                    });\n            } else if (guide.coordinate) {\n                pushPoint(guide.map, {\n                    ...point_info,\n                    Coordinates: guide.coordinate,\n                });\n            }\n    }\n    if (quest.questValues?.length > 0) {\n        for (let index in quest.questValues) {\n            let questValue = quest.questValues[index];\n            if (questValue.guides?.length > 0) {\n                for (let guide of questValue.guides) {\n                    let point_info = {\n                        Types: `State${parseInt(index) + 1}`,\n                        ObjectName: guide.name,\n                        ObjectID: guide.id,\n                        ObjectType: guide.type,\n                    };\n                    if (guide.coordinates) {\n                        for (let coordinate of guide.coordinates)\n                            pushPoint(guide.map, {\n                                ...point_info,\n                                Coordinates: coordinate,\n                            });\n                    } else if (guide.coordinate) {\n                        pushPoint(guide.map, {\n                            ...point_info,\n                            Coordinates: guide.coordinate,\n                        });\n                    }\n                }\n            }\n        }\n    }\n    if (quest.needItems?.length > 0) {\n        for (let index in quest.needItems) {\n            let needItem = quest.needItems[index];\n            if (needItem.guides?.length > 0) {\n                for (let guide of needItem.guides) {\n                    let point_info = {\n                        Types: `NeedItem${parseInt(index) + 1}`,\n                        ObjectName: guide.name,\n                        ObjectID: guide.id,\n                        ObjectType: guide.type,\n                    };\n                    if (guide.coordinates) {\n                        for (let coordinate of guide.coordinates)\n                            pushPoint(guide.map, {\n                                ...point_info,\n                                Coordinates: coordinate,\n                            });\n                    } else if (guide.coordinate) {\n                        pushPoint(guide.map, {\n                            ...point_info,\n                            Coordinates: guide.coordinate,\n                        });\n                    }\n                }\n            }\n        }\n    }\n    if (quest.killNpcs?.length > 0) {\n        for (let index in quest.killNpcs) {\n            let killNpc = quest.killNpcs[index];\n            if (killNpc.guides?.length > 0) {\n                for (let guide of killNpc.guides) {\n                    let point_info = {\n                        Types: `KillNpc${parseInt(index) + 1}`,\n                        ObjectName: guide.name,\n                        ObjectID: guide.id,\n                        ObjectType: guide.type,\n                    };\n                    if (guide.coordinates) {\n                        for (let coordinate of guide.coordinates)\n                            pushPoint(guide.map, {\n                                ...point_info,\n                                Coordinates: coordinate,\n                            });\n                    } else if (guide.coordinate) {\n                        pushPoint(guide.map, {\n                            ...point_info,\n                            Coordinates: guide.coordinate,\n                        });\n                    }\n                }\n            }\n        }\n    }\n    return result;\n};\n\nexport const schoolIcon = (school) => {\n    let filenameMap = {\n        万灵山庄: \"万灵\",\n        北天药宗: \"药宗\",\n        凌雪阁: \"凌雪\",\n        衍天宗: \"衍天\",\n    };\n    if (filenameMap[school]) school = filenameMap[school];\n    return `${__imgPath}/image/school/${school}.png`;\n};\n\nexport const questDescFormat = (desc, ignoreColor = false) => {\n    const { playerName, playerBody } = getPlayerName();\n    if (desc) {\n        let result = desc\n            .replace(/\\\\n/g, \"\\n\")\n            .replace(/\\<G\\>/g, \"&emsp;&emsp;\")\n            .replace(/\\<N\\>/g, playerName)\n            .replace(/\\<C\\>/g, playerBody)\n            .replace(\n                /\\<CMD NPC_NAME (.+?)\\>/g,\n                `<strong class=\"u-dialog-name\">$1</strong><br /><div class=\"u-dialog-desc\">`\n            )\n            .replace(\n                /\\<CMD PLAYER_NAME >/g,\n                `<strong class=\"u-dialog-name\">${playerName}</strong><br /></div class=\"u-dialog-desc\">`\n            )\n            .replace(/\\<H(\\d+)\\>/g, '<div style=\"height: calc($1px - 1.5rem)\"></div></div>');\n        while (true) {\n            let match = /\\<F(\\d+) (.+?)\\>/.exec(result);\n            if (match) {\n                let font = questFont[match[1]];\n                const style = `style=\"color: ${font.color}99\"`;\n                result = result.replace(match[0], `<span ${ignoreColor ? \"\" : style}>${match[2]}</span>`);\n            } else {\n                break;\n            }\n        }\n        return result;\n    }\n    return \"\";\n};\n\nexport const questTargetDescFormat = (target) => {\n    if (target)\n        return target\n            .replace(/\\\\n/g, \"\\n\")\n            .replace(/\\<G\\>/g, \"&emsp;&emsp;\")\n            .replace(/\\<C\\>/g, \"侠士\")\n            .replace(/\\<N\\>/g, \"侠士\")\n            .replace(/\\<F\\d+ (.+?)\\>/g, \"$1\");\n    else return \"\";\n};\n\nexport const getPlayerName = () => {\n    const playerName = localStorage.getItem(\"QuestWiki:playerName\") || \"侠士\";\n    const playerBody = localStorage.getItem(\"QuestWiki:playerBody\") || \"少侠\";\n    return { playerName, playerBody };\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./nav.vue?vue&type=style&index=0&id=58bf9daf&prod&lang=less\"","import { $node, $cms } from \"@jx3box/jx3box-common/js/https\";\nconst $ = $node();\n\n// import axios from \"axios\";\n// const $ = axios.create({\n//     baseURL: \"http://localhost:7002/\",\n// });\n\nexport function getCategory(params) {\n    return $.get(`/quest/category`, { params });\n}\n\nexport function getQuest(params) {\n    return $.get(`/quest/`, { params });\n}\n\nexport function getQuests(params, body) {\n    return $.post(`/quests`, body, { params });\n}\n\nexport function getNewestQuests(params) {\n    return $.get(`/quests/newest`, { params });\n}\n\nexport function getWaiting(params) {\n    params = Object.assign(params, {\n        type: \"quest\",\n    });\n    return $cms().get(`/api/cms/wiki/post/waiting`, { params });\n}\n\nexport function getQuestMaps(params) {\n    return $.get(`/quest/maps`, { params });\n}\n\n// 获取任务公告\nexport function getBreadcrumb(key = \"wiki_quest_ac\") {\n    return $cms()\n        .get(`/api/cms/breadcrumb/${key}`)\n        .then((res) => {\n            return res.data.data.html || \"\";\n        });\n}\n\n// 用户标记任务完成\nexport function completeUserQuest(role_id, quest_id) {\n    return $cms().post(`/api/cms/wiki/user-quest/${role_id}/${quest_id}`);\n}\n\n// 用户取消标记任务完成\nexport function cancelUserQuest(role_id, quest_id) {\n    return $cms().delete(`/api/cms/wiki/user-quest/${role_id}/${quest_id}`);\n}\n\n// 用户获取任务完成状态\nexport function listUserQuest(role_id) {\n    return $cms().get(`/api/cms/wiki/user-quest/${role_id}`);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./quest.vue?vue&type=style&index=0&id=1477d701&prod&lang=less\"","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nfunction _createForOfIteratorHelper(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (!t) {\n    if (Array.isArray(r) || (t = unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n      t && (r = t);\n      var _n = 0,\n        F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          return _n >= r.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: r[_n++]\n          };\n        },\n        e: function e(r) {\n          throw r;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var o,\n    a = !0,\n    u = !1;\n  return {\n    s: function s() {\n      t = t.call(r);\n    },\n    n: function n() {\n      var r = t.next();\n      return a = r.done, r;\n    },\n    e: function e(r) {\n      u = !0, o = r;\n    },\n    f: function f() {\n      try {\n        a || null == t[\"return\"] || t[\"return\"]();\n      } finally {\n        if (u) throw o;\n      }\n    }\n  };\n}\nexport { _createForOfIteratorHelper as default };","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('DefaultLayout',{attrs:{\"name\":\"任务百科\",\"slug\":\"quest\",\"root\":\"/quest\",\"without-right\":\"\",\"publishEnable\":true,\"feedbackEnable\":true,\"crumbEnable\":false},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('CommonNav',[_c('QuestNav')],1)]},proxy:true}])},[_c('div',{staticClass:\"m-search-wrap\"},[_c('Search',{attrs:{\"placeholder\":_vm.placeholder},on:{\"search\":_vm.search}},[_c('div',[_c('el-tooltip',{attrs:{\"content\":\"查看任务链需要键入完整任务名或任务ID哦\",\"placement\":\"top\"}},[_c('el-checkbox',{model:{value:(_vm.chain),callback:function ($$v) {_vm.chain=$$v},expression:\"chain\"}},[_vm._v(\"查看任务链\")])],1),_c('el-tooltip',{staticClass:\"u-tips\",attrs:{\"effect\":\"dark\",\"placement\":\"bottom\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('span',[_vm._v(\"※ 支持任务名称精确或模糊搜索\")]),_vm._v(\" \"),_c('br'),_c('span',[_vm._v(\"※ 支持任务相关物品名称精确搜索\")]),_vm._v(\" \"),_c('br'),_c('span',[_vm._v(\"※ 支持成就名称精确搜索\")]),_vm._v(\" \"),_c('br')]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-question\"}})],1)],1)]),_c('el-popover',{attrs:{\"popper-class\":\"u-player-setting-popover\",\"placement\":\"top\",\"width\":\"160\"},model:{value:(_vm.settingVisible),callback:function ($$v) {_vm.settingVisible=$$v},expression:\"settingVisible\"}},[_c('el-input',{attrs:{\"placeholder\":\"称呼\",\"size\":\"mini\"},on:{\"input\":_vm.handlePlayerInfoChange},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_vm._v(\"称呼\")]},proxy:true}]),model:{value:(_vm.playerName),callback:function ($$v) {_vm.playerName=$$v},expression:\"playerName\"}}),_c('el-input',{attrs:{\"placeholder\":\"体型\",\"size\":\"mini\"},on:{\"input\":_vm.handlePlayerInfoChange},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_vm._v(\"体型\")]},proxy:true}]),model:{value:(_vm.playerBody),callback:function ($$v) {_vm.playerBody=$$v},expression:\"playerBody\"}}),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.settingVisible = false}}},[_vm._v(\"确定\")])],1),_c('div',{staticClass:\"u-player\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('span',{staticClass:\"u-player-name\"},[_vm._v(_vm._s(_vm.playerName))]),_vm._v(\"| \"),_c('span',{staticClass:\"u-player-body\"},[_vm._v(_vm._s(_vm.playerBody))]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-setting\"}})],1)],1)],1),_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('nav',{staticClass:\"m-nav\"},[_c('role-select',{on:{\"list-loaded\":_vm.onRolesLoaded},scopedSlots:_vm._u([{key:\"tip\",fn:function(){return [_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"虚拟角色即为魔盒账号本身，可自定义进度\",\"placement\":\"top\"}},[_c('a',{attrs:{\"href\":\"/tool/74559\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-warning-outline\"})])])]},proxy:true}]),model:{value:(_vm.role),callback:function ($$v) {_vm.role=$$v},expression:\"role\"}}),_c('el-input',{staticClass:\"u-keyword\",attrs:{\"size\":\"small\",\"placeholder\":\"输入关键字\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),(_vm.role)?_c('div',{staticClass:\"m-filters\"},[_c('el-checkbox',{attrs:{\"label\":\"只看未完成\",\"border\":\"\",\"size\":\"mini\"},model:{value:(_vm.uncompleted),callback:function ($$v) {_vm.uncompleted=$$v},expression:\"uncompleted\"}}),_c('div',{staticClass:\"u-total\"},[_c('b',{staticClass:\"u-completed-num\"},[_vm._v(_vm._s(_vm.uncompleted ? _vm.total - _vm.completedNum : _vm.completedNum))]),_c('span',{staticClass:\"u-total-num\"},[_vm._v(\" / \"+_vm._s(_vm.total))])])],1):_vm._e(),_c('div',{staticClass:\"m-menus-panel\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.maps,\"props\":_vm.defaultProps,\"filter-node-method\":_vm.filterNode,\"node-key\":\"id\",\"indent\":42},on:{\"node-click\":_vm.clickNode},scopedSlots:_vm._u([{key:\"default\",fn:function({ node, data }){return [(!node.isLeaf)?_c('span',{staticClass:\"el-tree-node__label\"},[_c('span',{staticClass:\"u-name\",domProps:{\"textContent\":_vm._s(data.name)}}),(data.count)?_c('em',{staticClass:\"u-count\",domProps:{\"textContent\":_vm._s(`(${_vm.uncompleted ? data.count - data.completed : data.completed}/${data.count})`)}}):_vm._e()]):_c('router-link',{staticClass:\"el-tree-node__label\",attrs:{\"to\":_vm.menuLink(data, node)}},[_c('span',{staticClass:\"u-name\",domProps:{\"textContent\":_vm._s(data.name)}}),(data.count)?_c('em',{staticClass:\"u-count\",domProps:{\"textContent\":_vm._s(`(${_vm.uncompleted ? data.count - data.completed : data.completed}/${data.count})`)}}):_vm._e()])]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <nav class=\"m-nav\">\n        <role-select v-model=\"role\" @list-loaded=\"onRolesLoaded\">\n            <template #tip>\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"虚拟角色即为魔盒账号本身，可自定义进度\" placement=\"top\">\n                    <a href=\"/tool/74559\" target=\"_blank\"><i class=\"el-icon-warning-outline\"></i></a>\n                </el-tooltip>\n            </template>\n        </role-select>\n        <el-input class=\"u-keyword\" size=\"small\" v-model=\"keyword\" placeholder=\"输入关键字\"> </el-input>\n        <div v-if=\"role\" class=\"m-filters\">\n            <el-checkbox v-model=\"uncompleted\" label=\"只看未完成\" border size=\"mini\"></el-checkbox>\n            <div class=\"u-total\">\n                <!-- numTotal -->\n                <b class=\"u-completed-num\">{{ uncompleted ? total - completedNum : completedNum }}</b>\n                <span class=\"u-total-num\"> / {{ total }}</span>\n            </div>\n        </div>\n        <div class=\"m-menus-panel\">\n            <el-tree\n                :data=\"maps\"\n                :props=\"defaultProps\"\n                :filter-node-method=\"filterNode\"\n                node-key=\"id\"\n                @node-click=\"clickNode\"\n                ref=\"tree\"\n                :indent=\"42\"\n            >\n                <template slot-scope=\"{ node, data }\">\n                    <span v-if=\"!node.isLeaf\" class=\"el-tree-node__label\">\n                        <span class=\"u-name\" v-text=\"data.name\"></span>\n                        <em\n                            v-if=\"data.count\"\n                            class=\"u-count\"\n                            v-text=\"`(${uncompleted ? data.count - data.completed : data.completed}/${data.count})`\"\n                        ></em>\n                    </span>\n                    <router-link v-else class=\"el-tree-node__label\" :to=\"menuLink(data, node)\">\n                        <span class=\"u-name\" v-text=\"data.name\"></span>\n                        <em\n                            v-if=\"data.count\"\n                            class=\"u-count\"\n                            v-text=\"`(${uncompleted ? data.count - data.completed : data.completed}/${data.count})`\"\n                        ></em>\n                    </router-link>\n                </template>\n            </el-tree>\n        </div>\n    </nav>\n</template>\n\n<script>\nimport RoleSelect from \"@/components/common/role-select.vue\";\nimport { getQuestMaps, listUserQuest } from \"@/service/quest\";\nimport questType from \"@/assets/data/quest-type.json\";\nimport Bus from \"@jx3box/jx3box-common-ui/service/bus\";\nimport { mapState } from \"vuex\";\n\nexport default {\n    name: \"Nav\",\n    components: { RoleSelect },\n    data: () => ({\n        keyword: \"\",\n        maps: [],\n        questType,\n        defaultProps: {\n            children: \"children\",\n            label: \"name\",\n        },\n\n        role: \"\",\n        uncompleted: false,\n    }),\n    computed: {\n        ...mapState({\n            completed: (state) => state.completedQuests,\n        }),\n        client() {\n            return this.$store.state.client;\n        },\n        total() {\n            return this.maps.reduce((a, b) => a + b.count, 0);\n        },\n        completedNum() {\n            return this.completed.length;\n        },\n    },\n    watch: {\n        uncompleted(val) {\n            this.$store.commit(\"SET_STATE\", {\n                onlyNotCompleted: val,\n            });\n        },\n        keyword(val) {\n            this.$refs.tree.filter(val);\n        },\n        role(val) {\n            this.$store.commit(\"SET_ROLE\", val);\n            // 加载该角色的列表\n            listUserQuest(this.role.ID).then((res) => {\n                const data = res.data?.data || [];\n                this.$store.commit(\"SET_COMPLETED_QUESTS\", data);\n                localStorage.setItem(\"quests_last_sync\", this.role.jx3id);\n            });\n        },\n        completed() {\n            this.updateNav();\n        },\n    },\n    methods: {\n        filterNode(value, data) {\n            if (!value) return true;\n            return data.name.indexOf(value) !== -1;\n        },\n        menuLink(menu, node) {\n            return { name: \"result\", query: menu.id ? { map_id: menu.id } : {} };\n        },\n        updateNav() {\n            this.maps.forEach((item) => {\n                let group_count = 0;\n                if (!item.children) return;\n                item.children.forEach((child) => {\n                    if (!child.quests) return;\n                    child.completed = child.quests.filter((id) => this.completed.includes(id)).length;\n                    group_count += child.completed;\n                });\n                item.completed = group_count;\n            });\n        },\n        loadMaps() {\n            getQuestMaps({client: this.client}).then((res) => {\n                const mapObj = res.data?.data || {};\n                const maps = [];\n                for (let key in mapObj) {\n                    if (questType[key]) {\n                        const group = {\n                            id: key,\n                            name: questType[key],\n                            children: mapObj[key]\n                                .filter((item) => item.count > 0)\n                                .map((item) => ({ ...item, completed: 0 })),\n                            count: mapObj[key].map((item) => item.count).reduce((a, b) => a + b),\n                            completed: 0,\n                        };\n                        if (group.count > 0) {\n                            maps.push(group);\n                        }\n                    }\n                }\n                this.maps = maps;\n            });\n        },\n        clickNode(data, node) {\n            // 移动端收起边栏\n            if (window.innerWidth < 1024) {\n                if (node.isLeaf) {\n                    Bus.$emit(\"toggleLeftSide\", false);\n                }\n            }\n        },\n        onRolesLoaded(list, virtualRole) {\n            const quests_last_sync_jx3id = localStorage.getItem(\"quests_last_sync\");\n            if (quests_last_sync_jx3id && quests_last_sync_jx3id !== \"0\") {\n                this.role = list.find((item) => item.jx3id == quests_last_sync_jx3id) || \"\";\n            } else {\n                this.role = virtualRole;\n            }\n        },\n    },\n    mounted() {\n        this.loadMaps();\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/quest/nav.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./nav.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./nav.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./nav.vue?vue&type=template&id=58bf9daf\"\nimport script from \"./nav.vue?vue&type=script&lang=js\"\nexport * from \"./nav.vue?vue&type=script&lang=js\"\nimport style0 from \"./nav.vue?vue&type=style&index=0&id=58bf9daf&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <DefaultLayout\n        name=\"任务百科\"\n        slug=\"quest\"\n        root=\"/quest\"\n        without-right\n        :publishEnable=\"true\"\n        :feedbackEnable=\"true\"\n        :crumbEnable=\"false\"\n    >\n        <template #left>\n            <CommonNav>\n                <QuestNav> </QuestNav>\n            </CommonNav>\n        </template>\n        <div class=\"m-search-wrap\">\n            <Search :placeholder=\"placeholder\" @search=\"search\">\n                <div>\n                    <el-tooltip content=\"查看任务链需要键入完整任务名或任务ID哦\" placement=\"top\">\n                        <el-checkbox v-model=\"chain\">查看任务链</el-checkbox>\n                    </el-tooltip>\n                    <el-tooltip class=\"u-tips\" effect=\"dark\" placement=\"bottom\">\n                        <div slot=\"content\">\n                            <span>※ 支持任务名称精确或模糊搜索</span> <br />\n                            <span>※ 支持任务相关物品名称精确搜索</span> <br />\n                            <span>※ 支持成就名称精确搜索</span> <br />\n                        </div>\n                        <el-button type=\"text\" icon=\"el-icon-question\"></el-button>\n                    </el-tooltip>\n                </div>\n            </Search>\n            <el-popover popper-class=\"u-player-setting-popover\" placement=\"top\" width=\"160\" v-model=\"settingVisible\">\n                <el-input v-model=\"playerName\" placeholder=\"称呼\" @input=\"handlePlayerInfoChange\" size=\"mini\"\n                    ><template #prepend>称呼</template></el-input\n                >\n                <el-input v-model=\"playerBody\" placeholder=\"体型\" @input=\"handlePlayerInfoChange\" size=\"mini\"\n                    ><template #prepend>体型</template></el-input\n                >\n                <div style=\"text-align: right; margin: 0\">\n                    <el-button type=\"primary\" size=\"mini\" @click=\"settingVisible = false\">确定</el-button>\n                </div>\n                <div class=\"u-player\" slot=\"reference\">\n                    <span class=\"u-player-name\">{{ playerName }}</span\n                    >|\n                    <span class=\"u-player-body\">{{ playerBody }}</span>\n                    <el-button type=\"text\" icon=\"el-icon-setting\"></el-button>\n                </div>\n            </el-popover>\n        </div>\n        <router-view></router-view>\n    </DefaultLayout>\n</template>\n\n<script>\nimport Search from \"@/components/common/search.vue\";\nimport CommonNav from \"@/components/common/nav.vue\";\nimport QuestNav from \"@/components/quest/nav.vue\";\nimport DefaultLayout from \"@/layout/default-layout.vue\";\n\nimport { getPlayerName } from \"@/utils/quest\";\nexport default {\n    name: \"Quest\",\n    components: { QuestNav, CommonNav, DefaultLayout, Search },\n    data() {\n        return {\n            placeholder: \"输入任务关键字（可包括中括号），「回车」进行搜索\",\n            chain: false,\n            settingVisible: false,\n            playerName: \"侠士\",\n            playerBody: \"少侠\",\n        };\n    },\n    methods: {\n        search(keyword) {\n            this.$router.push({\n                name: \"result\",\n                query: { keyword: keyword, chain: this.chain },\n            });\n        },\n        handlePlayerInfoChange() {\n            localStorage.setItem(\"QuestWiki:playerName\", this.playerName);\n            localStorage.setItem(\"QuestWiki:playerBody\", this.playerBody);\n        },\n    },\n    mounted() {\n        const { playerName, playerBody } = getPlayerName();\n        this.playerName = playerName;\n        this.playerBody = playerBody;\n    },\n};\n</script>\n<style lang=\"less\">\n@import \"~@/assets/css/app.less\";\n.m-search-wrap {\n    .flex;\n    width: 100%;\n    align-items: center;\n\n    @media screen and (min-width: 768px) {\n        .el-input-group__append {\n            .u-input-button__small {\n                .none;\n            }\n        }\n    }\n\n    @media screen and (max-width: 768px) {\n        .el-input-group__append {\n            .u-input-button__normal {\n                .none;\n            }\n        }\n    }\n\n    & > span:last-of-type {\n        flex-shrink: 0;\n    }\n    .u-player {\n        .flex;\n        padding: 0 12px 10px 12px;\n        align-items: center;\n        .fz(14px, 1.5);\n        .el-button {\n            .ml(2px);\n        }\n    }\n\n    .u-tips {\n        margin: 0 0 0 8px !important;\n    }\n}\n\n.u-player-setting-popover {\n    .el-input {\n        margin-bottom: 6px;\n    }\n}\n@media screen and (max-width: @phone) {\n    .m-search-wrap .u-player {\n        .none;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./quest.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./quest.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./quest.vue?vue&type=template&id=1477d701\"\nimport script from \"./quest.vue?vue&type=script&lang=js\"\nexport * from \"./quest.vue?vue&type=script&lang=js\"\nimport style0 from \"./quest.vue?vue&type=style&index=0&id=1477d701&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}