(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29bb8d7c"],{"0636":function(t,e,i){t.exports=i.p+"img/tog_15.1f7bb44b.svg"},"0768":function(t,e,i){t.exports=i.p+"img/tog_17.6d3efb0a.svg"},"07cb":function(t,e,i){t.exports=i.p+"img/tog_12.eb4b8e89.svg"},"0a8a":function(t,e,i){t.exports=i.p+"img/tog_41.e54c1e63.svg"},"0c74":function(t,e,i){t.exports=i.p+"img/tog_9.63ff7127.svg"},"11f9":function(t,e,i){t.exports=i.p+"img/finish.c82022e3.svg"},"13d5":function(t,e,i){"use strict";var s=i("23e7"),n=i("d58f").left,o=i("a640"),r=i("1212"),a=i("9adc"),c=!a&&r>79&&r<83,l=c||!o("reduce");s({target:"Array",proto:!0,forced:l},{reduce:function(t){var e=arguments.length;return n(this,t,e,e>1?arguments[1]:void 0)}})},1450:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("41cb"),n=function(){return Object(s["f"])().get("api/team/my-game-roles?nopage&custom=0")}},"1aa3":function(t,e,i){t.exports=i.p+"img/tog_2.8ae213ab.svg"},"1b89":function(t,e,i){t.exports=i.p+"img/tog_17.5c8b5a5e.svg"},"1d4a":function(t,e,i){var s={"./Dark/improvement.svg":"6886","./Light/improvement.svg":"ac01"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="1d4a"},2372:function(t,e,i){t.exports=i.p+"img/tog_7.d065990e.svg"},2681:function(t,e,i){t.exports=i.p+"img/tog_6.fd7052b7.svg"},"27aa":function(t,e,i){t.exports=i.p+"img/tog_41.867bbf38.svg"},"2b7a":function(t,e,i){t.exports=i.p+"img/unfinished.e9a234a5.svg"},"2cfb":function(t,e,i){t.exports=i.p+"img/tog_13.741ac369.svg"},"33a5":function(t){t.exports=JSON.parse('{"0":"江湖","1":"天策","2":"万花","3":"纯阳","4":"七秀","5":"少林","6":"藏剑","7":"丐帮","8":"明教","9":"五毒","10":"唐门","18":"苍云","19":"长歌","20":"霸刀","21":"蓬莱","22":"凌雪","23":"衍天","24":"药宗","26":"刀宗","29":"万灵","38":"段氏","39":"无相"}')},3822:function(t,e,i){t.exports=i.p+"img/tog_4.ae3c48b4.svg"},3835:function(t,e,i){"use strict";function s(t){if(Array.isArray(t))return t}i.d(e,"a",(function(){return a}));i("a4d3"),i("e01a"),i("d28b"),i("14d9"),i("d3b7"),i("3ca3"),i("ddb0");function n(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,o,r,a=[],c=!0,l=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;c=!1}else for(;!(c=(s=o.call(i)).done)&&(a.push(s.value),a.length!==e);c=!0);}catch(t){l=!0,n=t}finally{try{if(!c&&null!=i["return"]&&(r=i["return"](),Object(r)!==r))return}finally{if(l)throw n}}return a}}var o=i("06c5");i("d9e2");function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){return s(t)||n(t,e)||Object(o["a"])(t,e)||r()}},"3a30":function(t,e,i){t.exports=i.p+"img/search_black.8d2ab45b.svg"},"3ba9":function(t,e,i){var s={"./Dark/comparison.svg":"c5bf","./Dark/count.svg":"ac83","./Dark/improvement.svg":"6886","./Dark/jia.svg":"7bad","./Dark/quan.svg":"d3fa","./Dark/right.svg":"fb970","./Dark/search.svg":"dfcb","./Dark/shaixuan.svg":"ea5b","./Dark/sum.svg":"7176","./Dark/tog_1.svg":"7a8e","./Dark/tog_10.svg":"852b","./Dark/tog_11.svg":"8029","./Dark/tog_12.svg":"984b","./Dark/tog_13.svg":"2cfb","./Dark/tog_15.svg":"9ca0","./Dark/tog_16.svg":"be26","./Dark/tog_17.svg":"0768","./Dark/tog_2.svg":"1aa3","./Dark/tog_3.svg":"bbdc","./Dark/tog_4.svg":"484b","./Dark/tog_40.svg":"fc87","./Dark/tog_41.svg":"27aa","./Dark/tog_5.svg":"d1be","./Dark/tog_6.svg":"2681","./Dark/tog_7.svg":"b4e8","./Dark/tog_8.svg":"d1e9","./Dark/tog_9.svg":"45e1","./Light/comparison.svg":"fb2b","./Light/count.svg":"8fe4","./Light/improvement.svg":"ac01","./Light/jia.svg":"e51b","./Light/quan.svg":"a8cd","./Light/right.svg":"5904","./Light/search.svg":"9bd5","./Light/shaixuan.svg":"a106","./Light/sum.svg":"f1ba","./Light/tog_1.svg":"680e","./Light/tog_10.svg":"88a5","./Light/tog_11.svg":"4828","./Light/tog_12.svg":"07cb","./Light/tog_13.svg":"f312","./Light/tog_15.svg":"0636","./Light/tog_16.svg":"d168","./Light/tog_17.svg":"1b89","./Light/tog_2.svg":"63ee","./Light/tog_3.svg":"8c41","./Light/tog_4.svg":"3822","./Light/tog_40.svg":"45f1","./Light/tog_41.svg":"0a8a","./Light/tog_5.svg":"a299","./Light/tog_6.svg":"9edd","./Light/tog_7.svg":"2372","./Light/tog_8.svg":"4ead","./Light/tog_9.svg":"0c74","./finish.svg":"11f9","./search_black.svg":"3a30","./unfinished.svg":"2b7a","./warning.svg":"5720"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="3ba9"},"45e1":function(t,e,i){t.exports=i.p+"img/tog_9.b91da4f4.svg"},"45f1":function(t,e,i){t.exports=i.p+"img/tog_40.8f4e8cc1.svg"},"478d":function(t,e,i){},4828:function(t,e,i){t.exports=i.p+"img/tog_11.57cbcc0f.svg"},"484b":function(t,e,i){t.exports=i.p+"img/tog_4.cc4bee1c.svg"},"4ead":function(t,e,i){t.exports=i.p+"img/tog_8.bc15415d.svg"},"4eaf":function(t,e,i){var s={"./Dark/count.svg":"ac83","./Light/count.svg":"8fe4"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="4eaf"},5720:function(t,e,i){t.exports=i.p+"img/warning.c59d3be8.svg"},5904:function(t,e,i){t.exports=i.p+"img/right.258873ca.svg"},"63ee":function(t,e,i){t.exports=i.p+"img/tog_2.6d3d6ed7.svg"},"680e":function(t,e,i){t.exports=i.p+"img/tog_1.93447118.svg"},6886:function(t,e,i){t.exports=i.p+"img/improvement.c17a031c.svg"},"700f":function(t,e,i){var s={"./Dark/right.svg":"fb970","./Light/right.svg":"5904"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="700f"},7176:function(t,e,i){t.exports=i.p+"img/sum.2d38a1fd.svg"},"7a8e":function(t,e,i){t.exports=i.p+"img/tog_1.ee8ab329.svg"},"7bad":function(t,e,i){t.exports=i.p+"img/jia.a4ed607e.svg"},8029:function(t,e,i){t.exports=i.p+"img/tog_11.fe0a7d76.svg"},"852b":function(t,e,i){t.exports=i.p+"img/tog_10.2f0ed734.svg"},"88a5":function(t,e,i){t.exports=i.p+"img/tog_10.4bea69ad.svg"},"8c41":function(t,e,i){t.exports=i.p+"img/tog_3.e4ec62c3.svg"},"8fe4":function(t,e,i){t.exports=i.p+"img/count.6033f8f4.svg"},"984b":function(t,e,i){t.exports=i.p+"img/tog_12.f3a07dcf.svg"},"9a1b":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return o}));var s=i("41cb");function n(){return Object(s["a"])().get("/api/cms/user/my/info").then((function(t){return t.data.data}))}function o(t){return Object(s["a"])().post("/api/cms/system/common/reporter")}},"9bd5":function(t,e,i){t.exports=i.p+"img/search.781ce470.svg"},"9ca0":function(t,e,i){t.exports=i.p+"img/tog_15.2b6a6cf7.svg"},"9e15":function(t,e,i){},"9edd":function(t,e,i){t.exports=i.p+"img/tog_6.19bcab65.svg"},a01f:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("img",{attrs:{src:t.showAvatar(t.mount,t.body_type)}})},n=[],o=i("01ea"),r={name:"roleAvatar",props:["mount","body_type"],components:{},data:function(){return{}},computed:{},methods:{showAvatar:function(t,e){return o["c"]+"design/avatar/xisai/"+t+"-"+e+".png"}},filters:{},created:function(){},mounted:function(){}},a=r,c=i("2877"),l=Object(c["a"])(a,s,n,!1,null,null,null);e["a"]=l.exports},a299:function(t,e,i){t.exports=i.p+"img/tog_5.b1775791.svg"},a8cd:function(t,e,i){t.exports=i.p+"img/quan.b9b6f7b4.svg"},ac01:function(t,e,i){t.exports=i.p+"img/improvement.5709fa8f.svg"},ac83:function(t,e,i){t.exports=i.p+"img/count.e9081d68.svg"},b4e8:function(t,e,i){t.exports=i.p+"img/tog_7.0dea2d20.svg"},b909:function(t,e,i){"use strict";i("9e15")},bbdc:function(t,e,i){t.exports=i.p+"img/tog_3.a580ed01.svg"},bc1f:function(t,e,i){"use strict";i("478d")},be26:function(t,e,i){t.exports=i.p+"img/tog_16.ffa7d0d0.svg"},c5bf:function(t,e,i){t.exports=i.p+"img/comparison.dfcc1cad.svg"},c70e:function(t,e,i){var s={"./Dark/comparison.svg":"c5bf","./Light/comparison.svg":"fb2b"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="c70e"},d168:function(t,e,i){t.exports=i.p+"img/tog_16.7901e7f6.svg"},d1be:function(t,e,i){t.exports=i.p+"img/tog_5.40c9a70c.svg"},d1e9:function(t,e,i){t.exports=i.p+"img/tog_8.df78604c.svg"},d3fa:function(t,e,i){t.exports=i.p+"img/quan.f7959a84.svg"},d58f:function(t,e,i){"use strict";var s=i("59ed"),n=i("7b0b"),o=i("44ad"),r=i("07fa"),a=TypeError,c="Reduce of empty array with no initial value",l=function(t){return function(e,i,l,u){var g=n(e),v=o(g),f=r(g);if(s(i),0===f&&l<2)throw new a(c);var d=t?f-1:0,h=t?-1:1;if(l<2)while(1){if(d in v){u=v[d],d+=h;break}if(d+=h,t?d<0:f<=d)throw new a(c)}for(;t?d>=0:f>d;d+=h)d in v&&(u=i(u,v[d],d,g));return u}};t.exports={left:l(!1),right:l(!0)}},dfcb:function(t,e,i){t.exports=i.p+"img/search.4918b175.svg"},e00d:function(t,e,i){var s={"./Dark/sum.svg":"7176","./Light/sum.svg":"f1ba"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="e00d"},e256:function(t,e,i){"use strict";i.r(e);i("b0c0"),i("4c53");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mini-program-overview"},[e("div",{staticClass:"user-info-section"},[e("div",{staticClass:"avatar-container"},[e("div",{staticClass:"avatar-bg"},[t.avatar_frame?e("img",{staticClass:"u-avatar-border",attrs:{src:t.avatar_frame,alt:"头像边框"}}):t._e(),e("RoleAvatar",{staticClass:"u-avatar-img",attrs:{mount:t.currentRole.mount,body_type:t.currentRole.body_type}})],1)]),e("div",{staticClass:"user-name",on:{click:t.openRoleDrawer}},[t._v(t._s(t.currentRole.name))]),e("div",{staticClass:"user-detail"},[e("img",{staticClass:"hb-icon",attrs:{width:"30",height:"30",src:t.mpAvatar}}),e("span",[t._v(" "+t._s(t.xfName)+" ")]),e("span",[t._v(" "+t._s(t.currentRole.server)+" ")])])]),e("div",{staticClass:"total-progress"},[e("div",{staticClass:"progress-info"},[e("span",{staticClass:"progress-percentage"},[t._v(t._s(t.totalProgress)),e("span",[t._v("%")])]),e("span",{staticClass:"progress-value"},[t._v(" "+t._s(t.ownPointsCountW)),e("span",[t._v(t._s(t.ownPointsCountOther))])])]),e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"progress-fill",style:{width:t.totalProgress+"%"}})])]),e("div",{staticClass:"friend-comparison"},[e("div",{staticClass:"section-title"},[e("div",{staticClass:"title-content",on:{click:function(e){return t.handleClickBtn("friendComparison")}}},[e("img",{staticClass:"u-icon-left",attrs:{height:"24",src:i("c70e")("./".concat(t.isDark?"Dark":"Light","/comparison.svg"))}}),t._v(" 亲友对比 ")]),e("img",{staticClass:"u-icon-right",attrs:{height:"14",src:i("700f")("./".concat(t.isDark?"Dark":"Light","/right.svg"))}})]),e("div",{staticClass:"section-title disabled"},[e("div",{staticClass:"title-content"},[e("img",{staticClass:"u-icon-left",attrs:{height:"24",src:i("1d4a")("./".concat(t.isDark?"Dark":"Light","/improvement.svg"))}}),t._v(" 渡劫方案 ")]),e("img",{staticClass:"u-icon-right",attrs:{height:"14",src:i("700f")("./".concat(t.isDark?"Dark":"Light","/right.svg"))}})])]),e("div",{staticClass:"progress-overview"},[t._m(0),e("div",{staticClass:"category-progress"},t._l(t.list,(function(s,n){return e("div",{key:n,staticClass:"progress-card",on:{click:function(e){return t.handleClick(s)}}},[e("div",{staticClass:"u-top-detailed"},[e("div",{staticClass:"u-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"progress-bar-small"},[e("div",{staticClass:"progress-fill",style:{width:t.getCurrentProgress(s.ownPoints,s.allPoints)+"%"}})]),e("div",{staticClass:"progress-percentage-small"},[t._v(" "+t._s(t.getCurrentProgress(s.ownPoints,s.allPoints))+"% ")]),e("div",{staticClass:"u-info"},[e("div",{staticClass:"u-num"},[e("img",{attrs:{width:"14",height:"14",src:i("4eaf")("./".concat(t.isDark?"Dark":"Light","/count.svg")),alt:"成就logo"}}),t._v(" "+t._s(s.ownAchievements.length)+"/"+t._s(s.allAchievements.length)+" ")]),e("div",{staticClass:"u-num"},[e("img",{attrs:{width:"14",height:"14",src:i("e00d")("./".concat(t.isDark?"Dark":"Light","/sum.svg")),alt:"资历logo"}}),t._v(" "+t._s(s.ownPoints)+"/"+t._s(s.allPoints)+" ")])])]),e("div",{staticClass:"u-icon"},[e("img",{staticClass:"hb-icon",attrs:{src:t.getIconPath(s.sub),alt:"","svg-inline":""}})])])})),0)]),e("el-drawer",{staticClass:"c-mode-list-drawer",attrs:{title:"显示模式",visible:t.drawerModeVisible,direction:"btt",size:"280px"},on:{close:t.handleModeClose}},[e("div",{staticClass:"mode-list-container"},t._l(t.modeType,(function(i,s){return e("div",{key:s,staticClass:"mode-item",class:{selected:t.isSimpleModeSelect==i.value},on:{click:function(e){return t.toggleMode(i.value)}}},[e("div",{staticClass:"mode-name"},[t._v(t._s(i.name))]),e("div",{staticClass:"mode-detail"},[t._v(t._s(i.detail))])])})),0),e("div",{staticClass:"mode-button-group"},[e("el-button",{staticClass:"u-reset",on:{click:t.resetMode}},[t._v("重置")]),e("el-button",{staticClass:"u-submit",on:{click:t.confirmMode}},[t._v("确定")])],1)]),e("RoleListVue",{attrs:{visible:t.drawerVisible,roles:t.roleList,currentRole:t.currentRole},on:{"update:visible":function(e){t.drawerVisible=e},confirmSelection:t.handleConfirmSelection}})],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-header"},[e("div",{staticClass:"section-title"},[t._v("进度概览")])])}],o=(i("99af"),i("7db0"),i("caad"),i("d81d"),i("14d9"),i("13d5"),i("fb6a"),i("e9c4"),i("b680"),i("b64b"),i("d3b7"),i("25f0"),i("2532"),i("159b"),i("c9d2")),r=i("85e4"),a=i("33a5"),c=i("262e"),l=i("1450"),u=i("9a1b"),g=i("01ea"),v=i("65c2"),f=i("a01f"),d=function(){var t=this,e=t._self._c;return e("el-drawer",{staticClass:"c-role-list-drawer",attrs:{title:"选择角色",visible:t.drawerVisible,direction:"btt",size:"420px"},on:{close:t.handleClose}},[e("div",{staticClass:"role-list-wrapper"},[e("div",{ref:"roleListContainer",staticClass:"role-list-container"},[e("div",{staticClass:"role-items"},t._l(t.roles,(function(i,s){return e("div",{key:s,staticClass:"role-item",class:{selected:t.selectedRole.jx3id==i.jx3id},on:{click:function(e){return t.selectRole(i)}}},[e("div",{staticClass:"u-img"},[e("RoleAvatar",{staticClass:"u-avatar-img",attrs:{mount:i.mount,body_type:i.body_type}}),e("div",{staticClass:"role-name"},[t._v(t._s(i.name))])],1),e("div",{staticClass:"role-info",domProps:{innerHTML:t._s("<".concat(i.server,">"))}})])})),0)]),e("div",{staticClass:"role-button-group"},[e("el-button",{staticClass:"u-reset",on:{click:t.resetSelection}},[t._v("重置")]),e("el-button",{staticClass:"u-submit",on:{click:t.confirmSelection}},[t._v("确定")])],1),t.showMask?e("div",{staticClass:"bottom-mask"}):t._e()])])},h=[],m={name:"RoleList",components:{RoleAvatar:f["a"]},props:{visible:{type:Boolean,default:!1},roles:{type:Array,default:function(){return[]}},currentRole:{type:Object,default:function(){return{}}}},computed:{drawerVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{selectedRole:null,showMask:!1}},watch:{drawerVisible:function(t){var e=this;t?this.$nextTick((function(){e.$refs.roleListContainer&&(e.$refs.roleListContainer.addEventListener("scroll",e.checkScrollPosition),e.checkScrollPosition())})):this.removeScrollListener()},currentRole:{handler:function(t){t&&(this.selectedRole=t)},deep:!0,immediate:!0}},beforeDestroy:function(){this.removeScrollListener()},methods:{showSchoolIcon:r["s"],removeScrollListener:function(){this.$refs.roleListContainer&&this.$refs.roleListContainer.removeEventListener("scroll",this.checkScrollPosition)},selectRole:function(t){this.selectedRole=t},resetSelection:function(){this.selectedRole=this.currentRole},confirmSelection:function(){null!==this.selectedRole&&(this.$emit("confirmSelection",this.selectedRole),this.drawerVisible=!1)},handleClose:function(){this.drawerVisible=!1},checkScrollPosition:function(){if(this.$refs.roleListContainer){var t=this.$refs.roleListContainer,e=t.scrollHeight,i=t.clientHeight,s=t.scrollTop,n=e-(i+s);this.showMask=n>40}}}},p=m,b=(i("bc1f"),i("2877")),_=Object(b["a"])(p,d,h,!1,null,null,null),C=_.exports,k=i("7720"),w={name:"OverviewMiniProgram",components:{RoleAvatar:f["a"],RoleListVue:C},data:function(){return{userInfo:{},roleList:[],currentRole:{},drawerVisible:!1,isSimpleMode:!1,isSimpleModeSelect:!0,drawerModeVisible:!1,modeType:[{name:"简略模式",detail:"<只显示百分比进度>",value:!0},{name:"详细模式",detail:"<显示成就数和资历数>",value:!1}],achievementData:[],pointsData:{},list:[],allPointsCount:0,ownPointsCount:0,ownPointsCountW:null,ownPointsCountOther:0}},computed:{isDark:function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return t.matches},avatar_frame:function(){if(this.userInfo){var t=this.userInfo.user_avatar_frame;if(t)return g["e"]+"avatar/images/".concat(t,"/").concat(t,".svg")}return null},totalProgress:function(){return this.ownPointsCount||this.allPointsCount?(this.ownPointsCount/this.allPointsCount*100).toFixed(2):0},xfName:function(){return this.currentRole.mount&&a[this.currentRole.mount]||""},mpAvatar:function(){return this.currentRole.mount?v["__cdn"]+"design/vector/school/".concat(this.currentRole.mount,".svg"):null}},watch:{currentRole:{deep:!0,immediate:!0,handler:function(t){if(t){console.log("juse",t);var e=t.jx3id;e&&(this.$store.commit("SET_STATE",{key:"achievementsVirtual",value:[]}),this.loadRoleAchievements(e))}}}},created:function(){document.title="资历宝典",this.getUserInfo()},methods:{showSchoolIcon:r["s"],handleClickBtn:function(t){"friendComparison"===t&&this.$router.push({name:"compare",query:{}})},handleClick:function(t){sessionStorage.setItem("category_data",JSON.stringify(t||{})),Object(k["b"])(this.$router.resolve({name:"catalogue",query:{}}).href)},getIconPath:function(t){return i("3ba9")("./".concat(this.isDark?"Dark":"Light","/tog_").concat(t,".svg"))},toggleMode:function(t){this.isSimpleModeSelect=t},handleModeClose:function(){this.drawerModeVisible=!1},resetMode:function(){this.isSimpleModeSelect=!0},confirmMode:function(){this.isSimpleMode=this.isSimpleModeSelect,this.drawerModeVisible=!1},getUserInfo:function(){var t=this;o["a"].isLogin()?Object(u["a"])().then((function(e){t.userInfo=e,t.getList()})):this.$confirm("请先登录再使用")},loadUserRoles:function(){var t=this;Object(l["a"])().then((function(e){var i,s;t.roleList=(null===(i=e.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.list)||[],sessionStorage.setItem("wiki_my_roles",JSON.stringify(t.roleList||[]));var n=sessionStorage.getItem("wiki_last_sync");n&&"0"!==n?(t.currentRole=t.roleList.find((function(t){return t.jx3id==n}))||"",sessionStorage.setItem("wiki_last_sync",t.currentRole.jx3id||0),t.$store.commit("SET_STATE",{key:"role",value:t.currentRole})):t.roleList.length&&(t.currentRole=t.roleList[0],sessionStorage.setItem("wiki_last_sync",t.currentRole.jx3id||0),t.$store.commit("SET_STATE",{key:"role",value:t.currentRole}))}))},loadRoleAchievements:function(t){var e=this;Object(c["m"])(t).then((function(t){var i,s,n,o,r=(null===(i=t.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.achievements)||"",a=null===(n=t.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.jx3id;e.isSync=!!a;var c=r.split(",");e.$store.commit("SET_STATE",{key:"achievements",value:c,isSession:!0}),sessionStorage.setItem("achievements",JSON.stringify(c||[])),e.getRenderList()}))},openRoleDrawer:function(){this.drawerVisible=!0},handleConfirmSelection:function(t){console.log(t),this.currentRole=t,this.drawerVisible=!1},getList:function(){var t=this;Object(c["i"])({general:1,client:this.$store.state.client}).then((function(e){var i=e.data.data.menus;t.achievementData=i,t.getPoints()}))},getPoints:function(){var t=this;Object(c["b"])().then((function(e){var i=e.data.data.points;t.pointsData=i,sessionStorage.setItem("points_data",JSON.stringify(i||{})),t.loadUserRoles()}))},getAllAchievementsData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allPoints:0,ownPoints:0},o=this.$store.state.achievements;return t.achievements.forEach((function(t){Array.isArray(t)?t.forEach((function(t){e.pointsData[t]&&(n.allPoints+=e.pointsData[t],i.push(t),o.includes(String(t))&&(n.ownPoints+=e.pointsData[t],s.push(t)))})):e.pointsData[t]&&(n.allPoints+=e.pointsData[t],i.push(t),o.includes(String(t))&&(n.ownPoints+=e.pointsData[t],s.push(t)))})),t.children&&t.children.forEach((function(t){e.getAllAchievementsData(t,i,s,n)})),{allAchievements:i,allPoints:n.allPoints,ownAchievements:s,ownPoints:n.ownPoints}},getRenderList:function(t){var e=this;t=t||this.achievementData;var i=Object.keys(t).map((function(i){var s=t[i],n=e.getAllAchievementsData(s);return{sub:s.sub,detail:s.detail,name:s.name,allAchievements:n.allAchievements,ownAchievements:n.ownAchievements,children:s.children,allPoints:n.allPoints,ownPoints:n.ownPoints}}));this.list=i,this.allPointsCount=i.reduce((function(t,e){return t+e.allPoints}),0);var s=this.$store.state.achievements;this.ownPointsCount=s.reduce((function(t,i){return t+(e.pointsData[i]||0)}),0);var n=this.ownPointsCount.toString();n.length>4?(this.ownPointsCountW=n.slice(0,-4),this.ownPointsCountOther=n.slice(-4)):(this.ownPointsCountW="",this.ownPointsCountOther=n)},getCurrentProgress:function(t,e){return(t/e*100).toFixed(2)}}},x=w,D=(i("b909"),Object(b["a"])(x,s,n,!1,null,null,null));e["default"]=D.exports},e51b:function(t,e,i){t.exports=i.p+"img/jia.748a1596.svg"},f1ba:function(t,e,i){t.exports=i.p+"img/sum.a2f21be4.svg"},f312:function(t,e,i){t.exports=i.p+"img/tog_13.5711bcbb.svg"},fb2b:function(t,e,i){t.exports=i.p+"img/comparison.389bdb0c.svg"},fb970:function(t,e,i){t.exports=i.p+"img/right.b843a32f.svg"},fc87:function(t,e,i){t.exports=i.p+"img/tog_40.ef7c5acf.svg"}}]);