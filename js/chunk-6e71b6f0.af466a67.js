(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e71b6f0"],{1344:function(t,e,i){"use strict";e["a"]=function(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map((function(t){t(i)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,i)}))}}}},1441:function(t,e,i){"use strict";i("d2ca")},"1c47":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return t.hasContent&&!t.isRobot?e("div",{staticClass:"m-achievement-single",class:{fold:t.fold,hidden:t.isHidden}},[t.initFold&&t.isLogin&&t.isVirtual?e("el-checkbox",{staticClass:"u-achievement-checkbox",model:{value:t.achievement.checked,callback:function(e){t.$set(t.achievement,"checked",e)},expression:"achievement.checked"}}):t._e(),e("div",{staticClass:"u-header"},[e("a",{staticClass:"u-title",attrs:{target:t.targetable},on:{click:function(e){return t.url_filter(t.achievement.ID)}}},[t.isLogin?[t.isVirtual?e("i",{staticClass:"m-achievement-status u-attr u-fav u-complete-status el-tag--light el-tag",class:t.completedVirtual?"el-tag--success":"el-tag--warning"},[e("i",{class:t.completedVirtual?"el-icon-check":"el-icon-warning-outline"}),t._v(" "+t._s(t.completedVirtualText)+" ")]):e("i",{staticClass:"m-achievement-status u-attr u-fav u-complete-status el-tag--light el-tag",class:t.completed?"el-tag--success":"el-tag--warning"},[e("i",{class:t.completed?"el-icon-check":"el-icon-warning-outline"}),t._v(" "+t._s(t.completedText)+" ")])]:t._e(),e("span",{staticClass:"u-title-text"},[t._v(t._s(t.achievement.Name))])],2),e("div",{staticClass:"u-other"},[e("span",{staticClass:"u-attr",domProps:{textContent:t._s(t.achievement.post?"修订时间："+t.ts2str(t.achievement.post.updated):"")}}),e("span",{staticClass:"u-attr",domProps:{textContent:t._s(t.achievement.post?"综合难度："+t.star(t.achievement.post.level):"")}}),t.isLogin&&t.isVirtual?[t.completedVirtual?e("el-button",{staticClass:"u-attr u-fav u-check",attrs:{type:"success",size:"mini",icon:"el-icon-check"},on:{click:function(e){return e.stopPropagation(),t.cancelVirtual()}}},[t._v(" 取消完成 ")]):e("el-button",{staticClass:"u-attr u-fav u-check",attrs:{plain:"",size:"mini",icon:"el-icon-check"},on:{click:function(e){return e.stopPropagation(),t.finishVirtual()}}},[t._v(" 设为完成 ")])]:t._e(),t.isLogin&&!t.isVirtual?[e("el-button",{staticClass:"u-attr u-fav",attrs:{plain:"",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),t.onAppendToLeapSchema.apply(null,arguments)}}},[t._v(" 加入渡劫方案 ")])]:t._e(),t.showFavorite?e("Fav",{staticClass:"u-attr u-fav",attrs:{"post-type":"achievement","post-title":t.favTitle,"post-id":t.achievement.ID}}):t._e()],2)]),e("div",{staticClass:"u-body"},[e("div",{staticClass:"u-left",on:{click:function(e){return t.url_filter(t.achievement.ID)}}},[e("div",{staticClass:"u-attr u-icon"},[e("img",{attrs:{src:t.icon_url(t.achievement.IconID)},on:{"~error":function(e){return function(){e.target.src=t.icon_url()}.apply(null,arguments)}}})]),e("div",{staticClass:"u-attr u-desc",domProps:{innerHTML:t._s(t.achievementDesc)}})]),e("div",{staticClass:"u-right"},[e("item-simple",{staticClass:"u-attr u-item-simple",attrs:{item:t.achievement.Item,"only-icon":"true","icon-size":"36px"}}),e("div",{staticClass:"u-attr u-point",domProps:{textContent:t._s(t.achievement.Point?t.achievement.Point:0)}})],1)]),e("div",{staticClass:"u-footer"},[t.achievement.Prefix||t.achievement.Postfix?e("div",{staticClass:"u-ch"},[t.achievement.PrefixName?e("div",{domProps:{textContent:t._s("称号前缀："+t.achievement.PrefixName)}}):t._e(),t.achievement.PostfixName?e("div",{domProps:{textContent:t._s("称号后缀："+t.achievement.PostfixName)}}):t._e()]):t._e(),t.achievement.SubAchievementList?e("el-row",{staticClass:"u-subs",attrs:{gutter:30}},t._l(t.achievement.SubAchievementList,(function(i,n){return e("el-col",{key:n,staticClass:"u-sub",attrs:{xs:12,sm:8,md:8}},[e("router-link",{attrs:{to:1==i.Visible?{name:"view",params:{source_id:i.ID}}:{},target:"_blank"}},[e("img",{staticClass:"u-icon",attrs:{src:t.icon_url(i.IconID)}}),e("span",{domProps:{textContent:t._s(i.Name)}})])],1)})),1):t._e(),t.achievement.SeriesAchievementList?e("div",{staticClass:"u-seriess"},t._l(t.achievement.SeriesAchievementList,(function(i,n){return e("div",{key:n,staticClass:"u-series",class:i.ID==t.achievement.ID?"active":""},[e("router-link",{attrs:{to:{name:"view",params:{source_id:i.ID}}}},[e("div",{staticClass:"u-status"},[t.hadCompleted(i.ID)?e("span",{staticClass:"u-check"},[t._v("已完成")]):e("span",{staticClass:"u-close"},[t._v("待完成")])]),e("img",{staticClass:"u-icon",attrs:{src:t.icon_url(i.IconID)}}),e("div",{staticClass:"detail"},[e("h4",{domProps:{textContent:t._s(i.Name)}}),e("p",{domProps:{innerHTML:t._s(t.description_filter(i.ShortDesc))}})])]),t.isLogin&&t.isVirtual?e("div",{staticClass:"u-op"},[t.hadCompleted(i.ID)?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消完成",placement:"bottom"}},[e("i",{staticClass:"u-icon el-icon-close",on:{click:function(e){return e.stopPropagation(),t.cancelVirtual(i.ID)}}})]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设为完成",placement:"bottom"}},[e("i",{staticClass:"u-icon el-icon-check",attrs:{title:"设为完成"},on:{click:function(e){return e.stopPropagation(),t.finishVirtual(i.ID)}}})])],1):t._e()],1)})),0):t._e()],1),t.empty?t._e():e("div",{staticClass:"u-expand",class:{disable:t.empty},on:{click:function(e){t.fold=!t.fold}}},[e("hr"),e("i",{staticClass:"u-icon el-icon-caret-top"}),e("i",{staticClass:"u-icon el-icon-caret-bottom"})])],1):e("div",{staticClass:"m-achievement-single__robot"},[e("div",{staticClass:"u-top"},[e("div",{staticClass:"u-top__left"},[e("img",{staticClass:"u-icon",attrs:{src:t.icon_url(t.achievement.IconID)},on:{"~error":function(e){return function(){e.target.src=t.icon_url()}.apply(null,arguments)}}}),e("div",{staticClass:"u-title"},[t._v(t._s(t.achievement.Name))])]),e("div",{staticClass:"u-right u-top__right"},[e("div",{staticClass:"u-point",domProps:{textContent:t._s(t.achievement.Point?t.achievement.Point:0)}})])]),e("div",{staticClass:"u-bottom"},[e("span",[t._v("成就描述：")]),e("span",{staticClass:"u-desc",domProps:{innerHTML:t._s(t.achievementDesc)}})])])},s=[],a=(i("99af"),i("4de4"),i("caad"),i("a15b"),i("14d9"),i("b0c0"),i("e9f5"),i("d866"),i("910d"),i("7d54"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("5319"),i("498a"),i("159b"),i("85e4")),c=i("7a5f"),r=i("3d2f"),o=i("262e"),u=i("c9d2"),l=i("52da"),m={name:"AchievementSingle",components:{"item-simple":c["a"]},props:["achievement","initFold","target","jump","showFavorite","isRobot"],data:function(){return{fold:!0}},computed:{routeName:function(){return this.$route.name},empty:function(){return!(this.achievement.Prefix||this.achievement.Postfix||this.achievement.SubAchievementList||this.achievement.SeriesAchievementList)},targetable:function(){return this.target||"undefined"!==typeof this.target?this.target:""},client:function(){return this.$store.state.client},hasContent:function(){return this.achievement&&Object.keys(this.achievement).length},achievementDesc:function(){var t;return((null===(t=this.achievement)||void 0===t?void 0:t.Desc)||"").replace(/\\n/g,"<br />")},currentRole:function(){return this.$store.state.role},completeAchievements:function(){return this.$store.state.achievements||[]},completed:function(){var t=this;if("view"!==this.routeName&&this.achievement.Series){var e=this.achievement.Series.split("|");return e.every((function(e){return t.completeAchievements.includes(e)}))}return this.completeAchievements.includes(this.achievement.ID+"")},completedText:function(){var t=this;if("view"!==this.routeName&&this.achievement.Series){var e=0,i=this.achievement.Series.split("|");i.forEach((function(i){t.completeAchievements.includes(i)&&e++}));var n=i.length;return this.completed?"已完成":"待完成(".concat(e,"/").concat(n,")")}return this.completed?"已完成":"待完成"},isLogin:function(){return u["a"].isLogin()},favTitle:function(){var t;return null===(t=this.achievement)||void 0===t?void 0:t.Name},isVirtual:function(){var t;return!(null!==(t=this.currentRole)&&void 0!==t&&t.jx3id)},onlyUncompleted:function(){return this.$store.state.onlyUncompleted},isHidden:function(){var t=this.isVirtual?this.completedVirtual:this.completed;return this.onlyUncompleted&&t&&"view"!==this.routeName},achievementsVirtual:function(){return this.$store.state.achievementsVirtual||[]},completedVirtual:function(){var t=this;if("view"!==this.routeName&&this.achievement.Series){var e=this.achievement.Series.split("|");return e.every((function(e){return t.achievementsVirtual.includes(e)}))}return this.achievementsVirtual.includes(this.achievement.ID+"")},completedVirtualText:function(){var t=this;if("view"!==this.routeName&&this.achievement.Series){var e=0,i=this.achievement.Series.split("|");i.forEach((function(i){t.achievementsVirtual.includes(i)&&e++}));var n=i.length;return this.completedVirtual?"已完成":"待完成(".concat(e,"/").concat(n,")")}return this.completedVirtual?"已完成":"待完成"}},watch:{initFold:{immediate:!0,handler:function(t){this.fold=t}}},methods:{onAppendToLeapSchema:function(){l["a"].emit("append-to-leap-schema",this.achievement.ID)},hadCompleted:function(t){var e=this.isVirtual?this.achievementsVirtual:this.completeAchievements;return e.includes(t+"")},ts2str:a["t"],star:r["a"],icon_url:function(t){return Object(a["l"])(t,this.client)},url_filter:function(t){!0!==this.jump&&"undefined"!==typeof this.jump||(this.$store.state.scroll_tops[this.$route.name]=document.documentElement.scrollTop,this.$router.push({name:"view",params:{source_id:t}}))},description_filter:function(t){var e=/text="(.*?)(\\\\\\n)?"/.exec(t);return e&&e.length>1&&(t=e[1].trim()),t&&(t=t.replace(/\\n/g,"<br>")),t},finishVirtual:function(t){var e=this;if(this.isLogin||u["a"].toLogin(),console.log(this.currentRole),this.currentRole&&0===this.currentRole.jx3id){var i=(t||this.achievement.ID)+"";this.achievement.Series&&(i=t?t+"":this.achievement.Series.split("|").join());var n={achievements:i};Object(o["s"])(n).then((function(n){e.$notify({title:"操作成功",message:"已将该成就标记为已完成",type:"success"});var s=e.achievementsVirtual;if(!t&&e.achievement.Series){var a=e.achievement.Series.split("|");s=s.concat(a)}else s.includes(i)||s.push(i);e.$store.commit("SET_STATE",{key:"achievementsVirtual",value:s})}))}else this.$alert("请先在侧边栏选择虚拟角色","警告",{confirmButtonText:"确定"})},cancelVirtual:function(t){var e=this;if(this.isLogin||u["a"].toLogin(),this.currentRole&&!this.currentRole.jx3id){var i=(t||this.achievement.ID)+"";this.achievement.Series&&(i=t?t+"":this.achievement.Series.split("|").join());var n={achievements:i};Object(o["a"])(n).then((function(n){e.$notify({title:"操作成功",message:"已将该成就标记为待完成",type:"success"});var s=e.achievementsVirtual,a=[];a=!t&&e.achievement.Series?e.achievement.Series.split("|"):[i],s=s.filter((function(t){return!a.includes(t)})),e.$store.commit("SET_STATE",{key:"achievementsVirtual",value:s})}))}else this.$alert("请先在侧边栏选择虚拟角色","警告",{confirmButtonText:"确定"})}}},h=m,v=(i("6378"),i("2877")),p=Object(v["a"])(h,n,s,!1,null,null,null);e["a"]=p.exports},"259e":function(t,e,i){},"262e":function(t,e,i){"use strict";i.d(e,"f",(function(){return c})),i.d(e,"p",(function(){return r})),i.d(e,"q",(function(){return o})),i.d(e,"d",(function(){return l})),i.d(e,"i",(function(){return m})),i.d(e,"b",(function(){return h})),i.d(e,"h",(function(){return v})),i.d(e,"c",(function(){return p})),i.d(e,"r",(function(){return d})),i.d(e,"j",(function(){return f})),i.d(e,"e",(function(){return g})),i.d(e,"o",(function(){return _})),i.d(e,"l",(function(){return b})),i.d(e,"k",(function(){return C})),i.d(e,"n",(function(){return x})),i.d(e,"s",(function(){return y})),i.d(e,"a",(function(){return I})),i.d(e,"m",(function(){return k})),i.d(e,"g",(function(){return w}));var n=i("5530"),s=(i("caad"),i("2532"),i("41cb")),a=Object(s["d"])();function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wiki_cj_ac";return Object(s["a"])().get("/api/cms/breadcrumb/".concat(t)).then((function(t){return t.data.data.html||""}))}function r(t,e){return t?a.get("api/node/achievement/".concat(t),e):null}function o(t){return t?a.get("/api/node/achievement/".concat(t,"/relations")):null}var u=location.href.includes("origin")?"origin":"std";function l(){return a.get("/api/node/achievement/count",{params:{client:u}})}function m(t){return a.get("/api/node/achievement/menus",{params:t})}function h(t){return a.get("/api/node/achievement/points",{params:{general:t,client:u}})}function v(t,e,i){var a="/api/cms/helper/achievements/".concat(t);return e&&(a+="/".concat(e)),Object(s["a"])().get(a,{params:Object(n["a"])({client:u},i)})}function p(t){return a.post("/api/node/achievement/list",Object.assign(t,{client:u}))}function d(t){return a.get("/api/node/achievement/search",{params:Object.assign(t,{client:u})})}function f(t){return a.get("/api/node/achievement/newest",{params:{page:t,client:u}})}function g(t){return a.get("/api/node/achievement/adventure",{params:{page:t,client:u}})}function _(t){return Object(s["a"])().get("/api/cms/helper/achievements/waiting",{params:{page:t,client:u}})}function b(t){return a.get("/api/node/achievement/rare",{params:{page:t,client:u}})}function C(t){return Object(s["b"])().get("/api/achievements/out_print",{params:{page:t,client:u}})}function x(){return Object(s["c"])().get("/api/next2/virtual-achievements")}function y(t){return Object(s["c"])().post("/api/next2/virtual-achievements",t)}function I(t){return Object(s["c"])().post("/api/next2/virtual-achievements/cancel",t)}function k(t){return Object(s["c"])().get("/api/next2/user-achievements",{params:{jx3id:t}})}function w(t){return a.get("/api/node/v2/map/list",{params:t})}},"38cf":function(t,e,i){"use strict";var n=i("23e7"),s=i("1148");n({target:"String",proto:!0},{repeat:s})},"3d2f":function(t,e,i){"use strict";i("38cf");e["a"]=function(t){return"⭐️".repeat(t||1)}},"52da":function(t,e,i){"use strict";var n=i("1344"),s=Object(n["a"])();e["a"]=s},6378:function(t,e,i){"use strict";i("259e")},7479:function(t,e,i){},"7a5f":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return t.item?e("el-popover",{attrs:{placement:"right-end","popper-class":"m-simple-item-popup",width:"auto","visible-arrow":!1,trigger:"hover",transition:"none","close-delay":0},on:{show:function(e){t.item_id=t.item.id}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{staticClass:"m-simple-item",class:{onlyIcon:t.onlyIcon,withName:t.withName},attrs:{slot:"reference"},on:{mousedown:function(e){t.visible=!1}},slot:"reference"},[e("div",{staticClass:"m-icon"},[e("div",{staticClass:"u-border",style:{backgroundImage:t.item_border(t.item),opacity:5==t.item.Quality?.9:1}}),e("div",{staticClass:"u-border-quest",style:{backgroundImage:t.item_border_quest(t.item)}}),e("img",{staticClass:"u-icon",style:{width:t.iconSize,height:t.iconSize},attrs:{src:t.icon_url(t.item.IconID),alt:"IconID:".concat(t.item.IconID)}})]),e("span",{staticClass:"u-name",style:{color:t.item_color(t.item.Quality)},domProps:{textContent:t._s(t.item.Name)}}),e("span",{staticClass:"u-uiid fr",domProps:{textContent:t._s("ID: ".concat(t.item.id))}})]),e("jx3-item",{attrs:{item_id:t.item_id,"jx3-client-type":t.jx3ClientType}})],1):t._e()},s=[],a=i("c7fa");const{__imgPath:c,__iconPath:r}=i("65c2");var o=t=>isNaN(parseInt(t))?c+"image/common/nullicon.png":`${r}icon/${t}.png`,u=i("1d18");const{__imgPath:l}=i("65c2");var m=t=>{switch(t.Quality){case 3:return`url(${l}image/item/blue.png)`;case 4:return`url(${l}image/item/purple.png)`;case 5:return`url(${l}image/item/orange.gif)`;default:return""}};const{__imgPath:h}=i("65c2");var v=t=>t.IsQuest>0?`url(${h}image/item/renwu.png)`:"",p={name:"ItemSimple",props:["item","onlyIcon","iconSize","withName","jx3ClientType"],data:function(){return{visible:!1,item_id:null}},methods:{icon_url:o,item_color:u["a"],item_border:m,item_border_quest:v},components:{"jx3-item":a["a"]}},d=p,f=(i("1441"),i("fe5d"),i("2877")),g=Object(f["a"])(d,n,s,!1,null,null,null);e["a"]=g.exports},d2ca:function(t,e,i){},d866:function(t,e,i){"use strict";var n=i("23e7"),s=i("c65b"),a=i("2266"),c=i("59ed"),r=i("825a"),o=i("46c4"),u=i("2a62"),l=i("f99f"),m=l("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:m},{every:function(t){r(this);try{c(t)}catch(n){u(this,"throw",n)}if(m)return s(m,this,t);var e=o(this),i=0;return!a(e,(function(e,n){if(!t(e,i++))return n()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},fe5d:function(t,e,i){"use strict";i("7479")}}]);
//# sourceMappingURL=chunk-6e71b6f0.af466a67.js.map