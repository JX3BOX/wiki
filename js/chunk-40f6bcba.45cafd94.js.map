{"version":3,"sources":["webpack:///./src/views/cj/mobile/detail.vue?1645","webpack:///./src/components/cj/mobile/comment-list.vue?a0ee","webpack:///./src/views/cj/mobile/detail.vue","webpack:///./src/components/cj/mobile/comment-list.vue","webpack:///src/components/cj/mobile/comment-list.vue","webpack:///./src/components/cj/mobile/comment-list.vue?1cb3","webpack:///./src/components/cj/mobile/comment-list.vue?46bc","webpack:///src/views/cj/mobile/detail.vue","webpack:///./src/views/cj/mobile/detail.vue?cc56","webpack:///./src/views/cj/mobile/detail.vue?0e55"],"names":["render","_vm$source","_vm$wiki_post","_vm$wiki_post$post","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","_l","source","SeriesAchievementList","item","key","ID","on","changeCurrent","attrs","iconUrl","IconID","class","complete","isComplete","disabled","isVirtual","setConfirm","_v","_s","authors","user_id","showAvatar","user_avatar","updated_at","clearContent","wiki_post","post","content","id","isFromTarget","_e","ref","staticStyle","btnOptions","drawerOptions","onSearch","scopedSlots","_u","fn","userSelectShow","proxy","currentRole","$event","setRole","conformShow","confirmOk","staticRenderFns","comments","_item$children","toDetail","user_nickname","dayjs","commentDate","format","children","length","reply","parent","noMoreData","props","data","reply_form","User","getInfo","page","pageSize","total","computed","isWujie","_this$$route$name","$route","indexOf","client","location","href","includes","mounted","_onScroll","handleScroll","bind","window","addEventListener","beforeDestroy","removeEventListener","methods","scrollTop","pageYOffset","document","documentElement","body","windowHeight","innerHeight","docHeight","scrollHeight","loadMore","get_comments","_this","append","arguments","undefined","filter","outputs","_loop","c","index","parent_id","map","show","push","type","sourceId","wikiComment","list","then","res","i","concat","create_comment","form","_this2","source_id","String","$message","message","finally","handleCurrentChange","star_comment","comment","is_star","_this3","star","top_comment","is_top","_this4","top","watch","immediate","handler","component","components","ConfirmOkDrawer","WikiItem","MiniprogramCommentList","UserSelectDrawer","SuspendCommon","Article","compatible","is_empty","imageCount","loadedImageCount","images","imagesLoaded","$store","state","role","get","visible","set","val","$emit","params","post_id","isRevision","author_id","user_name","_this$wiki_post","_this$wiki_post$post","_this$wiki_post2","_this$wiki_post2$post","ts2str","updated","_this$wiki_post3","_this$wiki_post3$user","_this$wiki_post3$user2","users","user","avatar","display_name","nickname","favTitle","_this$wiki_post4","_this$wiki_post4$sour","Name","prefix","hideType","direction","showHome","showIcon","showMore","completeAchievements","achievements","achievementsVirtual","hadCompleted","_this$currentRole","jx3id","loadData","loadRevision","deep","localStorage","setItem","commit","loadRoleAchievements","loadVirtualAchievements","isSession","icon_url","next","isMiniProgram","wx","miniProgram","navigateTo","url","openChild","childrenShow","console","log","replace","match","src","publish_url","publishLink","triggerStat","postStat","$router","initImageLoader","$nextTick","container","getElementById","querySelectorAll","preloadAllImages","setGlobalReady","loadedInThisBatch","Array","from","forEach","img","originalSrc","handleImageLoad","tempImg","Image","onload","checkImageLoadCompletion","onerror","error","loadedCount","setTimeout","allLoaded","every","__READY__","_loadData","_asyncToGenerator","_regenerator","m","_callee","w","_context","n","get_achievement","_res$data","_res$data$data","achievement","wiki","mix","isEmpty","reportNow","caller","isLogin","postHistory","source_type","link","title","isRobot","a","apply","_this5","getById","_res$data$data2","_objectSpread","loadConfig","getConfig","isTest","report","_this6","getRoleGameAchievements","_res$data2","_res$data2$data","_res$data3","_res$data3$data","isSync","split","showSchoolIcon","_this7","getVirtualRoleAchievements","_res$data4","_res$data4$data","finishVirtual","cancelVirtual","curr","_this8","ids","selectedAchievements","join","setVirtualRoleAchievements","$notify","Set","isAll","checked","_this9","cancelVirtualRoleAchievements"],"mappings":"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","file":"js/chunk-40f6bcba.45cafd94.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./detail.vue?vue&type=style&index=0&id=b0200c86&prod&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./comment-list.vue?vue&type=style&index=0&id=ce1e9862&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"c-var p-achievement-detail\"},[_c('div',{staticClass:\"m-main-box\"},[_c('div',{staticClass:\"m-achievement-info\"},[_c('div',{staticClass:\"m-sub-list\"},_vm._l((_vm.source?.SeriesAchievementList || []),function(item){return _c('div',{key:item.ID,staticClass:\"u-sub-achievement\",on:{\"click\":() => _vm.changeCurrent(item)}},[_c('img',{attrs:{\"src\":_vm.iconUrl(item.IconID)}})])}),0),_c('wiki-item',{attrs:{\"item\":_vm.source}}),_c('button',{staticClass:\"m-confirm\",class:{complete: _vm.isComplete,disabled:!_vm.isVirtual},on:{\"click\":_vm.setConfirm}},[_vm._v(_vm._s(_vm.isComplete ? \"已完成\" : \"设为已完成\"))])],1),_c('div',{staticClass:\"m-wiki\"},[_c('div',{staticClass:\"m-wiki-header\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(\"成就攻略\")]),_c('div',{staticClass:\"u-avatar-list\"},_vm._l((_vm.authors),function(item){return _c('div',{key:item.user_id,staticClass:\"u-avatar\"},[_c('img',{attrs:{\"src\":_vm.showAvatar(item.user_avatar)}})])}),0),_c('div',{staticClass:\"u-time\"},[_vm._v(\" \"+_vm._s(_vm.updated_at)+\" \")])]),_c('div',{staticClass:\"m-content-box\"},[_c('Article',{attrs:{\"id\":\"wikiArticle\",\"content\":_vm.clearContent(_vm.wiki_post?.post?.content)}})],1),_c('div',{staticClass:\"u-show-log\"},[_vm._v(\"查看历史修订\")])])]),_c('div',{staticClass:\"m-comments\"},[_c('miniprogram-comment-list',{attrs:{\"source-id\":_vm.id,\"type\":\"achievement\"}})],1),(!_vm.isFromTarget)?_c('suspend-common',{ref:\"suspendCommon\",staticClass:\"u-suspend-common\",staticStyle:{\"width\":\"100%\"},attrs:{\"btn-options\":_vm.btnOptions,\"drawer-options\":_vm.drawerOptions},on:{\"search\":_vm.onSearch},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('div',{staticClass:\"m-more-action\"},[_c('div',{staticClass:\"u-action\",on:{\"click\":() => (_vm.userSelectShow = true)}},[_c('svg',{attrs:{\"width\":\"25\",\"height\":\"24\",\"viewBox\":\"0 0 25 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M17.5 12a2.25 2.25 0 012.25 2.25V15c0 2.956-2.79 6-7.5 6s-7.5-3.044-7.5-6v-.75A2.25 2.25 0 017 12h10.5zm-5.25-9.75a4.125 4.125 0 110 8.25 4.125 4.125 0 010-8.25z\",\"fill\":\"#FEDAA3\"}})])]),_c('div',{staticClass:\"u-action\"},[_c('svg',{attrs:{\"width\":\"25\",\"height\":\"24\",\"viewBox\":\"0 0 25 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('circle',{attrs:{\"cx\":\"5.1\",\"cy\":\"4.35\",\"r\":\"1.35\",\"fill\":\"#FEDAA3\"}}),_c('rect',{attrs:{\"x\":\"7.275\",\"y\":\"3\",\"width\":\"14.475\",\"height\":\"2.7\",\"rx\":\"1.35\",\"fill\":\"#FEDAA3\"}}),_c('circle',{attrs:{\"cx\":\"5.1\",\"cy\":\"9.45\",\"r\":\"1.35\",\"fill\":\"#FEDAA3\"}}),_c('rect',{attrs:{\"x\":\"7.275\",\"y\":\"8.1\",\"width\":\"14.475\",\"height\":\"2.7\",\"rx\":\"1.35\",\"fill\":\"#FEDAA3\"}}),_c('circle',{attrs:{\"cx\":\"5.1\",\"cy\":\"14.55\",\"r\":\"1.35\",\"fill\":\"#FEDAA3\"}}),_c('rect',{attrs:{\"x\":\"7.275\",\"y\":\"13.2\",\"width\":\"14.475\",\"height\":\"2.7\",\"rx\":\"1.35\",\"fill\":\"#FEDAA3\"}}),_c('circle',{attrs:{\"cx\":\"5.1\",\"cy\":\"19.65\",\"fill\":\"#FEDAA3\",\"r\":\"1.35\"}}),_c('rect',{attrs:{\"x\":\"7.275\",\"y\":\"18.3\",\"width\":\"14.475\",\"height\":\"2.7\",\"rx\":\"1.35\",\"fill\":\"#FEDAA3\"}})])]),_c('div',{staticClass:\"u-action\"},[_c('svg',{attrs:{\"width\":\"25\",\"height\":\"24\",\"viewBox\":\"0 0 25 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",\"d\":\"M10.038 2.611a1.8 1.8 0 00-1.376 0l-4.9 2.028A1.8 1.8 0 002.65 6.3v13.052a1.8 1.8 0 002.489 1.664l4.212-1.743 5.112 2.115a1.8 1.8 0 001.375 0l4.9-2.028a1.8 1.8 0 001.112-1.66V4.646a1.8 1.8 0 00-2.488-1.663L15.15 4.726 10.038 2.61zM9.346 6a.9.9 0 01.9.9v7.8a.9.9 0 11-1.8 0V6.9a.9.9 0 01.9-.9zm6.708 3.3a.9.9 0 10-1.8 0v7.8a.9.9 0 101.8 0V9.3z\",\"fill\":\"#FEDAA3\"}})])])])]},proxy:true}],null,false,4257391053)}):_vm._e(),_c('user-select-drawer',{attrs:{\"visible\":_vm.userSelectShow,\"current-role\":_vm.currentRole},on:{\"update:visible\":function($event){_vm.userSelectShow=$event},\"change\":_vm.setRole}}),_c('confirm-ok-drawer',{attrs:{\"visible\":_vm.conformShow},on:{\"update:visible\":function($event){_vm.conformShow=$event},\"confirm\":_vm.confirmOk}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-comment-list\",attrs:{\"id\":\"macro-comment\"}},[_vm._l((_vm.comments),function(item){return _c('div',{key:item.id,staticClass:\"m-comment-item\"},[_c('div',{staticClass:\"m-main-content\"},[_c('div',{staticClass:\"u-commenter-name\",on:{\"click\":function($event){return _vm.toDetail(item.user_id)}}},[_vm._v(\" \"+_vm._s(item.user_nickname)+\" \")]),_c('div',{staticClass:\"u-comment-content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"u-comment-time\"},[_vm._v(\" \"+_vm._s(_vm.dayjs(item?.commentDate).format(\"YYYY-MM-DD\"))+\" \")])]),(item.children?.length)?_c('div',{staticClass:\"m-child-comment\"},_vm._l((item.children),function(reply){return _c('div',{key:reply.id,staticClass:\"m-reply-item\"},[_c('div',{staticClass:\"u-replier-name\",on:{\"click\":function($event){return _vm.toDetail(reply.user_id)}}},[_vm._v(\" \"+_vm._s(reply.user_nickname)+\" \")]),_c('span',{staticClass:\"u-reply\"},[_vm._v(\"回复\")]),_c('div',{staticClass:\"u-replier-name\",on:{\"click\":function($event){reply.parent.user_id ? _vm.toDetail(reply.parent.user_id) : null}}},[_vm._v(\" \"+_vm._s(reply.parent.user_nickname)+\" \")]),_c('span',{staticClass:\"u-reply\"},[_vm._v(\"：\")]),_c('div',{staticClass:\"u-reply-content\"},[_vm._v(\" \"+_vm._s(reply.content)+\" \")])])}),0):_vm._e()])}),(_vm.loading)?_c('div',{staticClass:\"u-loading-more\"},[_vm._v(\"加载中...\")]):_vm._e(),(_vm.noMoreData)?_c('div',{staticClass:\"u-no-more\"},[_vm._v(\"没有更多评论了\")]):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-comment-list\"  id=\"macro-comment\">\n        <div\n            v-for=\"item in comments\"\n            :key=\"item.id\"\n            class=\"m-comment-item\"\n        >\n            <div class=\"m-main-content\">\n                <div class=\"u-commenter-name\"  @click=\"toDetail(item.user_id)\">\n                    {{item.user_nickname}}\n                </div>\n                <div class=\"u-comment-content\">\n                    {{item.content}}\n                </div>\n                <div class=\"u-comment-time\">\n                    {{dayjs(item?.commentDate).format(\"YYYY-MM-DD\")}}\n                </div>\n            </div>\n            <div class=\"m-child-comment\" v-if=\"item.children?.length\">\n                <div v-for=\"reply in item.children\" :key=\"reply.id\" class=\"m-reply-item\">\n                    <div class=\"u-replier-name\" @click=\"toDetail(reply.user_id)\">\n                        {{reply.user_nickname}}\n                    </div>\n                    <span class=\"u-reply\">回复</span>\n                    <div class=\"u-replier-name\" @click=\"reply.parent.user_id ? toDetail(reply.parent.user_id) : null\">\n                        {{reply.parent.user_nickname}}\n                    </div>\n                    <span class=\"u-reply\">：</span>\n                    <div class=\"u-reply-content\">\n                        {{reply.content}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-if=\"loading\" class=\"u-loading-more\">加载中...</div>\n        <div v-if=\"noMoreData\" class=\"u-no-more\">没有更多评论了</div>\n    </div>\n</template>\n\n<script>\n\nimport dayjs from \"dayjs\";\nimport { wikiComment } from \"@jx3box/jx3box-common/js/wiki_v2\";\nimport User from \"@jx3box/jx3box-common/js/user\";\n\nexport default {\n    name: \"MiniprogramCommentList\",\n    props: [\"type\", \"sourceId\"],\n    data() {\n        return {\n            comments: [],\n            reply_form: {\n                content: \"\",\n                user_nickname: User.getInfo().name,\n            },\n            page: 1,\n            pageSize: 10,\n            total: 0,\n            loading: false,\n        };\n    },\n    computed: {\n        isWujie() {\n            return this.$route.name?.indexOf(\"wujie\") > -1;\n        },\n        client: function () {\n            return location.href.includes(\"classic\") || location.href.includes(\"origin\") ? \"origin\" : \"std\";\n        },\n        noMoreData() {\n            // 判断是否已加载全部评论\n            return this.comments.length >= this.total && this.total > 0;\n        }\n    },\n    mounted() {\n        this._onScroll = this.handleScroll.bind(this);\n        window.addEventListener('scroll', this._onScroll);\n    },\n    beforeDestroy() {\n        window.removeEventListener('scroll', this._onScroll);\n    },\n    methods: {\n        dayjs,\n        handleScroll() {\n            if (this.loading || this.noMoreData) return;\n            // 距离底部100px时触发\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\n            const windowHeight = window.innerHeight;\n            const docHeight = document.documentElement.scrollHeight;\n            if (scrollTop + windowHeight + 100 >= docHeight) {\n                this.loadMore();\n            }\n        },\n        loadMore() {\n            if (this.loading || this.noMoreData) return;\n            this.page++;\n            this.get_comments(true); // 传递参数标记为加载更多\n        },\n        get_comments(append = false) {\n            if (!this.type || !this.sourceId) return;\n            this.loading = true;\n            wikiComment\n                .list({ type: this.type, id: this.sourceId }, { client: this.client, page: this.page })\n                .then((res) => {\n                    res = res.data;\n                    let comments = res.data.list;\n                    for (let i = 0; i < comments.length; i++) {\n                        comments[i][\"reply_form\"] = {\n                            show: false,\n                            content: \"\",\n                            user_nickname: User.getInfo().name,\n                        };\n                    }\n                    this.page = res.data.page;\n                    this.total = res.data.total;\n                    if (append) {\n                        // 追加评论\n                        this.comments = this.comments.concat(filter(comments, 0));\n                    } else {\n                        this.comments = filter(comments, 0);\n                    }\n                    this.loading = false;\n                });\n\n            function filter(comments, parent) {\n                let outputs = [];\n                for (let index in comments) {\n                    let c = comments[index];\n                    if (!c) continue;\n                    if (c.parent_id === parent) {\n                        // 递归\n                        let children = filter(c.children, c.id);\n                        c.children = children.map((item) => {\n                            item.parent = {\n                                user_id: c.user_id,\n                                user_nickname: c.user_nickname,\n                                id: c.id,\n                            };\n                            item.reply_form = {\n                                show: false,\n                                content: \"\",\n                                user_nickname: User.getInfo().name,\n                            };\n                            return item;\n                        });\n                        outputs.push(c);\n                    }\n                }\n                return outputs;\n            }\n        },\n        create_comment(form, parent_id = 0) {\n            // 校验评论内容\n            if (!form.content) {\n                this.$message({\n                    message: \"请先填写评论内容再尝试提交\",\n                    type: \"warning\",\n                });\n                return;\n            }\n            const data = {\n                type: this.type,\n                source_id: String(this.sourceId),\n                parent_id: parent_id,\n                user_nickname: form.user_nickname || User.getInfo().name,\n                content: form.content,\n                client: this.client,\n            };\n            wikiComment\n                .post(data)\n                .then((res) => {\n                    res = res.data;\n                    form.content = \"\";\n                    this.$message({\n                        message: \"提交成功，请等待审核\",\n                        type: \"success\",\n                    });\n                })\n                .finally(() => {\n                    form.show = false;\n                });\n        },\n        handleCurrentChange(page) {\n            this.page = page;\n            this.get_comments();\n        },\n        star_comment(comment, is_star) {\n            wikiComment.star(comment.id, {\n                is_star\n            }).then(() => {\n                this.page = 1; // 重置页码\n                this.get_comments();\n            });\n        },\n        top_comment(comment, is_top) {\n            wikiComment.top(comment.id, {\n                is_top\n            }).then(() => {\n                this.page = 1; // 重置页码\n                this.get_comments();\n            });\n        },\n\n        toDetail(){\n\n        },\n    },\n\n    watch: {\n        sourceId: {\n            immediate: true,\n            handler() {\n                this.page = 1; // 重置页码\n                this.get_comments();\n            },\n        },\n    },\n};\n</script>\n\n\n<style  lang=\"less\">\n.m-comment-list{\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    margin-top: 20px;\n    .m-comment-item{\n        display: flex;\n        padding: var(--20, 20px);\n        flex-direction: column;\n        gap: var(--8, 8px);\n\n        background: var(--primary-brand-4, #282828);\n\n        .m-main-content{\n            display: flex;\n            flex-direction: column;\n            gap: var(--8, 8px);\n\n            .u-commenter-name{\n                color: var(--secondary-cyan, #32ADE6);\n                font-size: 12px;\n                font-weight: 400;\n                line-height: 18px; /* 150% */\n            }\n            .u-comment-content{\n                color: var(--black-80, rgba(28, 28, 28, 0.80));\n                font-size: 14px;\n                font-weight: 400;\n                line-height: 20px; /* 142.857% */\n            }\n            .u-comment-time{\n                color: var(--black-40, rgba(28, 28, 28, 0.40));\n                font-size: 12px;\n                font-weight: 400;\n                line-height: 18px; /* 150% */\n            }\n        }\n\n        .m-child-comment{\n            display: flex;\n            padding: 12px;\n            flex-direction: column;\n            gap: 10px;\n            border-radius: 8px;\n            background: var(--black-5, rgba(28, 28, 28, 0.05));\n            .m-reply-item{\n                // 超出长度不分词\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                .u-replier-name{\n                    color: var(--secondary-cyan, #32ADE6);\n                    font-size: 12px;\n                    font-weight: 400;\n                    line-height: 18px; /* 150% */\n                    display: inline-block;\n                    margin-right: 4px;\n                }\n                .u-reply{\n                    color: var(--black-40, rgba(255, 255, 255, 0.40));\n                    font-size: 12px;\n                    font-weight: 400;\n                    line-height: 18px; /* 150% */\n                    margin-right: 4px;\n                }\n                .u-reply-content{\n                    color: var(--black-80, rgba(255, 255, 255, 0.80));\n                    font-size: 12px;\n                    font-weight: 400;\n                    line-height: 18px; /* 150% */\n                    display: inline;\n                }\n            }\n        }\n    }\n\n    .u-loading-more, .u-no-more {\n        text-align: center;\n        padding: 10px 0;\n        color: var(--black-40, rgba(28, 28, 28, 0.40));\n        font-size: 12px;\n        font-weight: 400;\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./comment-list.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./comment-list.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./comment-list.vue?vue&type=template&id=ce1e9862\"\nimport script from \"./comment-list.vue?vue&type=script&lang=js\"\nexport * from \"./comment-list.vue?vue&type=script&lang=js\"\nimport style0 from \"./comment-list.vue?vue&type=style&index=0&id=ce1e9862&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"c-var p-achievement-detail\" v-loading=\"loading\">\n        <div class=\"m-main-box\">\n            <div class=\"m-achievement-info\">\n                <div class=\"m-sub-list\">\n                    <div\n                        v-for=\"item in source?.SeriesAchievementList || []\"\n                        :key=\"item.ID\"\n                        class=\"u-sub-achievement\"\n                        @click=\"() => changeCurrent(item)\"\n                    >\n                        <img :src=\"iconUrl(item.IconID)\" />\n                    </div>\n                </div>\n                <wiki-item :item=\"source\" />\n                <button  class=\"m-confirm\" :class=\"{complete: isComplete,disabled:!isVirtual}\" @click=\"setConfirm\">{{ isComplete ? \"已完成\" : \"设为已完成\" }}</button>\n            </div>\n            <div class=\"m-wiki\">\n                <div class=\"m-wiki-header\">\n                    <div class=\"u-title\">成就攻略</div>\n                    <div class=\"u-avatar-list\">\n                        <div v-for=\"item in authors\" :key=\"item.user_id\" class=\"u-avatar\">\n                            <img :src=\"showAvatar(item.user_avatar)\" />\n                        </div>\n                    </div>\n                    <div class=\"u-time\">\n                        {{ updated_at }}\n                    </div>\n                </div>\n                <div class=\"m-content-box\">\n                    <Article id=\"wikiArticle\" :content=\"clearContent(wiki_post?.post?.content)\" />\n                </div>\n\n                <div class=\"u-show-log\">查看历史修订</div>\n            </div>\n        </div>\n        <div class=\"m-comments\">\n            <miniprogram-comment-list :source-id=\"id\" type=\"achievement\" />\n        </div>\n        <suspend-common\n            v-if=\"!isFromTarget\"\n            class=\"u-suspend-common\"\n            :btn-options=\"btnOptions\"\n            :drawer-options=\"drawerOptions\"\n            style=\"width: 100%\"\n            @search=\"onSearch\"\n            ref=\"suspendCommon\"\n        >\n            <template #default>\n                <div class=\"m-more-action\">\n                    <div class=\"u-action\" @click=\"() => (userSelectShow = true)\">\n                        <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M17.5 12a2.25 2.25 0 012.25 2.25V15c0 2.956-2.79 6-7.5 6s-7.5-3.044-7.5-6v-.75A2.25 2.25 0 017 12h10.5zm-5.25-9.75a4.125 4.125 0 110 8.25 4.125 4.125 0 010-8.25z\" fill=\"#FEDAA3\"/></svg>\n                    </div>\n                    <div class=\"u-action\">\n                        <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><circle cx=\"5.1\" cy=\"4.35\" r=\"1.35\" fill=\"#FEDAA3\"/><rect x=\"7.275\" y=\"3\" width=\"14.475\" height=\"2.7\" rx=\"1.35\" fill=\"#FEDAA3\"/><circle cx=\"5.1\" cy=\"9.45\" r=\"1.35\" fill=\"#FEDAA3\"/><rect x=\"7.275\" y=\"8.1\" width=\"14.475\" height=\"2.7\" rx=\"1.35\" fill=\"#FEDAA3\"/><circle cx=\"5.1\" cy=\"14.55\" r=\"1.35\" fill=\"#FEDAA3\"/><rect x=\"7.275\" y=\"13.2\" width=\"14.475\" height=\"2.7\" rx=\"1.35\" fill=\"#FEDAA3\"/><circle cx=\"5.1\" cy=\"19.65\" fill=\"#FEDAA3\" r=\"1.35\"/><rect x=\"7.275\" y=\"18.3\" width=\"14.475\" height=\"2.7\" rx=\"1.35\" fill=\"#FEDAA3\"/></svg>\n                    </div>\n                    <div class=\"u-action\">\n                        <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.038 2.611a1.8 1.8 0 00-1.376 0l-4.9 2.028A1.8 1.8 0 002.65 6.3v13.052a1.8 1.8 0 002.489 1.664l4.212-1.743 5.112 2.115a1.8 1.8 0 001.375 0l4.9-2.028a1.8 1.8 0 001.112-1.66V4.646a1.8 1.8 0 00-2.488-1.663L15.15 4.726 10.038 2.61zM9.346 6a.9.9 0 01.9.9v7.8a.9.9 0 11-1.8 0V6.9a.9.9 0 01.9-.9zm6.708 3.3a.9.9 0 10-1.8 0v7.8a.9.9 0 101.8 0V9.3z\" fill=\"#FEDAA3\"/></svg>\n                    </div>\n                </div>\n            </template>\n        </suspend-common>\n\n        <user-select-drawer :visible.sync=\"userSelectShow\" :current-role=\"currentRole\" @change=\"setRole\" />\n\n        <confirm-ok-drawer :visible.sync=\"conformShow\" @confirm=\"confirmOk\" />\n    </div>\n</template>\n\n<script lang=\"js\">\nimport SuspendCommon from  '@jx3box/jx3box-common-ui/src/SuspendCommon.vue';\nimport { publishLink, showAvatar, showSchoolIcon, ts2str } from \"@jx3box/jx3box-common/js/utils\";\nimport { postHistory, postStat } from \"@jx3box/jx3box-common/js/stat\";\nimport {\n    cancelVirtualRoleAchievements,\n    get_achievement, getRoleGameAchievements, getVirtualRoleAchievements, setVirtualRoleAchievements } from \"@/service/achievement\";\nimport { wiki } from \"@jx3box/jx3box-common/js/wiki_v2\";\nimport { reportNow } from \"@jx3box/jx3box-common/js/reporter\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { getConfig } from \"@jx3box/jx3box-common/js/api_misc\";\nimport { report } from \"@/service/user\";\nimport { icon_url } from \"@/filters\";\nimport iconUrl from \"@/filters/icon-url\";\nimport Article from \"@jx3box/jx3box-editor/src/Article.vue\";\nimport UserSelectDrawer from \"@/components/cj/mobile/user-select-drawer.vue\";\nimport MiniprogramCommentList from \"@/components/cj/mobile/comment-list.vue\";\nimport WikiItem from \"@/components/cj/mobile/wiki-item.vue\";\nimport ConfirmOkDrawer from \"@/components/cj/mobile/confirm-ok-drawer.vue\";\n\nexport default {\n    name: \"CjMobileDetail\",\n    components: { ConfirmOkDrawer, WikiItem, MiniprogramCommentList, UserSelectDrawer,SuspendCommon,Article },\n    data() {\n        return {\n            source: {},\n            wiki_post: \"\",\n            compatible: false,\n            is_empty: true,\n\n            imageCount: 0,\n            loadedImageCount: 0,\n            images: [],\n            imagesLoaded: false,\n\n            userSelectShow:false,\n            currentRole: this.$store.state.role,\n            loading: false,\n            conformShow: false\n        };\n    },\n    computed: {\n        show: {\n            get() {\n                return this.visible;\n            },\n            set(val) {\n                this.$emit(\"update:visible\", val);\n            }\n        },\n        id() {\n            return this.$route.params.source_id;\n        },\n        post_id: function () {\n            return this.$route.params.post_id;\n        },\n        isRevision: function () {\n            return !!this.$route.params.post_id;\n        },\n        author_id: function () {\n            return ~~this.wiki_post.post.user_id;\n        },\n        client: function () {\n            return this.$store.state.client;\n        },\n        user_name: function () {\n            return this.wiki_post?.post?.user_nickname;\n        },\n        updated_at: function () {\n            return ts2str(this.wiki_post?.post?.updated);\n        },\n        authors: function () {\n            if (!this.isRevision) {\n                return (\n                    this.wiki_post?.users\n                        ?.filter((user) => user.id)\n                        ?.map((user) => {\n                            return {\n                                user_id: user.id,\n                                user_avatar: user.avatar,\n                                display_name: user.nickname,\n                            };\n                        }) || []\n                );\n            }\n            return [];\n        },\n        favTitle: function () {\n            return this.wiki_post?.source?.Name;\n        },\n        prefix() {\n            return this.client === \"std\" ? \"www\" : \"origin\";\n        },\n        isFromTarget(){\n            return false;\n        },\n        drawerOptions(){\n            return {\n                hideType: ['report'], //需要隐藏的type,如['search','pin']\n                direction: 'btt', //弹出框方向，btt、ttb、rtl、ltr\n            }\n        },\n        btnOptions(){\n            return {\n                showHome: true, //是否显示home区域，和Icon区域二选一,home区域优先级高于icon区域\n                showIcon: false, //是否显示icon区域,此处为false后，则下列配置无效\n\n                showMore: true, //是否显示更多\n            }\n        },\n        completeAchievements() {\n            return this.$store.state.achievements || [];\n        },\n        achievementsVirtual() {\n            return this.$store.state.achievementsVirtual || [];\n        },\n        isComplete(){\n            return this.hadCompleted(this.id);\n        },\n        isVirtual(){\n            return !this.currentRole?.jx3id;\n        }\n    },\n    watch:{\n        id: {\n            handler() {\n                this.loadData();\n            },\n        },\n        post_id: {\n            handler() {\n                this.loadRevision();\n            },\n        },\n        currentRole: {\n            deep: true,\n            handler(val) {\n                if (!val) return;\n                localStorage.setItem(\"wiki_last_sync\", val.jx3id || 0);\n                this.$store.commit(\"SET_STATE\", { key: \"role\", value: val });\n                const { jx3id } = val;\n                if (jx3id) {\n                    this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: [] });\n                    this.loadRoleAchievements(jx3id);\n                } else {\n                    if (jx3id === 0) {\n                        // 虚拟角色\n                        this.loadVirtualAchievements();\n                    }\n                    this.$store.commit(\"SET_STATE\", { key: \"achievements\", value: [], isSession: true });\n                }\n            },\n        },\n    },\n    methods: {\n        iconUrl,\n        showAvatar,\n        icon_url,\n        next(){\n\n        },\n        onSearch(){\n            if(isMiniProgram()){\n                wx.miniProgram.navigateTo({ url: `/pages/search/search-detail/search-detail?app=wiki&filter_category=成就` });\n            }\n        },\n        setRole(val){\n            this.currentRole = val;\n            this.userSelectShow = false;\n        },\n        openChild(){\n            this.childrenShow = true;\n            console.log(111);\n        },\n        clearContent(content){\n            return (content || \"\").replace(/ style=\"[^\"]*\"/g, \"\")\n                .replace(/<i?frame.*?src=\"(.*?)\".*?>/g, (match, src) => {\n                    return `<a href=\"${src}\" target=\"_blank\">${src}</a>`;\n                })\n                .replace(/<i?frame.*?src=\"(.*?)\".*?>.*?<\\/i?frame>/g, (match, src) => {\n                    return `<a href=\"${src}\" target=\"_blank\">${src}</a>`;\n                })\n        },\n        publish_url: publishLink,\n        triggerStat: function () {\n            if (this.client == \"origin\") {\n                postStat(\"origin_cj\", this.id);\n            } else {\n                postStat(\"cj\", this.id);\n            }\n        },\n        changeCurrent(item){\n            this.$router.push({\n                name: \"view\",\n                params: {\n                    source_id: item.ID,\n                }\n            })\n        },\n        initImageLoader() {\n            // 在DOM更新后获取所有图片\n            this.$nextTick(() => {\n                const container = document.getElementById(\"wikiArticle\");\n                if (!container) {\n                    this.setGlobalReady();\n                    return;\n                }\n\n                const images = container.querySelectorAll(\"img\");\n                this.images = images;\n                this.imageCount = images.length;\n\n                if (this.imageCount === 0) {\n                    this.setGlobalReady();\n                    return;\n                }\n\n                // 手动预加载所有图片\n                this.preloadAllImages(images);\n            });\n        },\n\n        // 手动预加载所有图片\n        preloadAllImages(images) {\n            let loadedInThisBatch = 0;\n            let totalProcessed = 0;\n            Array.from(images).forEach((img, index) => {\n                // 记录原始src\n                const originalSrc = img.src;\n\n                // 如果图片未加载\n                if (!img.complete) {\n                    // 创建一个Image对象来预加载\n                    const tempImg = new Image();\n\n                    tempImg.onload = () => {\n                        loadedInThisBatch++;\n\n                        // 在临时图片加载完成后，设置原始图片的src\n                        img.src = originalSrc;\n\n                        // 检查是否所有图片都已处理\n                        this.checkImageLoadCompletion(images, loadedInThisBatch);\n                    };\n\n                    tempImg.onerror = () => {\n                        console.error(`图片加载失败: ${originalSrc}`);\n                        totalProcessed++;\n\n                        // 即使加载失败，也要设置原始图片的src\n                        img.src = originalSrc;\n\n                        // 标记原始图片为已加载（错误情况）\n                        this.handleImageLoad();\n                    };\n\n                    // 开始预加载\n                    tempImg.src = originalSrc;\n                } else {\n                    // 图片已经加载完成\n                    this.handleImageLoad();\n                    totalProcessed++;\n                }\n            });\n        },\n\n        // 检查图片加载状态\n        checkImageLoadCompletion(images, loadedCount) {\n            if (images.length === this.loadedImageCount) {\n                this.setGlobalReady();\n                return;\n            }\n\n            // 设置超时检查，防止意外情况\n            setTimeout(() => {\n                const allLoaded = Array.from(images).every((img) => img.complete);\n\n                if (allLoaded) {\n                    this.setGlobalReady();\n                } else if (this.loadedImageCount === images.length) {\n                    this.setGlobalReady();\n                }\n            }, 3000);\n        },\n\n        // 判断是否全部完成\n        handleImageLoad() {\n            this.loadedImageCount++;\n            if (this.loadedImageCount === this.imageCount) {\n                this.setGlobalReady();\n            }\n        },\n\n        // 设置全局就绪状态\n        setGlobalReady() {\n            if (this.imagesLoaded) return; // 避免重复设置\n\n            this.imagesLoaded = true;\n            window.__READY__ = true;\n            console.log(\"全局状态设置成功: __READY__ = \", window.__READY__);\n        },\n        loadData: async function () {\n            // 获取最新攻略\n            if (this.id) {\n                this.loading = true;\n                await get_achievement(this.id, { client: this.client }).then((res) => {\n                    this.source = res?.data?.data?.achievement || \"\";\n                });\n                await wiki.mix({ type: \"achievement\", id: this.id, client: this.client }).then((res) => {\n                    const { post, source, compatible, isEmpty, users } = res;\n                    this.wiki_post = {\n                        post: post,\n                        source: source,\n                        users,\n                    };\n                    this.is_empty = isEmpty;\n                    this.compatible = compatible;\n\n                    reportNow({\n                        caller: \"cj_detail\",\n                        data: {\n                            href: `${this.prefix}:/cj/view/${this.id}`,\n                        },\n                    });\n\n                    User.isLogin() &&\n                    postHistory({\n                        source_type: this.client == \"origin\" ? \"origin_cj\" : \"cj\",\n                        source_id: ~~this.id,\n                        link: location.href,\n                        title: post.title,\n                    });\n                }).finally(()=>{\n                    this.loading = false;\n                });\n            }\n\n            // 请注意，为防止QQBOT无法抓取完全，请不要删除\n            if (this.isRobot) {\n                // 数据加载后启动奇遇流程中的图片检测\n                this.initImageLoader();\n            }\n\n            this.triggerStat();\n        },\n        loadRevision: function () {\n            // 获取指定攻略\n            wiki.getById(this.post_id).then((res) => {\n                this.wiki_post = {\n                    ...this.wiki_post,\n                    post: res.data.data?.post,\n                };\n            });\n            this.triggerStat();\n        },\n        ts2str,\n        loadConfig() {\n            getConfig({ key: \"test_user_ua\" }).then((res) => {\n                const isTest = ~~res.data.data.val;\n\n                if (isTest) {\n                    report();\n                }\n            });\n        },\n\n        loadRoleAchievements(jx3id) {\n            getRoleGameAchievements(jx3id).then((res) => {\n                const achievements = res.data?.data?.achievements || \"\";\n                const jx3id = res.data?.data?.jx3id;\n                this.isSync = !!jx3id; // 是否在游戏中同步\n                const list = achievements.split(\",\");\n                this.$store.commit(\"SET_STATE\", { key: \"achievements\", value: list, isSession: true });\n            });\n        },\n        showSchoolIcon,\n        // 获取虚拟角色成就列表\n        loadVirtualAchievements() {\n            if (!this.currentRole || this.currentRole.jx3id) return;\n            getVirtualRoleAchievements().then((res) => {\n                const achievements = res.data?.data?.achievements || \"\";\n                const list = achievements.split(\",\");\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n            });\n        },\n        confirmOk(){\n            this.finishVirtual([this.id])\n        },\n        hadCompleted(id) {\n            const list = this.isVirtual ? this.achievementsVirtual : this.completeAchievements;\n            return list.includes(id + \"\");\n        },\n        setConfirm(){\n            if (!this.isVirtual) {\n                return;\n            }\n\n            if (this.isComplete) {\n                // 取消完成\n                this.cancelVirtual([this.id])\n\n                return;\n            }\n\n            this.conformShow = true;\n        },\n\n        finishVirtual(curr) {\n            const ids = curr?curr: this.selectedAchievements.map((item) => item.ID + \"\");\n            const data = {\n                achievements: ids.join(),\n            };\n            setVirtualRoleAchievements(data).then((res) => {\n                this.$notify({\n                    title: \"操作成功\",\n                    message: \"已将选中成就标记为已完成\",\n                    type: \"success\",\n                });\n                const list = Array.from(new Set(this.achievementsVirtual.concat(ids)));\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n                this.isAll = false;\n                this.achievements = this.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n            });\n        },\n        cancelVirtual(curr) {\n            const ids = curr?curr: this.selectedAchievements.map((item) => item.ID + \"\");\n            const data = {\n                achievements: ids.join(),\n            };\n            cancelVirtualRoleAchievements(data).then((res) => {\n                this.$notify({\n                    title: \"操作成功\",\n                    message: \"已将选中成就标记为待完成\",\n                    type: \"success\",\n                });\n                const list = this.achievementsVirtual.filter((item) => !ids.includes(item));\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n                this.isAll = false;\n                this.achievements = this.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n            });\n        },\n    },\n    mounted() {\n        if (this.post_id) {\n            this.loadRevision();\n        } else {\n            this.loadData();\n        }\n\n        this.loadConfig();\n    },\n}\n</script>\n\n<style lang=\"less\">\n@import \"../../../assets/css/miniprogram/var.less\";\n\n.u-suspend-common {\n    padding-bottom: 2rem;\n    margin: 0;\n    .m-base {\n        width: 100%;\n        .m-more-action {\n            display: flex;\n            justify-content: space-around;\n            align-items: center;\n            width: 100%;\n            padding: 0 20px;\n            box-sizing: border-box;\n\n            .u-action {\n                display: flex;\n                height: 24px;\n                justify-content: center;\n                align-items: center;\n                flex: 1 0 0;\n\n                &.disabled {\n                    img {\n                        opacity: 0.5;\n                    }\n                }\n            }\n        }\n    }\n    .m-more {\n        .u-icon {\n            display: none;\n        }\n    }\n}\n\n.p-achievement-detail {\n    min-height: calc(100vh - 120px);\n    background: #f1f1f1;\n    @media (prefers-color-scheme: dark) {\n        background: #000;\n    }\n\n    padding-bottom: 100px;\n\n    .m-main-box {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n        padding: 20px 20px 0;\n    }\n\n    .m-achievement-info {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n\n        .m-sub-list {\n            display: flex;\n            flex-direction: row;\n            gap: 8px;\n            align-items: center;\n            .u-sub-achievement {\n                width: 32px;\n                height: 32px;\n                border-radius: 4px;\n                overflow: hidden;\n            }\n        }\n\n        .m-confirm {\n            display: flex;\n            height: 48px;\n            padding: 12px 16px;\n            justify-content: center;\n            align-items: center;\n            gap: 8px;\n\n            border-radius: var(--12, 12px);\n            background: var(--primary-brand-2, #fedaa3);\n            border: none;\n\n            color: var(--primary-brand-3, #24292e);\n            /* 16 Bold */\n            font-size: 16px;\n            font-style: normal;\n            font-weight: 700;\n            line-height: 24px; /* 150% */\n\n            &.complete{\n                opacity: 0.3;\n            }\n\n            &.disabled{\n                opacity: 0.3;\n            }\n        }\n    }\n\n    .m-wiki {\n        display: flex;\n        padding: 16px;\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 16px;\n        width: 100%;\n        border-radius: 12px;\n        box-sizing: border-box;\n        border: 1px solid rgba(40, 40, 40, 0.05);\n        background: var(--primary-brand-4, #282828);\n        .m-wiki-header {\n            display: flex;\n            flex-direction: column;\n            gap: 4px;\n            .u-title {\n                color: var(--black-80, rgba(255, 255, 255, 0.8));\n\n                /* 16 Bold */\n                font-size: 16px;\n                font-style: normal;\n                font-weight: 700;\n                line-height: 24px; /* 150% */\n            }\n\n            .u-avatar-list {\n                display: flex;\n                align-items: center;\n\n                .u-avatar {\n                    width: 24px;\n                    height: 24px;\n                    border-radius: 50%;\n                    overflow: hidden;\n                    margin-right: -8px;\n\n                    img {\n                        width: 100%;\n                        height: 100%;\n                        object-fit: cover;\n                    }\n                }\n            }\n\n            .u-time {\n                color: var(--black-40, rgba(255, 255, 255, 0.4));\n\n                /* 12 Regular */\n                font-size: 12px;\n                font-style: normal;\n                font-weight: 400;\n                line-height: 18px; /* 150% */\n            }\n        }\n\n        .m-content-box {\n            overflow: auto;\n            box-sizing: border-box;\n            #wikiArticle {\n                color: rgba(255, 255, 255, 0.8) !important;\n\n                /* 14 Regular */\n                font-size: 14px !important;\n                font-style: normal !important;\n                font-weight: 400 !important;\n                line-height: 20px; /* 142.857% */\n\n                box-sizing: border-box;\n                overflow-x: hidden;\n\n                ul {\n                    padding-left: 12px !important;\n                }\n\n                .e-summary,\n                .e-jx3-resource {\n                    @media (prefers-color-scheme: dark) {\n                        color: var(--black-100);\n                        background: var(--black-20);\n                    }\n                }\n                ul:has(.e-jx3-resource) {\n                    padding: 0 !important;\n                }\n                ul:has(.e-summary) {\n                    padding: 0 !important;\n                }\n                img {\n                    margin: 0 !important;\n                }\n\n                div {\n                    color: var(--black-100);\n                }\n                h1 {\n                    font-weight: 700 !important;\n                    line-height: 30px !important;\n                    font-size: 20px !important;\n                    margin-bottom: 15px !important;\n                    color: var(--black-100);\n                }\n\n                h2 {\n                    font-weight: 700 !important;\n                    line-height: 27px !important;\n                    font-size: 18px !important;\n                    margin-bottom: 14px !important;\n                    color: var(--black-100);\n                }\n\n                h3 {\n                    font-weight: 700 !important;\n                    line-height: 24px !important;\n                    font-size: 16px !important;\n                    margin-bottom: 12px !important;\n                    color: var(--black-100);\n                }\n\n                h4 {\n                    font-weight: 700 !important;\n                    line-height: 20px !important;\n                    font-size: 14px !important;\n                    margin-bottom: 11px !important;\n\n                    @media (prefers-color-scheme: dark) {\n                        color: var(--black-100);\n                        background: var(--black-20);\n                    }\n                }\n\n                blockquote {\n                    @media (prefers-color-scheme: dark) {\n                        background: var(--black-20);\n                    }\n                }\n\n                h5,\n                h6 {\n                    font-weight: 700 !important;\n                    line-height: 18px !important;\n                    font-size: 12px !important;\n                    margin-bottom: 9px !important;\n                    color: var(--black-100) !important;\n                    @media (prefers-color-scheme: dark) {\n                        background: var(--black-20);\n                    }\n                }\n\n                .e-jx3-resource {\n                    overflow: hidden;\n                }\n\n                p {\n                    font-weight: 400 !important;\n                    line-height: 20px !important;\n                    font-size: 14px !important;\n                    margin-bottom: 11px !important;\n                    color: var(--black-100);\n                }\n\n                .text {\n                    display: inline-block !important;\n                    font-weight: 400 !important;\n                    line-height: 20px !important;\n                    font-size: 14px !important;\n                    margin-bottom: 11px !important;\n                    color: var(--black-100);\n                }\n\n                hr {\n                    margin-bottom: 11px !important;\n                    margin-top: 8px !important;\n                }\n            }\n        }\n\n        .u-show-log {\n            margin-top: 20px;\n            text-align: center;\n            width: 100%;\n            color: var(--black-40, rgba(255, 255, 255, 0.4));\n\n            /* 12 Regular */\n            font-size: 12px;\n            font-style: normal;\n            font-weight: 400;\n            line-height: 18px; /* 150% */\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./detail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./detail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=b0200c86\"\nimport script from \"./detail.vue?vue&type=script&lang=js\"\nexport * from \"./detail.vue?vue&type=script&lang=js\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=b0200c86&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}