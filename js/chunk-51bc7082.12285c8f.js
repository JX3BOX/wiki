(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51bc7082"],{"0c88":function(t,e,a){"use strict";a("3f47")},"13d5":function(t,e,a){"use strict";var n=a("23e7"),s=a("d58f").left,i=a("a640"),r=a("2d00"),c=a("605d"),o=!c&&r>79&&r<83,l=o||!i("reduce");n({target:"Array",proto:!0,forced:l},{reduce:function(t){var e=arguments.length;return s(this,t,e,e>1?arguments[1]:void 0)}})},2529:function(t,e,a){"use strict";a("b245")},3367:function(t,e,a){"use strict";a.r(e);a("ac1f"),a("841c");var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-knowledge-index"},[e("Search",{on:{search:t.onSearchKey}}),t.search?e("knowledgeList",{attrs:{list:t.list,total:t.total,pagination:t.pagination},on:{onPageKey:t.onPageKey}}):[e("wikiGuide"),e("wikiJargon"),e("wikiRecent")]],2)},s=[],i=(a("d3b7"),a("9b18")),r=a("fd0c"),c=(a("9911"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-knowledge-panel"},[e("div",{staticClass:"m-title"},[t._m(0),e("router-link",{staticClass:"u-more",attrs:{to:"/type/game"}},[t._v("查看更多 »")])],1),e("div",{staticClass:"m-guide m-panel"},t._l(t.data,(function(a,n){return e("div",{key:n,staticClass:"u-guide"},[e("div",{staticClass:"u-title"},[t._v(t._s(a.label))]),e("div",{staticClass:"u-list"},t._l(a.menus,(function(a,n){return e("a",{key:n,staticClass:"u-label",attrs:{href:a.link},domProps:{innerHTML:t._s(a.label)}})})),0)])})),0)])}),o=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"u-text"},[e("i",{staticClass:"el-icon-orange"}),e("span",[t._v(" 玩法指南")])])}],l=(a("a15b"),a("13d5"),a("b0c0"),a("434b")),u={name:"Guide",data:function(){return{data:""}},computed:{},watch:{},methods:{getGuideData:function(){var t=this;Object(l["d"])({key:["guide-pve","guide-pvx","guide-pvp"].join(",")}).then((function(e){t.data=e.reduce((function(t,e){return t[e.name]=e,t}),{})}))}},created:function(){this.getGuideData()}},d=u,p=(a("442b"),a("2877")),m=Object(p["a"])(d,c,o,!1,null,"4023df21",null),f=m.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-knowledge-panel"},[e("div",{staticClass:"m-title"},[t._m(0),e("router-link",{staticClass:"u-more",attrs:{to:"/type/jargon"}},[t._v("查看更多 »")])],1),e("div",{staticClass:"m-panel m-jargon"},t._l(t.list,(function(a,n){return e("div",{key:n,staticClass:"u-jargon"},[e("i",{staticClass:"el-icon-collection-tag"}),e("router-link",{staticClass:"u-name",attrs:{to:"/view/"+a.id}},[t._v(t._s(a.name))])],1)})),0)])},h=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"u-title-left"},[e("i",{staticClass:"el-icon-postcard"}),e("span",[t._v(" 术语大全")])])}],v={name:"Jargon",props:[],data:function(){return{list:""}},computed:{},watch:{},methods:{getJargon:function(){var t=this;Object(l["b"])({type:"jargon",per:48}).then((function(e){var a;t.list=(null===(a=e.data.data)||void 0===a?void 0:a.list)||[]}))}},created:function(){this.getJargon()}},_=v,b=(a("2529"),Object(p["a"])(_,g,h,!1,null,"58810996",null)),k=b.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-knowledge-panel"},[t._m(0),e("div",{staticClass:"m-recent m-panel"},t._l(t.list,(function(a,n){return e("div",{key:n,staticClass:"m-post"},[e("div",{staticClass:"m-head"},[e("div",{staticClass:"m-source"},[e("div",{staticClass:"u-source"},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 412.72 412.72","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M404.72 82.944h-27.2v-9.28a8 8 0 00-5.76-8 225.345 225.345 0 00-57.68-7.36c-32 0-75.6 7.2-107.84 40-32-33.12-75.92-40-107.84-40a225.345 225.345 0 00-57.68 7.36 8 8 0 00-5.76 8v9.2H8a8 8 0 00-8 8v255.52a8 8 0 008 8 7.996 7.996 0 003.92-1.04c.8-.4 80.8-44.16 192.48-16h1.92a8.008 8.008 0 001.92 0c112-28.4 192 15.28 192.48 16a8 8 0 0012-6.88V90.944a8 8 0 00-8-8zM16 333.664V98.944h19.12v200.64a8 8 0 009.2 8 350.096 350.096 0 0150-4 207.516 207.516 0 0168.32 10.32A294.1 294.1 0 0016 333.664zm78.32-46a351.994 351.994 0 00-43.52 2.8V79.984a220.645 220.645 0 0147.44-5.28c29.92 0 71.2 6.88 99.84 39.2l.24 199.28c-16.64-10.88-49.12-25.52-104-25.52zm120-173.76c28.64-32 69.92-39.2 99.84-39.2a221.61 221.61 0 0147.44 5.28v210.48a351.895 351.895 0 00-43.28-2.88c-54.56 0-87.12 14.64-104 25.52v-199.2zm182.32 219.76a294.158 294.158 0 00-146.96-19.76 208.008 208.008 0 0168.64-10.32 349.994 349.994 0 0150.32 3.92 8 8 0 009.2-8V98.944h19.12l-.32 234.72z"}})]),e("router-link",{staticClass:"u-name",attrs:{to:{name:"view",params:{source_id:a.source_id}}}},[t._v(t._s(a.title))])],1),a.remark?e("div",{staticClass:"u-remark",domProps:{textContent:t._s("📑 "+a.remark)}}):t._e()])]),e("div",{staticClass:"m-body"},[e("div",{staticClass:"u-excerpt",attrs:{to:{name:"view",params:{source_id:a.source_id}}},domProps:{innerHTML:t._s(t.ellipsis(a.content))}})]),e("div",{staticClass:"m-user"},[e("div",{staticClass:"u-author"},[e("img",{staticClass:"u-icon",attrs:{src:t.showAvatar(a.user),alt:a.user_nickname}}),e("a",{staticClass:"u-name",attrs:{href:a.user_id?t.authorLink(a.user_id):null},domProps:{textContent:t._s(a.user_nickname)}})]),e("div",{staticClass:"u-updated",domProps:{textContent:t._s(t.ts2str(a.updated))}})])])})),0)])},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-title"},[e("span",{staticClass:"u-title-left"},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v(" 最新更新")])])])}],C=a("85e4"),j=a("500d"),x=a("cf45"),O={name:"Recent",data:function(){return{list:[]}},computed:{},watch:{},methods:{getRecentData:function(){var t=this;j["a"].latest({type:"knowledge"},{client:null}).then((function(e){var a,n;t.list=null!==(a=null===(n=e.data.data)||void 0===n?void 0:n.list)&&void 0!==a?a:[]}),(function(){t.list=[]}))},showAvatar:function(t){var e=(null===t||void 0===t?void 0:t.user_avatar)||"";return Object(C["showAvatar"])(e)},ts2str:C["ts2str"],authorLink:C["authorLink"],ellipsis:x["a"]},created:function(){this.getRecentData()}},P=O,S=(a("9e60"),Object(p["a"])(P,w,y,!1,null,"6fb5b718",null)),T=S.exports,$={name:"KnowledgeIndex",components:{Search:i["a"],knowledgeList:r["a"],wikiJargon:k,wikiGuide:f,wikiRecent:T},data:function(){return{loading:!1,search:"",list:"",page:1,per:20,total:1,pages:1}},computed:{params:function(){var t={per:this.per,page:this.page,_search:this.search};return t},pagination:function(){return{page:this.page,total:this.total,per:this.per}}},methods:{getSearchData:function(){var t=this;this.loading=!0,Object(l["b"])(this.params).then((function(e){t.list=e.data.data.list||[],t.total=e.data.data.total})).finally((function(){t.loading=!1}))},onSearchKey:function(t){this.search=t,this.page=1},onPageKey:function(t){this.page=t}},watch:{params:function(){this.getSearchData()}},created:function(){}},H=$,J=(a("7538"),Object(p["a"])(H,n,s,!1,null,null,null));e["default"]=J.exports},3468:function(t,e,a){},"3f47":function(t,e,a){},"442b":function(t,e,a){"use strict";a("597e")},"498a":function(t,e,a){"use strict";var n=a("23e7"),s=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},"500d":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("41cb");const s=(t,e)=>Object(n["d"])().get("/pet/"+t,{params:e}),i=location.href.includes("origin")?"origin":"std",r={latest({type:t},e){return Object(n["a"])().get("/api/cms/wiki/post/latest",{params:{client:i,...e,type:t}})},mine(t){return Object(n["a"])().get("/api/cms/wiki/post/mine",{params:t})},counter({type:t},e){return Object(n["a"])().get("/api/cms/wiki/post/counter",{params:{client:i,...e,type:t}})},achievements(t){return Object(n["d"])().get("/achievement/list",{params:{client:i,...t}})},get({type:t,id:e},a){return Object(n["a"])().get(`/api/cms/wiki/post/type/${t}/source/${e}`,{params:{client:i,...a}})},getById(t){return Object(n["a"])().get("/api/cms/wiki/post/id/"+t)},post(t){return Object(n["a"])().post("/api/cms/wiki/post",t)},update(t,e){return Object(n["a"])().put("/api/cms/wiki/post/"+t,e)},remove(t){return Object(n["a"])().delete("/api/cms/wiki/post/"+t)},versions({type:t,id:e},a){return Object(n["a"])().get(`/api/cms/wiki/post/type/${t}/source/${e}/versions`,{params:{client:i,...a}})},async handleMix(t,e,a,n){let s="",i="",r=!0,c=!1,o=[];if("std"===a){const l=await this.get({type:t,id:e},{client:a,...n});return s=l.data.data.post,i=l.data.data.source,o=l.data.data.users,s&&(r=!1),console.log("获取重制攻略"),{post:s,source:i,isEmpty:r,compatible:c,type:t,source_id:e,users:o}}{const l=await this.get({type:t,id:e},{client:a,...n});i=l.data.data.source,s=l.data.data.post,o=l.data.data.users,s&&(r=!1),console.log("获取缘起攻略");const u=!!l.data.data.post;return u?{post:s,source:i,isEmpty:r,compatible:c,type:t,source_id:e,users:o}:(console.log("兼容：获取重制攻略"),this.get({type:t,id:e},{client:"std",...n}).then(a=>(s=a.data.data.post,i||(i=a.data.data.source),s&&(r=!1),o=a.data.data.users,c=!0,{post:s,source:i,isEmpty:r,compatible:c,type:t,source_id:e,users:o})))}},async mix({type:t,id:e,client:a},n){let i="",r="";if(i="cj"===t?"achievement":"pet"===t?"item":t||"achievement",e){if(r=e,"pet"===t){const t=await s(e,{client:a});let r=t.data,c=r.ItemTabType+"_"+r.ItemTabIndex;return this.handleMix(i,c,a,n)}return this.handleMix(i,r,a,n)}}}},5180:function(t,e,a){},"55e2":function(t,e,a){"use strict";a("3468")},"597e":function(t,e,a){},7538:function(t,e,a){"use strict";a("5180")},"837d":function(t,e,a){},8473:function(t,e,a){},"9b18":function(t,e,a){"use strict";a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-search-bar",class:"view"==t.$route.name?"can-return":""},[e("div",{staticClass:"m-return"},[e("el-button",{staticClass:"u-return-btn",on:{click:t.returnHandle}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v("返回")])],1),e("div",{staticClass:"m-search"},[e("el-input",{staticClass:"u-search-input",attrs:{placeholder:t.placeholder,clearable:""},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandle.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._t("default",(function(){return[e("i",{staticClass:"el-icon-search"}),t._v(" 关键词")]}))],2),e("el-button",{staticClass:"u-search-btn",attrs:{slot:"append",type:"primary",plain:""},on:{click:t.searchHandle},slot:"append"},[e("i",{staticClass:"el-icon-position"}),t._v(" 搜索")])],1)],1)])},s=[],i=(a("14d9"),{name:"CommonSearch",props:{placeholder:{type:String,default:"输入关键词「回车」进行搜索"}},data:function(){return{keyword:""}},methods:{returnHandle:function(){history.length<=1?this.$router.push({name:"home"}):history.back()},searchHandle:function(){var t=this.keyword;this.$emit("search",t)}}}),r=i,c=(a("0c88"),a("2877")),o=Object(c["a"])(r,n,s,!1,null,null,null);e["a"]=o.exports},"9e60":function(t,e,a){"use strict";a("837d")},a15b:function(t,e,a){"use strict";var n=a("23e7"),s=a("e330"),i=a("44ad"),r=a("fc6a"),c=a("a640"),o=s([].join),l=i!==Object,u=l||!c("join",",");n({target:"Array",proto:!0,forced:u},{join:function(t){return o(r(this),void 0===t?",":t)}})},ae25:function(t){t.exports=JSON.parse('{"game":"el-icon-orange","jargon":"el-icon-postcard","plot":"el-icon-collection","bigbang":"el-icon-mic","gossip":"el-icon-film","organization":"el-icon-school","player":"el-icon-user","sleep":"el-icon-map-location","npc":"el-icon-monitor","castle":"el-icon-coordinate","blacklist":"el-icon-warning-outline","other":"el-icon-more-outline"}')},b245:function(t,e,a){},b447:function(t,e,a){"use strict";a("8473")},c8d2:function(t,e,a){"use strict";var n=a("5e77").PROPER,s=a("d039"),i=a("5899"),r="​᠎";t.exports=function(t){return s((function(){return!!i[t]()||r[t]()!==r||n&&i[t].name!==t}))}},cf45:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("ac1f"),a("5319"),a("498a"),a("fb6a");var n=function(t){return t=t?t.trim().replace(/<[^>]*>/g,""):"",t.length>100?t.slice(0,100)+"...":t}},d58f:function(t,e,a){"use strict";var n=a("59ed"),s=a("7b0b"),i=a("44ad"),r=a("07fa"),c=TypeError,o=function(t){return function(e,a,o,l){var u=s(e),d=i(u),p=r(u);n(a);var m=t?p-1:0,f=t?-1:1;if(o<2)while(1){if(m in d){l=d[m],m+=f;break}if(m+=f,t?m<0:p<=m)throw new c("Reduce of empty array with no initial value")}for(;t?m>=0:p>m;m+=f)m in d&&(l=a(l,d[m],m,u));return l}};t.exports={left:o(!1),right:o(!0)}},fd0c:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[t.list?e("div",{staticClass:"m-knowledge"},[t.list.length?t._l(t.list,(function(t,a){return e("knowledgeItem",{key:a,attrs:{data:t}})})):e("div",{staticClass:"m-noKnowledge"},[e("el-alert",{attrs:{title:"没有对应的百科",type:"info",center:"","show-icon":""}})],1)],2):t._e(),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.pagination.per,total:t.pagination.total,"current-page":t.pagination.page},on:{"update:currentPage":function(e){return t.$set(t.pagination,"page",e)},"update:current-page":function(e){return t.$set(t.pagination,"page",e)},"current-change":t.changePage}})],1)},s=[],i=(a("b0c0"),function(){var t=this,e=t._self._c;return t.data?e("router-link",{staticClass:"m-knowledge-item",attrs:{to:{name:"view",params:{source_id:t.data.id}}}},[e("div",{staticClass:"u-name"},[e("span",{staticClass:"u-type"},[e("i",{staticClass:"u-icon",class:t.icons[t.data.type]}),t._v(" "+t._s(t.data.label))]),e("span",{staticClass:"u-title"},[t._v(t._s(t.data.name))])]),t.hasTag(t.data.post)?e("div",{staticClass:"u-tags"},[e("i",{staticClass:"el-icon-price-tag"}),t._l(t.formatTags(t.data.post.tags),(function(a){return e("span",{key:a},[t._v(t._s(a))])}))],2):t._e(),t.data.post?e("span",{staticClass:"u-remark"},[e("i",{staticClass:"el-icon-edit"}),t._v("最后修订："+t._s(t.data.post.remark)+"@"+t._s(t.data.post.user_nickname)+" ")]):t._e(),t.data.updated?e("div",{staticClass:"u-updated"},[e("i",{staticClass:"el-icon-refresh"}),e("span",[t._v(" 最后更新于"+t._s(t.date_format(t.data.updated)))])]):t._e()]):t._e()}),r=[],c=(a("d81d"),a("498a"),a("ae25")),o=a("85e4"),l={name:"item",props:["data"],data:function(){return{icons:c,date_format:o["ts2str"]}},computed:{},watch:{},methods:{hasTag:function(t){return t&&t.tags},formatTags:function(t){return t.split(",").map((function(t){return t.trim()}))}},created:function(){}},u=l,d=(a("55e2"),a("2877")),p=Object(d["a"])(u,i,r,!1,null,null,null),m=p.exports,f={name:"list",props:["list","pagination"],components:{knowledgeItem:m},methods:{changePage:function(t){this.$emit("onPageKey",t)}}},g=f,h=(a("b447"),Object(d["a"])(g,n,s,!1,null,null,null));e["a"]=h.exports}}]);
//# sourceMappingURL=chunk-51bc7082.12285c8f.js.map