{"version":3,"sources":["webpack:///./src/views/cj/search.vue","webpack:///src/views/cj/search.vue","webpack:///./src/views/cj/search.vue?7a58","webpack:///./src/views/cj/search.vue?1b25","webpack:///./src/views/cj/search.vue?6f63","webpack:///./src/components/cj/achievements.vue","webpack:///src/components/cj/achievements.vue","webpack:///./src/components/cj/achievements.vue?3ffe","webpack:///./src/components/cj/achievements.vue?1e9b"],"names":["render","_vm","this","_c","_self","staticClass","isEmpty","_v","_e","isLogin","isVirtual","attrs","on","switchAll","model","value","isAll","callback","$$v","expression","selectedAchievements","length","$event","stopPropagation","finishVirtual","apply","arguments","_s","cancelVirtual","achievements","achievements_count","page","page_change_handle","staticRenderFns","name","components","Achievements","props","data","computed","_this$achievements","User","currentRole","$store","state","role","filter","item","checked","_this$currentRole","jx3id","achievementsVirtual","watch","$route","immediate","handler","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","parseInt","query","get_achievements","params","keyword","sent","map","_objectSpread","total","stop","methods","bol","Promise","resolve","reject","searchAchievements","then","$router","push","_this2","ids","ID","join","setVirtualRoleAchievements","res","$notify","title","message","type","list","Array","from","Set","concat","commit","key","_this3","cancelVirtualRoleAchievements","includes","component","_l","achievement","target","jump","AchievementSingle","scroll_tops","setTimeout","window","scrollTo"],"mappings":"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","file":"js/chunk-f810ce20.79cf96e0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-search-view\"},[(_vm.isEmpty)?_c('span',{staticClass:\"u-list-empty\"},[_vm._v(\"üëª ÊöÇÊó†ËÆ∞ÂΩï\")]):_vm._e(),(_vm.isLogin && _vm.isVirtual && !_vm.isEmpty)?_c('div',{staticClass:\"m-normal-op\"},[_c('el-checkbox',{attrs:{\"border\":\"\",\"size\":\"small\"},on:{\"change\":_vm.switchAll},model:{value:(_vm.isAll),callback:function ($$v) {_vm.isAll=$$v},expression:\"isAll\"}},[_vm._v(\"ÂÖ®ÈÄâ\")]),(_vm.selectedAchievements.length)?[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-check\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.finishVirtual.apply(null, arguments)}}},[_vm._v(\" ÊâπÈáèËÆæ‰∏∫ÂÆåÊàê(\"+_vm._s(_vm.selectedAchievements.length)+\") \")]),_c('el-button',{attrs:{\"type\":\"info\",\"icon\":\"el-icon-close\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelVirtual.apply(null, arguments)}}},[_vm._v(\" ÊâπÈáèÂèñÊ∂àÂÆåÊàê(\"+_vm._s(_vm.selectedAchievements.length)+\") \")])]:_vm._e()],2):_vm._e(),_c('Achievements',{attrs:{\"achievements\":_vm.achievements}}),_c('el-pagination',{attrs:{\"background\":\"\",\"total\":_vm.achievements_count,\"hide-on-single-page\":\"\",\"layout\":\"prev, pager, next\",\"current-page\":_vm.page,\"page-size\":_vm.length,\"prev-html\":\"&laquo;\",\"next-html\":\"&raquo;\"},on:{\"current-change\":_vm.page_change_handle}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-search-view\">\n        <span class=\"u-list-empty\" v-if=\"isEmpty\">üëª ÊöÇÊó†ËÆ∞ÂΩï</span>\n        <div v-if=\"isLogin && isVirtual && !isEmpty\" class=\"m-normal-op\">\n            <el-checkbox v-model=\"isAll\" border @change=\"switchAll\" size=\"small\">ÂÖ®ÈÄâ</el-checkbox>\n            <template v-if=\"selectedAchievements.length\">\n                <el-button plain icon=\"el-icon-check\" @click.stop=\"finishVirtual\" size=\"small\">\n                    ÊâπÈáèËÆæ‰∏∫ÂÆåÊàê({{ selectedAchievements.length }})\n                </el-button>\n                <el-button type=\"info\" icon=\"el-icon-close\" @click.stop=\"cancelVirtual\" size=\"small\">\n                    ÊâπÈáèÂèñÊ∂àÂÆåÊàê({{ selectedAchievements.length }})\n                </el-button>\n            </template>\n        </div>\n        <Achievements :achievements=\"achievements\" />\n        <el-pagination\n            background\n            :total=\"achievements_count\"\n            hide-on-single-page\n            layout=\"prev, pager, next\"\n            :current-page=\"page\"\n            :page-size=\"length\"\n            prev-html=\"&laquo;\"\n            next-html=\"&raquo;\"\n            @current-change=\"page_change_handle\"\n        ></el-pagination>\n    </div>\n</template>\n\n<script>\nimport Achievements from \"@/components/cj/achievements.vue\";\nimport { searchAchievements, setVirtualRoleAchievements, cancelVirtualRoleAchievements } from \"@/service/achievement\";\n\nimport User from \"@jx3box/jx3box-common/js/user\";\nexport default {\n    name: \"SearchPage\",\n    components: {\n        Achievements,\n    },\n    props: [],\n    data() {\n        return {\n            achievements: [],\n            achievements_count: 0,\n            page: 1,\n            length: 15,\n            isAll: false,\n        };\n    },\n    computed: {\n        isEmpty() {\n            return !this.achievements?.length;\n        },\n        isLogin() {\n            return User.isLogin();\n        },\n        currentRole() {\n            return this.$store.state.role;\n        },\n        selectedAchievements() {\n            return this.achievements.filter((item) => item.checked);\n        },\n        isVirtual() {\n            // ÊòØÂê¶ÊòØËôöÊãüËßíËâ≤ - È≠îÁõíË¥¶Âè∑\n            return !this.currentRole?.jx3id;\n        },\n        achievementsVirtual() {\n            return this.$store.state.achievementsVirtual;\n        },\n    },\n    watch: {\n        $route: {\n            immediate: true,\n            async handler() {\n                this.isAll = false;\n                this.page = parseInt(this.$route.query.page) || 1;\n                let data = await this.get_achievements(this.$route.params.keyword, this.page, this.length);\n                const achievements = data.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n                this.achievements = achievements;\n                this.achievements_count = data.total;\n            },\n        },\n    },\n    methods: {\n        switchAll(bol) {\n            this.achievements = this.achievements.map((item) => {\n                return {\n                    ...item,\n                    checked: bol,\n                };\n            });\n        },\n        // Ëé∑ÂèñÊàêÂ∞±ÊêúÁ¥¢ÂàóË°®\n        get_achievements(keyword, page, length) {\n            let data = { keyword: keyword, page: page };\n            if (typeof length !== \"undefined\") data[\"limit\"] = length;\n            return new Promise((resolve, reject) => {\n                searchAchievements(data).then(\n                    (data) => {\n                        data = data.data;\n                        resolve(data.data);\n                    },\n                    () => {\n                        resolve(false);\n                    }\n                );\n            });\n        },\n        page_change_handle(page) {\n            this.$router.push({\n                name: \"search\",\n                params: { keyword: this.$route.params.keyword },\n                query: { page: page },\n            });\n        },\n        finishVirtual() {\n            const ids = this.selectedAchievements.map((item) => item.ID + \"\");\n            const data = {\n                achievements: ids.join(),\n            };\n            setVirtualRoleAchievements(data).then((res) => {\n                this.$notify({\n                    title: \"Êìç‰ΩúÊàêÂäü\",\n                    message: \"Â∑≤Â∞ÜÈÄâ‰∏≠ÊàêÂ∞±Ê†áËÆ∞‰∏∫Â∑≤ÂÆåÊàê\",\n                    type: \"success\",\n                });\n                const list = Array.from(new Set(this.achievementsVirtual.concat(ids)));\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n                this.isAll = false;\n                this.achievements = this.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n            });\n        },\n        cancelVirtual() {\n            const ids = this.selectedAchievements.map((item) => item.ID + \"\");\n            const data = {\n                achievements: ids.join(),\n            };\n            cancelVirtualRoleAchievements(data).then((res) => {\n                this.$notify({\n                    title: \"Êìç‰ΩúÊàêÂäü\",\n                    message: \"Â∑≤Â∞ÜÈÄâ‰∏≠ÊàêÂ∞±Ê†áËÆ∞‰∏∫ÂæÖÂÆåÊàê\",\n                    type: \"success\",\n                });\n                const list = this.achievementsVirtual.filter((item) => !ids.includes(item));\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n                this.isAll = false;\n                this.achievements = this.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n            });\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n.m-search-view {\n    .m-search-op {\n        padding-bottom: 10px;\n        .el-checkbox {\n            margin-right: 10px;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./search.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./search.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=2860b572\"\nimport script from \"./search.vue?vue&type=script&lang=js\"\nexport * from \"./search.vue?vue&type=script&lang=js\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=2860b572&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./search.vue?vue&type=style&index=0&id=2860b572&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"m-achievement-singles\"},_vm._l((_vm.achievements),function(achievement,key){return _c('AchievementSingle',{key:key,attrs:{\"achievement\":achievement,\"target\":_vm.target,\"jump\":_vm.jump,\"initFold\":true}})}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <ul class=\"m-achievement-singles\">\n        <AchievementSingle\n            v-for=\"(achievement, key) in achievements\"\n            :key=\"key\"\n            :achievement=\"achievement\"\n            :target=\"target\"\n            :jump=\"jump\"\n            :initFold=\"true\"\n        />\n    </ul>\n</template>\n\n<script>\nimport AchievementSingle from \"@/components/cj/achievement-single.vue\";\n\nexport default {\n    name: \"Achievements\",\n    props: [\"achievements\", \"target\", \"jump\"],\n    components: {\n        AchievementSingle,\n    },\n    watch: {\n        achievements() {\n            if (this.$route && typeof this.$store.state.scroll_tops[this.$route.name] !== \"undefined\") {\n                setTimeout(() => {\n                    window.scrollTo(0, this.$store.state.scroll_tops[this.$route.name]);\n                }, 200);\n            }\n        },\n    },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./achievements.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./achievements.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./achievements.vue?vue&type=template&id=0e0bb220\"\nimport script from \"./achievements.vue?vue&type=script&lang=js\"\nexport * from \"./achievements.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}