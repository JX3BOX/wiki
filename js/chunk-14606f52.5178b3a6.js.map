{"version":3,"sources":["webpack:///./src/components/cj/mobile/comment-list.vue?a0ee","webpack:///./src/views/cj/mobile/detail.vue?46f1","webpack:///./src/views/cj/mobile/detail.vue","webpack:///./src/components/cj/mobile/comment-list.vue","webpack:///src/components/cj/mobile/comment-list.vue","webpack:///./src/components/cj/mobile/comment-list.vue?1cb3","webpack:///./src/components/cj/mobile/comment-list.vue?46bc","webpack:///src/views/cj/mobile/detail.vue","webpack:///./src/views/cj/mobile/detail.vue?cc56","webpack:///./src/views/cj/mobile/detail.vue?0e55"],"names":["render","_vm$source","_vm$wiki_post","_vm$wiki_post$post","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","_l","source","SeriesAchievementList","item","key","ID","on","changeCurrent","attrs","iconUrl","IconID","class","complete","isComplete","disabled","isVirtual","setConfirm","_v","_s","authors","user_id","showAvatar","user_avatar","updated_at","clearContent","wiki_post","post","content","id","isFromTarget","_e","ref","staticStyle","btnOptions","drawerOptions","onSearch","scopedSlots","_u","fn","_vm$$refs$suspendComm","_vm$$refs$suspendComm2","userSelectShow","$refs","suspendCommon","clickDrawer","type","text","isCollect","fixIsActive","proxy","currentRole","$event","setRole","conformShow","confirmOk","staticRenderFns","comments","_item$children","toDetail","user_nickname","dayjs","commentDate","format","children","length","reply","parent","noMoreData","props","data","reply_form","User","getInfo","page","pageSize","total","computed","isWujie","_this$$route$name","$route","indexOf","client","location","href","includes","mounted","_onScroll","handleScroll","bind","window","addEventListener","beforeDestroy","removeEventListener","methods","scrollTop","pageYOffset","document","documentElement","body","windowHeight","innerHeight","docHeight","scrollHeight","loadMore","get_comments","_this","append","arguments","undefined","filter","outputs","_loop","c","index","parent_id","map","show","push","sourceId","wikiComment","list","then","res","i","concat","create_comment","form","_this2","source_id","String","$message","message","finally","handleCurrentChange","star_comment","comment","is_star","_this3","star","top_comment","is_top","_this4","top","watch","immediate","handler","component","components","ConfirmOkDrawer","WikiItem","MiniprogramCommentList","UserSelectDrawer","SuspendCommon","Article","compatible","is_empty","imageCount","loadedImageCount","images","imagesLoaded","$store","state","role","get","visible","set","val","$emit","params","post_id","isRevision","author_id","_this$wiki_post$post","user_name","_this$wiki_post","_this$wiki_post$post2","_this$wiki_post2","_this$wiki_post2$post","ts2str","updated","_this$wiki_post3","_this$wiki_post3$user","_this$wiki_post3$user2","users","user","avatar","display_name","nickname","favTitle","_this$wiki_post4","_this$wiki_post4$sour","Name","prefix","_this$author_info","_this$author_info2","hideType","direction","drawerTitle","author","author_info","subscribeType","postType","title","url","laterOn","content_meta_id","showHome","showIcon","showMore","completeAchievements","achievements","achievementsVirtual","hadCompleted","_this$currentRole","jx3id","loadData","loadRevision","deep","localStorage","setItem","commit","loadRoleAchievements","loadVirtualAchievements","isSession","icon_url","next","isMiniProgram","wx","miniProgram","navigateTo","openChild","childrenShow","console","log","replace","match","src","publish_url","publishLink","triggerStat","postStat","$router","initImageLoader","$nextTick","container","getElementById","querySelectorAll","preloadAllImages","setGlobalReady","loadedInThisBatch","Array","from","forEach","img","originalSrc","handleImageLoad","tempImg","Image","onload","checkImageLoadCompletion","onerror","error","loadedCount","setTimeout","allLoaded","every","__READY__","_loadData","_asyncToGenerator","_regenerator","m","_callee","w","_context","n","get_achievement","_res$data","_res$data$data","achievement","wiki","mix","isEmpty","reportNow","caller","isLogin","postHistory","source_type","link","isRobot","a","apply","_this5","getById","_res$data$data2","_objectSpread","loadConfig","getConfig","isTest","report","_this6","getRoleGameAchievements","_res$data2","_res$data2$data","_res$data3","_res$data3$data","isSync","split","showSchoolIcon","_this7","getVirtualRoleAchievements","_res$data4","_res$data4$data","finishVirtual","cancelVirtual","curr","_this8","ids","selectedAchievements","join","setVirtualRoleAchievements","$notify","Set","isAll","checked","_this9","cancelVirtualRoleAchievements"],"mappings":"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","file":"js/chunk-14606f52.5178b3a6.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./comment-list.vue?vue&type=style&index=0&id=ce1e9862&prod&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./detail.vue?vue&type=style&index=0&id=6015bc88&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"c-var p-achievement-detail\"},[_c('div',{staticClass:\"m-main-box\"},[_c('div',{staticClass:\"m-achievement-info\"},[_c('div',{staticClass:\"m-sub-list\"},_vm._l((_vm.source?.SeriesAchievementList || []),function(item){return _c('div',{key:item.ID,staticClass:\"u-sub-achievement\",on:{\"click\":() => _vm.changeCurrent(item)}},[_c('img',{attrs:{\"src\":_vm.iconUrl(item.IconID)}})])}),0),_c('wiki-item',{attrs:{\"item\":_vm.source}}),_c('button',{staticClass:\"m-confirm\",class:{complete: _vm.isComplete,disabled:!_vm.isVirtual},on:{\"click\":_vm.setConfirm}},[_vm._v(_vm._s(_vm.isComplete ? \"已完成\" : \"设为已完成\"))])],1),_c('div',{staticClass:\"m-wiki\"},[_c('div',{staticClass:\"m-wiki-header\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(\"成就攻略\")]),_c('div',{staticClass:\"u-avatar-list\"},_vm._l((_vm.authors),function(item){return _c('div',{key:item.user_id,staticClass:\"u-avatar\"},[_c('img',{attrs:{\"src\":_vm.showAvatar(item.user_avatar)}})])}),0),_c('div',{staticClass:\"u-time\"},[_vm._v(\" \"+_vm._s(_vm.updated_at)+\" \")])]),_c('div',{staticClass:\"m-content-box\"},[_c('Article',{attrs:{\"id\":\"wikiArticle\",\"content\":_vm.clearContent(_vm.wiki_post?.post?.content)}})],1),_c('div',{staticClass:\"u-show-log\"},[_vm._v(\"查看历史修订\")])])]),_c('div',{staticClass:\"m-comments\"},[_c('miniprogram-comment-list',{attrs:{\"source-id\":_vm.id,\"type\":\"achievement\"}})],1),(!_vm.isFromTarget)?_c('suspend-common',{ref:\"suspendCommon\",staticClass:\"u-suspend-common\",staticStyle:{\"width\":\"100%\"},attrs:{\"btn-options\":_vm.btnOptions,\"drawer-options\":_vm.drawerOptions},on:{\"search\":_vm.onSearch},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('div',{staticClass:\"m-more-action\"},[_c('div',{staticClass:\"u-action\",on:{\"click\":() => (_vm.userSelectShow = true)}},[_c('svg',{attrs:{\"width\":\"25\",\"height\":\"24\",\"viewBox\":\"0 0 25 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M17.5 12a2.25 2.25 0 012.25 2.25V15c0 2.956-2.79 6-7.5 6s-7.5-3.044-7.5-6v-.75A2.25 2.25 0 017 12h10.5zm-5.25-9.75a4.125 4.125 0 110 8.25 4.125 4.125 0 010-8.25z\",\"fill\":\"#FEDAA3\"}})])]),_c('div',{staticClass:\"u-action\",on:{\"click\":()=>_vm.$refs.suspendCommon.clickDrawer({ type: 'collect', text: '收藏' }, 1)}},[(_vm.$refs.suspendCommon?.isCollect)?_c('svg',{staticClass:\"icon\",attrs:{\"viewBox\":\"0 0 1024 1024\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M467.584 153.568c11.136-13.312 26.208-25.952 44.544-25.632 21.76-.064 38.016 16.992 50.272 33.056 23.968 32.576 42.336 68.768 62.368 103.808 10.112 17.472 18.944 35.776 30.944 52.096 8.48 11.616 22.08 17.824 35.712 21.056 41.6 10.4 83.744 18.528 125.152 29.792 21.6 6.304 44.192 12.64 61.952 27.136 15.04 12.096 20.992 33.408 15.552 51.776-6.752 23.456-22.208 42.976-36.832 62.048-23.584 29.536-48.576 57.92-72.992 86.784C662.688 473.28 540.384 351.904 418.88 229.664c15.072-26.048 29.408-52.8 48.704-76.096zm-261.696 10.688c2.624.128 7.872.32 10.464.448l-.384 2.816c9.92.928 18.688 6.432 25.568 13.376 39.424 39.488 78.976 78.848 118.304 118.4 45.024 42.464 87.808 87.232 131.904 130.656C577.6 515.808 663.36 601.728 749.312 687.488c38.24 40.672 78.656 79.232 117.76 119.04 9.824 10.336 22.208 19.36 27.2 33.216 3.552 14.464 1.76 31.328-9.568 42.016-14.528 17.792-44.448 19.168-60.544 2.816-18.272-17.984-36.544-36.032-54.336-54.496-.384 20.736-4.704 44.672-22.784 57.536-17.76 12.8-41.184 8.64-60.704 2.72-38.56-12.352-74.752-30.816-111.648-47.296-17.632-7.616-34.624-17.312-53.44-21.792-14.848-3.392-29.472 2.72-42.848 8.544-38.368 17.12-76.128 35.648-115.072 51.456C344.32 888.544 324.672 896 304 896.032c-15.68.16-31.328-7.968-39.296-21.632-10.368-17.44-10.88-38.528-11.072-58.304 1.088-50.336 7.936-100.288 11.968-150.432 1.088-14.304 1.504-29.568-5.568-42.56-8.832-16.032-21.952-29.024-33.472-43.072-26.752-31.968-55.168-62.752-78.816-97.184-12.576-18.88-24.896-42.016-17.568-65.248 6.176-20.832 26.688-32.352 45.664-39.648 36.256-13.536 74.496-20.544 112.032-29.536-35.2-34.912-70.08-70.144-105.248-105.12-7.616-7.424-14.272-16.544-15.264-27.424l-2.848.608.384-13.696 2.656.896c2.624-18.88 19.616-34.656 38.496-36.608l-.16-2.816z\",\"fill\":\"#FEDAA3\"}})]):_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M10.288 4.836c.778-1.289 2.646-1.289 3.424 0l1.15 1.903a2 2 0 001.257.914l2.166.505c1.465.341 2.043 2.119 1.058 3.256l-1.455 1.681a2 2 0 00-.48 1.48l.188 2.215c.128 1.5-1.384 2.598-2.77 2.012l-2.049-.864a2 2 0 00-1.554 0l-2.049.864c-1.387.585-2.898-.513-2.77-2.012l.189-2.216a2 2 0 00-.48-1.479l-1.456-1.68c-.985-1.138-.407-2.916 1.058-3.257l2.166-.505a2 2 0 001.258-.914l1.149-1.903z\",\"fill\":\"#FEDAA3\",\"stroke\":\"#FEDAA3\",\"stroke-width\":\"1.5\"}})])]),_c('div',{staticClass:\"u-action\",on:{\"click\":()=> _vm.$refs.suspendCommon.clickDrawer({ type: 'pin', text: '固定按钮' }, 1)}},[(_vm.$refs.suspendCommon?.fixIsActive)?_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M15 4.5l-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4L20 9.5\",\"stroke\":\"#FEDAA3\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})]):_c('svg',{staticClass:\"icon\",attrs:{\"viewBox\":\"0 0 1024 1024\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"100\",\"height\":\"100\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M624.864 119.424c6.144-7.872 13.696-16.928 24.672-16.64 7.68-.736 14.24 3.808 19.2 9.184 81.984 82.304 164.32 164.192 246.08 246.688 7.776 5.92 7.456 16.416 6.016 25.088-2.304 7.488-9.152 11.968-14.848 16.736-58.272 49.504-116.512 99.072-174.784 148.544-4.48 4.416-10.912 5.44-16.768 6.912-5.696 40.8-13.376 81.28-18.08 122.208 6.528 16.32 5.28 34.368 8.16 51.488 1.984 8.864-1.728 17.792-7.84 24.128-24.608 23.552-47.776 48.544-72.544 71.936-8.96 9.056-24.864 6.912-32.96-2.272-51.136-51.008-101.92-102.368-153.056-153.312-71.616 70.784-142.272 142.624-213.632 213.664-11.424 11.008-21.44 24.384-35.968 31.424-14.144 4.8-31.008 4.512-43.84-3.776-10.336-7.616-19.36-18.144-21.76-31.072-3.808-16.288 2.208-33.984 14.592-45.056 77.344-78.144 155.424-155.616 232.768-233.728-56.736-56.032-112.64-113.024-169.216-169.248-8.128-9.088-7.648-26.016 2.368-33.632 24.416-24.672 48.992-49.12 73.44-73.696 3.808-3.424 9.056-4.16 13.984-4.096 18.112.192 36.064 2.944 53.984 5.408 41.824-4.8 83.744-8.992 125.408-15.264.608-6.048 2.624-11.904 6.528-16.64 49.44-58.24 98.848-116.544 148.096-174.976z\",\"fill\":\"#D9D9D9\"}})])])])]},proxy:true}],null,false,2389856281)}):_vm._e(),_c('user-select-drawer',{attrs:{\"visible\":_vm.userSelectShow,\"current-role\":_vm.currentRole},on:{\"update:visible\":function($event){_vm.userSelectShow=$event},\"change\":_vm.setRole}}),_c('confirm-ok-drawer',{attrs:{\"visible\":_vm.conformShow},on:{\"update:visible\":function($event){_vm.conformShow=$event},\"confirm\":_vm.confirmOk}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-comment-list\",attrs:{\"id\":\"macro-comment\"}},[_vm._l((_vm.comments),function(item){return _c('div',{key:item.id,staticClass:\"m-comment-item\"},[_c('div',{staticClass:\"m-main-content\"},[_c('div',{staticClass:\"u-commenter-name\",on:{\"click\":function($event){return _vm.toDetail(item.user_id)}}},[_vm._v(\" \"+_vm._s(item.user_nickname)+\" \")]),_c('div',{staticClass:\"u-comment-content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"u-comment-time\"},[_vm._v(\" \"+_vm._s(_vm.dayjs(item?.commentDate).format(\"YYYY-MM-DD\"))+\" \")])]),(item.children?.length)?_c('div',{staticClass:\"m-child-comment\"},_vm._l((item.children),function(reply){return _c('div',{key:reply.id,staticClass:\"m-reply-item\"},[_c('div',{staticClass:\"u-replier-name\",on:{\"click\":function($event){return _vm.toDetail(reply.user_id)}}},[_vm._v(\" \"+_vm._s(reply.user_nickname)+\" \")]),_c('span',{staticClass:\"u-reply\"},[_vm._v(\"回复\")]),_c('div',{staticClass:\"u-replier-name\",on:{\"click\":function($event){reply.parent.user_id ? _vm.toDetail(reply.parent.user_id) : null}}},[_vm._v(\" \"+_vm._s(reply.parent.user_nickname)+\" \")]),_c('span',{staticClass:\"u-reply\"},[_vm._v(\"：\")]),_c('div',{staticClass:\"u-reply-content\"},[_vm._v(\" \"+_vm._s(reply.content)+\" \")])])}),0):_vm._e()])}),(_vm.loading)?_c('div',{staticClass:\"u-loading-more\"},[_vm._v(\"加载中...\")]):_vm._e(),(_vm.noMoreData)?_c('div',{staticClass:\"u-no-more\"},[_vm._v(\"没有更多评论了\")]):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-comment-list\"  id=\"macro-comment\">\n        <div\n            v-for=\"item in comments\"\n            :key=\"item.id\"\n            class=\"m-comment-item\"\n        >\n            <div class=\"m-main-content\">\n                <div class=\"u-commenter-name\"  @click=\"toDetail(item.user_id)\">\n                    {{item.user_nickname}}\n                </div>\n                <div class=\"u-comment-content\">\n                    {{item.content}}\n                </div>\n                <div class=\"u-comment-time\">\n                    {{dayjs(item?.commentDate).format(\"YYYY-MM-DD\")}}\n                </div>\n            </div>\n            <div class=\"m-child-comment\" v-if=\"item.children?.length\">\n                <div v-for=\"reply in item.children\" :key=\"reply.id\" class=\"m-reply-item\">\n                    <div class=\"u-replier-name\" @click=\"toDetail(reply.user_id)\">\n                        {{reply.user_nickname}}\n                    </div>\n                    <span class=\"u-reply\">回复</span>\n                    <div class=\"u-replier-name\" @click=\"reply.parent.user_id ? toDetail(reply.parent.user_id) : null\">\n                        {{reply.parent.user_nickname}}\n                    </div>\n                    <span class=\"u-reply\">：</span>\n                    <div class=\"u-reply-content\">\n                        {{reply.content}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-if=\"loading\" class=\"u-loading-more\">加载中...</div>\n        <div v-if=\"noMoreData\" class=\"u-no-more\">没有更多评论了</div>\n    </div>\n</template>\n\n<script>\n\nimport dayjs from \"dayjs\";\nimport { wikiComment } from \"@jx3box/jx3box-common/js/wiki_v2\";\nimport User from \"@jx3box/jx3box-common/js/user\";\n\nexport default {\n    name: \"MiniprogramCommentList\",\n    props: [\"type\", \"sourceId\"],\n    data() {\n        return {\n            comments: [],\n            reply_form: {\n                content: \"\",\n                user_nickname: User.getInfo().name,\n            },\n            page: 1,\n            pageSize: 10,\n            total: 0,\n            loading: false,\n        };\n    },\n    computed: {\n        isWujie() {\n            return this.$route.name?.indexOf(\"wujie\") > -1;\n        },\n        client: function () {\n            return location.href.includes(\"classic\") || location.href.includes(\"origin\") ? \"origin\" : \"std\";\n        },\n        noMoreData() {\n            // 判断是否已加载全部评论\n            return this.comments.length >= this.total && this.total > 0;\n        }\n    },\n    mounted() {\n        this._onScroll = this.handleScroll.bind(this);\n        window.addEventListener('scroll', this._onScroll);\n    },\n    beforeDestroy() {\n        window.removeEventListener('scroll', this._onScroll);\n    },\n    methods: {\n        dayjs,\n        handleScroll() {\n            if (this.loading || this.noMoreData) return;\n            // 距离底部100px时触发\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\n            const windowHeight = window.innerHeight;\n            const docHeight = document.documentElement.scrollHeight;\n            if (scrollTop + windowHeight + 100 >= docHeight) {\n                this.loadMore();\n            }\n        },\n        loadMore() {\n            if (this.loading || this.noMoreData) return;\n            this.page++;\n            this.get_comments(true); // 传递参数标记为加载更多\n        },\n        get_comments(append = false) {\n            if (!this.type || !this.sourceId) return;\n            this.loading = true;\n            wikiComment\n                .list({ type: this.type, id: this.sourceId }, { client: this.client, page: this.page })\n                .then((res) => {\n                    res = res.data;\n                    let comments = res.data.list;\n                    for (let i = 0; i < comments.length; i++) {\n                        comments[i][\"reply_form\"] = {\n                            show: false,\n                            content: \"\",\n                            user_nickname: User.getInfo().name,\n                        };\n                    }\n                    this.page = res.data.page;\n                    this.total = res.data.total;\n                    if (append) {\n                        // 追加评论\n                        this.comments = this.comments.concat(filter(comments, 0));\n                    } else {\n                        this.comments = filter(comments, 0);\n                    }\n                    this.loading = false;\n                });\n\n            function filter(comments, parent) {\n                let outputs = [];\n                for (let index in comments) {\n                    let c = comments[index];\n                    if (!c) continue;\n                    if (c.parent_id === parent) {\n                        // 递归\n                        let children = filter(c.children, c.id);\n                        c.children = children.map((item) => {\n                            item.parent = {\n                                user_id: c.user_id,\n                                user_nickname: c.user_nickname,\n                                id: c.id,\n                            };\n                            item.reply_form = {\n                                show: false,\n                                content: \"\",\n                                user_nickname: User.getInfo().name,\n                            };\n                            return item;\n                        });\n                        outputs.push(c);\n                    }\n                }\n                return outputs;\n            }\n        },\n        create_comment(form, parent_id = 0) {\n            // 校验评论内容\n            if (!form.content) {\n                this.$message({\n                    message: \"请先填写评论内容再尝试提交\",\n                    type: \"warning\",\n                });\n                return;\n            }\n            const data = {\n                type: this.type,\n                source_id: String(this.sourceId),\n                parent_id: parent_id,\n                user_nickname: form.user_nickname || User.getInfo().name,\n                content: form.content,\n                client: this.client,\n            };\n            wikiComment\n                .post(data)\n                .then((res) => {\n                    res = res.data;\n                    form.content = \"\";\n                    this.$message({\n                        message: \"提交成功，请等待审核\",\n                        type: \"success\",\n                    });\n                })\n                .finally(() => {\n                    form.show = false;\n                });\n        },\n        handleCurrentChange(page) {\n            this.page = page;\n            this.get_comments();\n        },\n        star_comment(comment, is_star) {\n            wikiComment.star(comment.id, {\n                is_star\n            }).then(() => {\n                this.page = 1; // 重置页码\n                this.get_comments();\n            });\n        },\n        top_comment(comment, is_top) {\n            wikiComment.top(comment.id, {\n                is_top\n            }).then(() => {\n                this.page = 1; // 重置页码\n                this.get_comments();\n            });\n        },\n\n        toDetail(){\n\n        },\n    },\n\n    watch: {\n        sourceId: {\n            immediate: true,\n            handler() {\n                this.page = 1; // 重置页码\n                this.get_comments();\n            },\n        },\n    },\n};\n</script>\n\n\n<style  lang=\"less\">\n.m-comment-list{\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    margin-top: 20px;\n    .m-comment-item{\n        display: flex;\n        padding: var(--20, 20px);\n        flex-direction: column;\n        gap: var(--8, 8px);\n\n        background: var(--primary-brand-4, #282828);\n\n        .m-main-content{\n            display: flex;\n            flex-direction: column;\n            gap: var(--8, 8px);\n\n            .u-commenter-name{\n                color: var(--secondary-cyan, #32ADE6);\n                font-size: 12px;\n                font-weight: 400;\n                line-height: 18px; /* 150% */\n            }\n            .u-comment-content{\n                color: var(--black-80, rgba(28, 28, 28, 0.80));\n                font-size: 14px;\n                font-weight: 400;\n                line-height: 20px; /* 142.857% */\n            }\n            .u-comment-time{\n                color: var(--black-40, rgba(28, 28, 28, 0.40));\n                font-size: 12px;\n                font-weight: 400;\n                line-height: 18px; /* 150% */\n            }\n        }\n\n        .m-child-comment{\n            display: flex;\n            padding: 12px;\n            flex-direction: column;\n            gap: 10px;\n            border-radius: 8px;\n            background: var(--black-5, rgba(28, 28, 28, 0.05));\n            .m-reply-item{\n                // 超出长度不分词\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                .u-replier-name{\n                    color: var(--secondary-cyan, #32ADE6);\n                    font-size: 12px;\n                    font-weight: 400;\n                    line-height: 18px; /* 150% */\n                    display: inline-block;\n                    margin-right: 4px;\n                }\n                .u-reply{\n                    color: var(--black-40, rgba(255, 255, 255, 0.40));\n                    font-size: 12px;\n                    font-weight: 400;\n                    line-height: 18px; /* 150% */\n                    margin-right: 4px;\n                }\n                .u-reply-content{\n                    color: var(--black-80, rgba(255, 255, 255, 0.80));\n                    font-size: 12px;\n                    font-weight: 400;\n                    line-height: 18px; /* 150% */\n                    display: inline;\n                }\n            }\n        }\n    }\n\n    .u-loading-more, .u-no-more {\n        text-align: center;\n        padding: 10px 0;\n        color: var(--black-40, rgba(28, 28, 28, 0.40));\n        font-size: 12px;\n        font-weight: 400;\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./comment-list.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./comment-list.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./comment-list.vue?vue&type=template&id=ce1e9862\"\nimport script from \"./comment-list.vue?vue&type=script&lang=js\"\nexport * from \"./comment-list.vue?vue&type=script&lang=js\"\nimport style0 from \"./comment-list.vue?vue&type=style&index=0&id=ce1e9862&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"c-var p-achievement-detail\" v-loading=\"loading\">\n        <div class=\"m-main-box\">\n            <div class=\"m-achievement-info\">\n                <div class=\"m-sub-list\">\n                    <div\n                        v-for=\"item in source?.SeriesAchievementList || []\"\n                        :key=\"item.ID\"\n                        class=\"u-sub-achievement\"\n                        @click=\"() => changeCurrent(item)\"\n                    >\n                        <img :src=\"iconUrl(item.IconID)\" />\n                    </div>\n                </div>\n                <wiki-item :item=\"source\" />\n                <button  class=\"m-confirm\" :class=\"{complete: isComplete,disabled:!isVirtual}\" @click=\"setConfirm\">{{ isComplete ? \"已完成\" : \"设为已完成\" }}</button>\n            </div>\n            <div class=\"m-wiki\">\n                <div class=\"m-wiki-header\">\n                    <div class=\"u-title\">成就攻略</div>\n                    <div class=\"u-avatar-list\">\n                        <div v-for=\"item in authors\" :key=\"item.user_id\" class=\"u-avatar\">\n                            <img :src=\"showAvatar(item.user_avatar)\" />\n                        </div>\n                    </div>\n                    <div class=\"u-time\">\n                        {{ updated_at }}\n                    </div>\n                </div>\n                <div class=\"m-content-box\">\n                    <Article id=\"wikiArticle\" :content=\"clearContent(wiki_post?.post?.content)\" />\n                </div>\n\n                <div class=\"u-show-log\">查看历史修订</div>\n            </div>\n        </div>\n        <div class=\"m-comments\">\n            <miniprogram-comment-list :source-id=\"id\" type=\"achievement\" />\n        </div>\n        <suspend-common\n            v-if=\"!isFromTarget\"\n            class=\"u-suspend-common\"\n            :btn-options=\"btnOptions\"\n            :drawer-options=\"drawerOptions\"\n            style=\"width: 100%\"\n            @search=\"onSearch\"\n            ref=\"suspendCommon\"\n        >\n            <template #default>\n                <div class=\"m-more-action\">\n                    <div class=\"u-action\" @click=\"() => (userSelectShow = true)\">\n                        <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M17.5 12a2.25 2.25 0 012.25 2.25V15c0 2.956-2.79 6-7.5 6s-7.5-3.044-7.5-6v-.75A2.25 2.25 0 017 12h10.5zm-5.25-9.75a4.125 4.125 0 110 8.25 4.125 4.125 0 010-8.25z\" fill=\"#FEDAA3\"/></svg>\n                    </div>\n                    <div class=\"u-action\" @click=\"()=>$refs.suspendCommon.clickDrawer({ type: 'collect', text: '收藏' }, 1)\">\n                        <svg class=\"icon\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" v-if=\"$refs.suspendCommon?.isCollect\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M467.584 153.568c11.136-13.312 26.208-25.952 44.544-25.632 21.76-.064 38.016 16.992 50.272 33.056 23.968 32.576 42.336 68.768 62.368 103.808 10.112 17.472 18.944 35.776 30.944 52.096 8.48 11.616 22.08 17.824 35.712 21.056 41.6 10.4 83.744 18.528 125.152 29.792 21.6 6.304 44.192 12.64 61.952 27.136 15.04 12.096 20.992 33.408 15.552 51.776-6.752 23.456-22.208 42.976-36.832 62.048-23.584 29.536-48.576 57.92-72.992 86.784C662.688 473.28 540.384 351.904 418.88 229.664c15.072-26.048 29.408-52.8 48.704-76.096zm-261.696 10.688c2.624.128 7.872.32 10.464.448l-.384 2.816c9.92.928 18.688 6.432 25.568 13.376 39.424 39.488 78.976 78.848 118.304 118.4 45.024 42.464 87.808 87.232 131.904 130.656C577.6 515.808 663.36 601.728 749.312 687.488c38.24 40.672 78.656 79.232 117.76 119.04 9.824 10.336 22.208 19.36 27.2 33.216 3.552 14.464 1.76 31.328-9.568 42.016-14.528 17.792-44.448 19.168-60.544 2.816-18.272-17.984-36.544-36.032-54.336-54.496-.384 20.736-4.704 44.672-22.784 57.536-17.76 12.8-41.184 8.64-60.704 2.72-38.56-12.352-74.752-30.816-111.648-47.296-17.632-7.616-34.624-17.312-53.44-21.792-14.848-3.392-29.472 2.72-42.848 8.544-38.368 17.12-76.128 35.648-115.072 51.456C344.32 888.544 324.672 896 304 896.032c-15.68.16-31.328-7.968-39.296-21.632-10.368-17.44-10.88-38.528-11.072-58.304 1.088-50.336 7.936-100.288 11.968-150.432 1.088-14.304 1.504-29.568-5.568-42.56-8.832-16.032-21.952-29.024-33.472-43.072-26.752-31.968-55.168-62.752-78.816-97.184-12.576-18.88-24.896-42.016-17.568-65.248 6.176-20.832 26.688-32.352 45.664-39.648 36.256-13.536 74.496-20.544 112.032-29.536-35.2-34.912-70.08-70.144-105.248-105.12-7.616-7.424-14.272-16.544-15.264-27.424l-2.848.608.384-13.696 2.656.896c2.624-18.88 19.616-34.656 38.496-36.608l-.16-2.816z\" fill=\"#FEDAA3\"/></svg>\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-else=\"\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M10.288 4.836c.778-1.289 2.646-1.289 3.424 0l1.15 1.903a2 2 0 001.257.914l2.166.505c1.465.341 2.043 2.119 1.058 3.256l-1.455 1.681a2 2 0 00-.48 1.48l.188 2.215c.128 1.5-1.384 2.598-2.77 2.012l-2.049-.864a2 2 0 00-1.554 0l-2.049.864c-1.387.585-2.898-.513-2.77-2.012l.189-2.216a2 2 0 00-.48-1.479l-1.456-1.68c-.985-1.138-.407-2.916 1.058-3.257l2.166-.505a2 2 0 001.258-.914l1.149-1.903z\" fill=\"#FEDAA3\" stroke=\"#FEDAA3\" stroke-width=\"1.5\"/></svg>\n                    </div>\n                    <div class=\"u-action\" @click=\"()=> $refs.suspendCommon.clickDrawer({ type: 'pin', text: '固定按钮' }, 1)\">\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-if=\"$refs.suspendCommon?.fixIsActive\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M15 4.5l-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4L20 9.5\" stroke=\"#FEDAA3\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>\n                        <svg class=\"icon\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" v-else=\"\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M624.864 119.424c6.144-7.872 13.696-16.928 24.672-16.64 7.68-.736 14.24 3.808 19.2 9.184 81.984 82.304 164.32 164.192 246.08 246.688 7.776 5.92 7.456 16.416 6.016 25.088-2.304 7.488-9.152 11.968-14.848 16.736-58.272 49.504-116.512 99.072-174.784 148.544-4.48 4.416-10.912 5.44-16.768 6.912-5.696 40.8-13.376 81.28-18.08 122.208 6.528 16.32 5.28 34.368 8.16 51.488 1.984 8.864-1.728 17.792-7.84 24.128-24.608 23.552-47.776 48.544-72.544 71.936-8.96 9.056-24.864 6.912-32.96-2.272-51.136-51.008-101.92-102.368-153.056-153.312-71.616 70.784-142.272 142.624-213.632 213.664-11.424 11.008-21.44 24.384-35.968 31.424-14.144 4.8-31.008 4.512-43.84-3.776-10.336-7.616-19.36-18.144-21.76-31.072-3.808-16.288 2.208-33.984 14.592-45.056 77.344-78.144 155.424-155.616 232.768-233.728-56.736-56.032-112.64-113.024-169.216-169.248-8.128-9.088-7.648-26.016 2.368-33.632 24.416-24.672 48.992-49.12 73.44-73.696 3.808-3.424 9.056-4.16 13.984-4.096 18.112.192 36.064 2.944 53.984 5.408 41.824-4.8 83.744-8.992 125.408-15.264.608-6.048 2.624-11.904 6.528-16.64 49.44-58.24 98.848-116.544 148.096-174.976z\" fill=\"#D9D9D9\"/></svg>\n                    </div>\n                </div>\n            </template>\n        </suspend-common>\n\n        <user-select-drawer :visible.sync=\"userSelectShow\" :current-role=\"currentRole\" @change=\"setRole\" />\n\n        <confirm-ok-drawer :visible.sync=\"conformShow\" @confirm=\"confirmOk\" />\n    </div>\n</template>\n\n<script lang=\"js\">\nimport SuspendCommon from  '@jx3box/jx3box-common-ui/src/SuspendCommon.vue';\nimport { publishLink, showAvatar, showSchoolIcon, ts2str } from \"@jx3box/jx3box-common/js/utils\";\nimport { postHistory, postStat } from \"@jx3box/jx3box-common/js/stat\";\nimport {\n    cancelVirtualRoleAchievements,\n    get_achievement, getRoleGameAchievements, getVirtualRoleAchievements, setVirtualRoleAchievements } from \"@/service/achievement\";\nimport { wiki } from \"@jx3box/jx3box-common/js/wiki_v2\";\nimport { reportNow } from \"@jx3box/jx3box-common/js/reporter\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { getConfig } from \"@jx3box/jx3box-common/js/api_misc\";\nimport { report } from \"@/service/user\";\nimport { icon_url } from \"@/filters\";\nimport iconUrl from \"@/filters/icon-url\";\nimport Article from \"@jx3box/jx3box-editor/src/Article.vue\";\nimport UserSelectDrawer from \"@/components/cj/mobile/user-select-drawer.vue\";\nimport MiniprogramCommentList from \"@/components/cj/mobile/comment-list.vue\";\nimport WikiItem from \"@/components/cj/mobile/wiki-item.vue\";\nimport ConfirmOkDrawer from \"@/components/cj/mobile/confirm-ok-drawer.vue\";\n\nexport default {\n    name: \"CjMobileDetail\",\n    components: { ConfirmOkDrawer, WikiItem, MiniprogramCommentList, UserSelectDrawer,SuspendCommon,Article },\n    data() {\n        return {\n            source: {},\n            wiki_post: \"\",\n            compatible: false,\n            is_empty: true,\n\n            imageCount: 0,\n            loadedImageCount: 0,\n            images: [],\n            imagesLoaded: false,\n\n            userSelectShow:false,\n            currentRole: this.$store.state.role,\n            loading: false,\n            conformShow: false\n        };\n    },\n    computed: {\n        show: {\n            get() {\n                return this.visible;\n            },\n            set(val) {\n                this.$emit(\"update:visible\", val);\n            }\n        },\n        id() {\n            return this.$route.params.source_id;\n        },\n        post_id: function () {\n            return this.$route.params.post_id;\n        },\n        isRevision: function () {\n            return !!this.$route.params.post_id;\n        },\n        author_id: function () {\n            return ~~this.wiki_post.post?.user_id;\n        },\n        client: function () {\n            return this.$store.state.client;\n        },\n        user_name: function () {\n            return this.wiki_post?.post?.user_nickname;\n        },\n        updated_at: function () {\n            return ts2str(this.wiki_post?.post?.updated);\n        },\n        authors: function () {\n            if (!this.isRevision) {\n                return (\n                    this.wiki_post?.users\n                        ?.filter((user) => user.id)\n                        ?.map((user) => {\n                            return {\n                                user_id: user.id,\n                                user_avatar: user.avatar,\n                                display_name: user.nickname,\n                            };\n                        }) || []\n                );\n            }\n            return [];\n        },\n        favTitle: function () {\n            return this.wiki_post?.source?.Name;\n        },\n        prefix() {\n            return this.client === \"std\" ? \"www\" : \"origin\";\n        },\n        isFromTarget(){\n            return false;\n        },\n        drawerOptions(){\n            return {\n                hideType: ['report'], //需要隐藏的type,如['search','pin']\n                direction: 'btt', //弹出框方向，btt、ttb、rtl、ltr\n                drawerTitle: this.source.Name,//弹出框标题\n                author: {\n                    name: this.author_info?.display_name, //作者名称\n                    avatar: this.author_info?.user_avatar, //作者头像\n                    author_id:this.author_id, //作者id\n                },\n                subscribeType: 'wiki', //订阅类型，用于区分调用百科、文章、作者、帖子等订阅接口，\n                postType: 'achievement',//订阅、收藏接口的type,如'face','bps','article'等\n                id: this.post_id, //页面数据ID，用于收藏订阅操作\n                title: this.source.Name || document.title || '', //默认固定标题,默认取页面标题\n                url: window.location.href, //默认取浏览器地址\n                laterOn: {\n                    author_id: this.author_id || 0, //作者id\n                    content_meta_id: this.post_id\n                }\n            }\n        },\n        btnOptions(){\n            return {\n                showHome: true, //是否显示home区域，和Icon区域二选一,home区域优先级高于icon区域\n                showIcon: false, //是否显示icon区域,此处为false后，则下列配置无效\n\n                showMore: true, //是否显示更多\n            }\n        },\n        completeAchievements() {\n            return this.$store.state.achievements || [];\n        },\n        achievementsVirtual() {\n            return this.$store.state.achievementsVirtual || [];\n        },\n        isComplete(){\n            return this.hadCompleted(this.id);\n        },\n        isVirtual(){\n            return !this.currentRole?.jx3id;\n        }\n    },\n    watch:{\n        id: {\n            handler() {\n                this.loadData();\n            },\n        },\n        post_id: {\n            handler() {\n                this.loadRevision();\n            },\n        },\n        currentRole: {\n            deep: true,\n            handler(val) {\n                if (!val) return;\n                localStorage.setItem(\"wiki_last_sync\", val.jx3id || 0);\n                this.$store.commit(\"SET_STATE\", { key: \"role\", value: val });\n                const { jx3id } = val;\n                if (jx3id) {\n                    this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: [] });\n                    this.loadRoleAchievements(jx3id);\n                } else {\n                    if (jx3id === 0) {\n                        // 虚拟角色\n                        this.loadVirtualAchievements();\n                    }\n                    this.$store.commit(\"SET_STATE\", { key: \"achievements\", value: [], isSession: true });\n                }\n            },\n        },\n    },\n    methods: {\n        iconUrl,\n        showAvatar,\n        icon_url,\n        next(){\n\n        },\n        onSearch(){\n            if(isMiniProgram()){\n                wx.miniProgram.navigateTo({ url: `/pages/search/search-detail/search-detail?app=wiki&filter_category=成就` });\n            }\n        },\n        setRole(val){\n            this.currentRole = val;\n            this.userSelectShow = false;\n        },\n        openChild(){\n            this.childrenShow = true;\n            console.log(111);\n        },\n        clearContent(content){\n            return (content || \"\").replace(/ style=\"[^\"]*\"/g, \"\")\n                .replace(/<i?frame.*?src=\"(.*?)\".*?>/g, (match, src) => {\n                    return `<a href=\"${src}\" target=\"_blank\">${src}</a>`;\n                })\n                .replace(/<i?frame.*?src=\"(.*?)\".*?>.*?<\\/i?frame>/g, (match, src) => {\n                    return `<a href=\"${src}\" target=\"_blank\">${src}</a>`;\n                })\n        },\n        publish_url: publishLink,\n        triggerStat: function () {\n            if (this.client == \"origin\") {\n                postStat(\"origin_cj\", this.id);\n            } else {\n                postStat(\"cj\", this.id);\n            }\n        },\n        changeCurrent(item){\n            this.$router.push({\n                name: \"view\",\n                params: {\n                    source_id: item.ID,\n                }\n            })\n        },\n        initImageLoader() {\n            // 在DOM更新后获取所有图片\n            this.$nextTick(() => {\n                const container = document.getElementById(\"wikiArticle\");\n                if (!container) {\n                    this.setGlobalReady();\n                    return;\n                }\n\n                const images = container.querySelectorAll(\"img\");\n                this.images = images;\n                this.imageCount = images.length;\n\n                if (this.imageCount === 0) {\n                    this.setGlobalReady();\n                    return;\n                }\n\n                // 手动预加载所有图片\n                this.preloadAllImages(images);\n            });\n        },\n\n        // 手动预加载所有图片\n        preloadAllImages(images) {\n            let loadedInThisBatch = 0;\n            let totalProcessed = 0;\n            Array.from(images).forEach((img, index) => {\n                // 记录原始src\n                const originalSrc = img.src;\n\n                // 如果图片未加载\n                if (!img.complete) {\n                    // 创建一个Image对象来预加载\n                    const tempImg = new Image();\n\n                    tempImg.onload = () => {\n                        loadedInThisBatch++;\n\n                        // 在临时图片加载完成后，设置原始图片的src\n                        img.src = originalSrc;\n\n                        // 检查是否所有图片都已处理\n                        this.checkImageLoadCompletion(images, loadedInThisBatch);\n                    };\n\n                    tempImg.onerror = () => {\n                        console.error(`图片加载失败: ${originalSrc}`);\n                        totalProcessed++;\n\n                        // 即使加载失败，也要设置原始图片的src\n                        img.src = originalSrc;\n\n                        // 标记原始图片为已加载（错误情况）\n                        this.handleImageLoad();\n                    };\n\n                    // 开始预加载\n                    tempImg.src = originalSrc;\n                } else {\n                    // 图片已经加载完成\n                    this.handleImageLoad();\n                    totalProcessed++;\n                }\n            });\n        },\n\n        // 检查图片加载状态\n        checkImageLoadCompletion(images, loadedCount) {\n            if (images.length === this.loadedImageCount) {\n                this.setGlobalReady();\n                return;\n            }\n\n            // 设置超时检查，防止意外情况\n            setTimeout(() => {\n                const allLoaded = Array.from(images).every((img) => img.complete);\n\n                if (allLoaded) {\n                    this.setGlobalReady();\n                } else if (this.loadedImageCount === images.length) {\n                    this.setGlobalReady();\n                }\n            }, 3000);\n        },\n\n        // 判断是否全部完成\n        handleImageLoad() {\n            this.loadedImageCount++;\n            if (this.loadedImageCount === this.imageCount) {\n                this.setGlobalReady();\n            }\n        },\n\n        // 设置全局就绪状态\n        setGlobalReady() {\n            if (this.imagesLoaded) return; // 避免重复设置\n\n            this.imagesLoaded = true;\n            window.__READY__ = true;\n            console.log(\"全局状态设置成功: __READY__ = \", window.__READY__);\n        },\n        loadData: async function () {\n            // 获取最新攻略\n            if (this.id) {\n                this.loading = true;\n                await get_achievement(this.id, { client: this.client }).then((res) => {\n                    this.source = res?.data?.data?.achievement || \"\";\n                });\n                await wiki.mix({ type: \"achievement\", id: this.id, client: this.client }).then((res) => {\n                    const { post, source, compatible, isEmpty, users } = res;\n                    this.wiki_post = {\n                        post: post,\n                        source: source,\n                        users,\n                    };\n                    this.is_empty = isEmpty;\n                    this.compatible = compatible;\n\n                    reportNow({\n                        caller: \"cj_detail\",\n                        data: {\n                            href: `${this.prefix}:/cj/view/${this.id}`,\n                        },\n                    });\n\n                    User.isLogin() &&\n                    postHistory({\n                        source_type: this.client == \"origin\" ? \"origin_cj\" : \"cj\",\n                        source_id: ~~this.id,\n                        link: location.href,\n                        title: post.title,\n                    });\n                }).finally(()=>{\n                    this.loading = false;\n                });\n            }\n\n            // 请注意，为防止QQBOT无法抓取完全，请不要删除\n            if (this.isRobot) {\n                // 数据加载后启动奇遇流程中的图片检测\n                this.initImageLoader();\n            }\n\n            this.triggerStat();\n        },\n        loadRevision: function () {\n            // 获取指定攻略\n            wiki.getById(this.post_id).then((res) => {\n                this.wiki_post = {\n                    ...this.wiki_post,\n                    post: res.data.data?.post,\n                };\n            });\n            this.triggerStat();\n        },\n        ts2str,\n        loadConfig() {\n            getConfig({ key: \"test_user_ua\" }).then((res) => {\n                const isTest = ~~res.data.data.val;\n\n                if (isTest) {\n                    report();\n                }\n            });\n        },\n\n        loadRoleAchievements(jx3id) {\n            getRoleGameAchievements(jx3id).then((res) => {\n                const achievements = res.data?.data?.achievements || \"\";\n                const jx3id = res.data?.data?.jx3id;\n                this.isSync = !!jx3id; // 是否在游戏中同步\n                const list = achievements.split(\",\");\n                this.$store.commit(\"SET_STATE\", { key: \"achievements\", value: list, isSession: true });\n            });\n        },\n        showSchoolIcon,\n        // 获取虚拟角色成就列表\n        loadVirtualAchievements() {\n            if (!this.currentRole || this.currentRole.jx3id) return;\n            getVirtualRoleAchievements().then((res) => {\n                const achievements = res.data?.data?.achievements || \"\";\n                const list = achievements.split(\",\");\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n            });\n        },\n        confirmOk(){\n            this.finishVirtual([this.id])\n        },\n        hadCompleted(id) {\n            const list = this.isVirtual ? this.achievementsVirtual : this.completeAchievements;\n            return list.includes(id + \"\");\n        },\n        setConfirm(){\n            if (!this.isVirtual) {\n                return;\n            }\n\n            if (this.isComplete) {\n                // 取消完成\n                this.cancelVirtual([this.id])\n\n                return;\n            }\n\n            this.conformShow = true;\n        },\n\n        finishVirtual(curr) {\n            const ids = curr?curr: this.selectedAchievements.map((item) => item.ID + \"\");\n            const data = {\n                achievements: ids.join(),\n            };\n            setVirtualRoleAchievements(data).then((res) => {\n                this.$notify({\n                    title: \"操作成功\",\n                    message: \"已将选中成就标记为已完成\",\n                    type: \"success\",\n                });\n                const list = Array.from(new Set(this.achievementsVirtual.concat(ids)));\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n                this.isAll = false;\n                this.achievements = this.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n            });\n        },\n        cancelVirtual(curr) {\n            const ids = curr?curr: this.selectedAchievements.map((item) => item.ID + \"\");\n            const data = {\n                achievements: ids.join(),\n            };\n            cancelVirtualRoleAchievements(data).then((res) => {\n                this.$notify({\n                    title: \"操作成功\",\n                    message: \"已将选中成就标记为待完成\",\n                    type: \"success\",\n                });\n                const list = this.achievementsVirtual.filter((item) => !ids.includes(item));\n                this.$store.commit(\"SET_STATE\", { key: \"achievementsVirtual\", value: list });\n                this.isAll = false;\n                this.achievements = this.achievements.map((item) => {\n                    return {\n                        ...item,\n                        checked: false,\n                    };\n                });\n            });\n        },\n    },\n    mounted() {\n        if (this.post_id) {\n            this.loadRevision();\n        } else {\n            this.loadData();\n        }\n\n        this.loadConfig();\n    },\n}\n</script>\n\n<style lang=\"less\">\n@import \"../../../assets/css/miniprogram/var.less\";\n\n.u-suspend-common {\n    padding-bottom: 2rem;\n    margin: 0;\n    .m-base {\n        width: 100%;\n        .m-more-action {\n            display: flex;\n            justify-content: space-around;\n            align-items: center;\n            width: 100%;\n            padding: 0 20px;\n            box-sizing: border-box;\n\n            .u-action {\n                display: flex;\n                height: 24px;\n                justify-content: center;\n                align-items: center;\n                flex: 1 0 0;\n                svg{\n                    height: 24px;\n                    width: 24px;\n                }\n                &.disabled {\n                    img {\n                        opacity: 0.5;\n                    }\n\n                }\n            }\n        }\n    }\n    .m-more {\n        .u-icon {\n            display: none;\n        }\n    }\n}\n\n.p-achievement-detail {\n    min-height: calc(100vh - 120px);\n    background: #f1f1f1;\n    @media (prefers-color-scheme: dark) {\n        background: #000;\n    }\n\n    padding-bottom: 100px;\n\n    .m-main-box {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n        padding: 20px 20px 0;\n    }\n\n    .m-achievement-info {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n\n        .m-sub-list {\n            display: flex;\n            flex-direction: row;\n            gap: 8px;\n            align-items: center;\n            .u-sub-achievement {\n                width: 32px;\n                height: 32px;\n                border-radius: 4px;\n                overflow: hidden;\n            }\n        }\n\n        .m-confirm {\n            display: flex;\n            height: 48px;\n            padding: 12px 16px;\n            justify-content: center;\n            align-items: center;\n            gap: 8px;\n\n            border-radius: var(--12, 12px);\n            background: var(--primary-brand-2, #fedaa3);\n            border: none;\n\n            color: var(--primary-brand-3, #24292e);\n            /* 16 Bold */\n            font-size: 16px;\n            font-style: normal;\n            font-weight: 700;\n            line-height: 24px; /* 150% */\n\n            &.complete{\n                opacity: 0.3;\n            }\n\n            &.disabled{\n                opacity: 0.3;\n            }\n        }\n    }\n\n    .m-wiki {\n        display: flex;\n        padding: 16px;\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 16px;\n        width: 100%;\n        border-radius: 12px;\n        box-sizing: border-box;\n        border: 1px solid rgba(40, 40, 40, 0.05);\n        background: var(--primary-brand-4, #282828);\n        .m-wiki-header {\n            display: flex;\n            flex-direction: column;\n            gap: 4px;\n            .u-title {\n                color: var(--black-80, rgba(255, 255, 255, 0.8));\n\n                /* 16 Bold */\n                font-size: 16px;\n                font-style: normal;\n                font-weight: 700;\n                line-height: 24px; /* 150% */\n            }\n\n            .u-avatar-list {\n                display: flex;\n                align-items: center;\n\n                .u-avatar {\n                    width: 24px;\n                    height: 24px;\n                    border-radius: 50%;\n                    overflow: hidden;\n                    margin-right: -8px;\n\n                    img {\n                        width: 100%;\n                        height: 100%;\n                        object-fit: cover;\n                    }\n                }\n            }\n\n            .u-time {\n                color: var(--black-40, rgba(255, 255, 255, 0.4));\n\n                /* 12 Regular */\n                font-size: 12px;\n                font-style: normal;\n                font-weight: 400;\n                line-height: 18px; /* 150% */\n            }\n        }\n\n        .m-content-box {\n            overflow: auto;\n            box-sizing: border-box;\n            #wikiArticle {\n                color: rgba(255, 255, 255, 0.8) !important;\n\n                /* 14 Regular */\n                font-size: 14px !important;\n                font-style: normal !important;\n                font-weight: 400 !important;\n                line-height: 20px; /* 142.857% */\n\n                box-sizing: border-box;\n                overflow-x: hidden;\n\n                ul {\n                    padding-left: 12px !important;\n                }\n\n                .e-summary,\n                .e-jx3-resource {\n                    @media (prefers-color-scheme: dark) {\n                        color: var(--black-100);\n                        background: var(--black-20);\n                    }\n                }\n                ul:has(.e-jx3-resource) {\n                    padding: 0 !important;\n                }\n                ul:has(.e-summary) {\n                    padding: 0 !important;\n                }\n                img {\n                    margin: 0 !important;\n                }\n\n                div {\n                    color: var(--black-100);\n                }\n                h1 {\n                    font-weight: 700 !important;\n                    line-height: 30px !important;\n                    font-size: 20px !important;\n                    margin-bottom: 15px !important;\n                    color: var(--black-100);\n                }\n\n                h2 {\n                    font-weight: 700 !important;\n                    line-height: 27px !important;\n                    font-size: 18px !important;\n                    margin-bottom: 14px !important;\n                    color: var(--black-100);\n                }\n\n                h3 {\n                    font-weight: 700 !important;\n                    line-height: 24px !important;\n                    font-size: 16px !important;\n                    margin-bottom: 12px !important;\n                    color: var(--black-100);\n                }\n\n                h4 {\n                    font-weight: 700 !important;\n                    line-height: 20px !important;\n                    font-size: 14px !important;\n                    margin-bottom: 11px !important;\n\n                    @media (prefers-color-scheme: dark) {\n                        color: var(--black-100);\n                        background: var(--black-20);\n                    }\n                }\n\n                blockquote {\n                    @media (prefers-color-scheme: dark) {\n                        background: var(--black-20);\n                    }\n                }\n\n                h5,\n                h6 {\n                    font-weight: 700 !important;\n                    line-height: 18px !important;\n                    font-size: 12px !important;\n                    margin-bottom: 9px !important;\n                    color: var(--black-100) !important;\n                    @media (prefers-color-scheme: dark) {\n                        background: var(--black-20);\n                    }\n                }\n\n                .e-jx3-resource {\n                    overflow: hidden;\n                }\n\n                p {\n                    font-weight: 400 !important;\n                    line-height: 20px !important;\n                    font-size: 14px !important;\n                    margin-bottom: 11px !important;\n                    color: var(--black-100);\n                }\n\n                .text {\n                    display: inline-block !important;\n                    font-weight: 400 !important;\n                    line-height: 20px !important;\n                    font-size: 14px !important;\n                    margin-bottom: 11px !important;\n                    color: var(--black-100);\n                }\n\n                hr {\n                    margin-bottom: 11px !important;\n                    margin-top: 8px !important;\n                }\n            }\n        }\n\n        .u-show-log {\n            margin-top: 20px;\n            text-align: center;\n            width: 100%;\n            color: var(--black-40, rgba(255, 255, 255, 0.4));\n\n            /* 12 Regular */\n            font-size: 12px;\n            font-style: normal;\n            font-weight: 400;\n            line-height: 18px; /* 150% */\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./detail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./detail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=6015bc88\"\nimport script from \"./detail.vue?vue&type=script&lang=js\"\nexport * from \"./detail.vue?vue&type=script&lang=js\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=6015bc88&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}