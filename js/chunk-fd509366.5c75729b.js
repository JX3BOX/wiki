(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd509366"],{"18a0":function(e,t){!function(t,n){e.exports=n(t)}("object"===typeof window&&window,(function(e,t){var n,i,o,a,r,c,s,d,u,l,f,m,p,h,g,v,w,y,_,b,S,k;if(e)return e.jWeixin?e.jWeixin:(n={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},i=function(){var e,t={};for(e in n)t[n[e]]=e;return t}(),o=e.document,a=o.title,r=navigator.userAgent.toLowerCase(),m=navigator.platform.toLowerCase(),c=!(!m.match("mac")&&!m.match("win")),s=-1!=r.indexOf("wxdebugger"),d=-1!=r.indexOf("micromessenger"),u=-1!=r.indexOf("android"),l=-1!=r.indexOf("iphone")||-1!=r.indexOf("ipad"),f=(m=r.match(/micromessenger\/(\d+\.\d+\.\d+)/)||r.match(/micromessenger\/(\d+\.\d+)/))?m[1]:"",p={initStartTime:A(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},h={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:l?1:u?2:-1,clientVersion:f,url:encodeURIComponent(location.href)},g={},v={_completes:[]},w={state:0,data:{}},M((function(){p.initEndTime=A()})),y=!1,_=[],b={config:function(t){P("config",g=t);var i=!1!==g.check;M((function(){if(i)I(n.config,{verifyJsApiList:O(g.jsApiList),verifyOpenTagList:O(g.openTagList)},(v._complete=function(e){p.preVerifyEndTime=A(),w.state=1,w.data=e},v.success=function(e){h.isPreVerifyOk=0},v.fail=function(e){v._fail?v._fail(e):w.state=-1},(a=v._completes).push((function(){j()})),v.complete=function(e){for(var t=0,n=a.length;t<n;++t)a[t]();v._completes=[]},v)),p.preVerifyStartTime=A();else{w.state=1;for(var e=v._completes,t=0,o=e.length;t<o;++t)e[t]();v._completes=[]}var a})),b.invoke||(b.invoke=function(t,n,i){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,T(n),i)},b.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})},ready:function(e){(0!=w.state||(v._completes.push(e),!d&&g.debug))&&e()},error:function(e){f<"6.0.2"||(-1==w.state?e(w.data):v._fail=e)},checkJsApi:function(e){I("checkJsApi",{jsApiList:O(e.jsApiList)},(e._complete=function(e){u&&(n=e.checkResult)&&(e.checkResult=JSON.parse(n));var t,n=e,o=n.checkResult;for(t in o){var a=i[t];a&&(o[a]=o[t],delete o[t])}},e))},onMenuShareTimeline:function(e){C(n.onMenuShareTimeline,{complete:function(){I("shareTimeline",{title:e.title||a,desc:e.title||a,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){C(n.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?I("sendAppMessage",{title:e.title||a,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):I("sendAppMessage",{title:e.title||a,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){C(n.onMenuShareQQ,{complete:function(){I("shareQQ",{title:e.title||a,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){C(n.onMenuShareWeibo,{complete:function(){I("shareWeiboApp",{title:e.title||a,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){C(n.onMenuShareQZone,{complete:function(){I("shareQZone",{title:e.title||a,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){I("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){I("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){I("startRecord",{},e)},stopRecord:function(e){I("stopRecord",{},e)},onVoiceRecordEnd:function(e){C("onVoiceRecordEnd",e)},playVoice:function(e){I("playVoice",{localId:e.localId},e)},pauseVoice:function(e){I("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){I("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){C("onVoicePlayEnd",e)},uploadVoice:function(e){I("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){I("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){I("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){I("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(u){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){e=e||{},I(n.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type},e))},previewImage:function(e){I(n.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){I("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){I("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===y?(y=!0,I("getLocalImgData",{localId:e.localId},(e._complete=function(e){var t;y=!1,0<_.length&&(t=_.shift(),wx.getLocalImgData(t))},e))):_.push(e)},getNetworkType:function(e){I("getNetworkType",{},(e._complete=function(e){var t=e,n=(e=t.errMsg,t.errMsg="getNetworkType:ok",t.subtype);if(delete t.subtype,n)t.networkType=n;else{n=e.indexOf(":");var i=e.substring(n+1);switch(i){case"wifi":case"edge":case"wwan":t.networkType=i;break;default:t.errMsg="getNetworkType:fail"}}},e))},openLocation:function(e){I("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},hideOptionMenu:function(e){I("hideOptionMenu",{},e)},showOptionMenu:function(e){I("showOptionMenu",{},e)},closeWindow:function(e){I("closeWindow",{},e=e||{})},hideMenuItems:function(e){I("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){I("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){I("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){I("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){I("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){var t;l&&(t=e.resultStr)&&(t=JSON.parse(t),e.resultStr=t&&t.scan_code&&t.scan_code.scan_result)},e))},openAddress:function(e){I(n.openAddress,{},(e._complete=function(e){(e=e).postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo},e))},openProductSpecificView:function(e){I(n.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,i=[],o=0,a=t.length;o<a;++o){var r=t[o];r={card_id:r.cardId,card_ext:r.cardExt};i.push(r)}I(n.addCard,{card_list:i},(e._complete=function(e){if(t=e.card_list){for(var t,n=0,i=(t=JSON.parse(t)).length;n<i;++n){var o=t[n];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},e))},chooseCard:function(e){I("chooseCard",{app_id:g.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},openCard:function(e){for(var t=e.cardList,i=[],o=0,a=t.length;o<a;++o){var r=t[o];r={card_id:r.cardId,code:r.code};i.push(r)}I(n.openCard,{card_list:i},e)},consumeAndShareCard:function(e){I(n.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){I(n.chooseWXPay,L(e),e),j({jsApiName:"chooseWXPay"})},openEnterpriseRedPacket:function(e){I(n.openEnterpriseRedPacket,L(e),e)},startSearchBeacons:function(e){I(n.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){I(n.stopSearchBeacons,{},e)},onSearchBeacons:function(e){C(n.onSearchBeacons,e)},openEnterpriseChat:function(e){I("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)},launchMiniProgram:function(e){I("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){var t;if("string"==typeof e&&0<e.length)return t=e.split("?")[0],t+=".html",void 0!==(e=e.split("?")[1])?t+"?"+e:t}(e.path),envVersion:e.envVersion},e)},openBusinessView:function(e){I("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(u){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))},miniProgram:{navigateBack:function(e){e=e||{},M((function(){I("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){M((function(){I("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){M((function(){I("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){M((function(){I("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){M((function(){I("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){M((function(){I("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){M((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}},S=1,k={},o.addEventListener("error",(function(e){var t,n,i;u||(i=(t=e.target).tagName,n=t.src,"IMG"!=i&&"VIDEO"!=i&&"AUDIO"!=i&&"SOURCE"!=i)||-1!=n.indexOf("wxlocalresource://")&&(e.preventDefault(),e.stopPropagation(),(i=t["wx-id"])||(i=S++,t["wx-id"]=i),k[i]||(k[i]=!0,wx.ready((function(){wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData}})}))))}),!0),o.addEventListener("load",(function(e){var t;u||(t=(e=e.target).tagName,e.src,"IMG"!=t&&"VIDEO"!=t&&"AUDIO"!=t&&"SOURCE"!=t)||(t=e["wx-id"])&&(k[t]=!1)}),!0),t&&(e.wx=e.jWeixin=b),b);function I(t,n,i){e.WeixinJSBridge?WeixinJSBridge.invoke(t,T(n),(function(e){x(t,e,i)})):P(t,i)}function C(t,n,i){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){i&&i.trigger&&i.trigger(e),x(t,e,n)})):P(t,i||n)}function T(e){return(e=e||{}).appId=g.appId,e.verifyAppId=g.appId,e.verifySignType="sha1",e.verifyTimestamp=g.timestamp+"",e.verifyNonceStr=g.nonceStr,e.verifySignature=g.signature,e}function L(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function x(e,t,n){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var o=t.errMsg;o||(o=t.err_msg,delete t.err_msg,o=function(e,t){var n,o=i[e];return o&&(e=o),o="ok",t&&(n=t.indexOf(":"),"access denied"!=(o=(o=(o=-1!=(o=-1!=(o="failed"==(o="confirm"==(o=t.substring(n+1))?"ok":o)?"fail":o).indexOf("failed_")?o.substring(7):o).indexOf("fail_")?o.substring(5):o).replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=o||(o="permission denied"),""==(o="config"==e&&"function not exist"==o?"ok":o))&&(o="fail"),e+":"+o}(e,o),t.errMsg=o),(n=n||{})._complete&&(n._complete(t),delete n._complete),o=t.errMsg||"",g.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t)),e=o.indexOf(":");switch(o.substring(e+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function O(e){if(e){for(var t=0,i=e.length;t<i;++t){var o=e[t];o=n[o];o&&(e[t]=o)}return e}}function P(e,t){var n;!g.debug||t&&t.isInnerInvoke||((n=i[e])&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||""))}function j(e){var t;c||s||g.debug||f<"6.0.2"||h.systemType<0||(t=new Image,h.appId=g.appId,h.initTime=p.initEndTime-p.initStartTime,h.preVerifyTime=p.preVerifyEndTime-p.preVerifyStartTime,b.getNetworkType({isInnerInvoke:!0,success:function(n){h.networkType=n.networkType,n="https://open.weixin.qq.com/sdk/report?v="+h.version+"&o="+h.isPreVerifyOk+"&s="+h.systemType+"&c="+h.clientVersion+"&a="+h.appId+"&n="+h.networkType+"&i="+h.initTime+"&p="+h.preVerifyTime+"&u="+h.url+"&jsapi_name="+(e?e.jsApiName:""),t.src=n}}))}function A(){return(new Date).getTime()}function M(t){d&&(e.WeixinJSBridge?t():o.addEventListener&&o.addEventListener("WeixinJSBridgeReady",t,!1))}console.warn("can't use weixin-js-sdk in server side")}))},"4d13":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"p-knowledge-mobile-detail c-var"},[t("div",{staticClass:"m-page-container"},[e.title?t("div",{staticClass:"u-main-title"},[e._v(e._s(e.title))]):e._e(),e.post?t("fold-card",{staticClass:"m-content-card",attrs:{title:"通识攻略",fixed:""}},[t("div",{staticClass:"m-wiki-header"},[t("div",{staticClass:"m-wiki"},[t("div",{staticClass:"m-wiki-header"},[t("div",{staticClass:"u-avatar-list"},e._l(e.authors,(function(n){return t("div",{key:n.user_id,staticClass:"u-avatar"},[t("img",{attrs:{src:e.showAvatar(n.user_avatar)}})])})),0),t("div",{staticClass:"u-time"},[e._v(" "+e._s(e.updated_at)+" ")])]),t("div",{staticClass:"m-content-box"},[t("Article",{attrs:{id:"wikiArticle",content:e.clearContent(e.content)}})],1)])])]):e._e(),e.loading||e.post?e._e():t("div",{staticClass:"m-empty"},[t("i",{staticClass:"el-icon-warning-outline"}),t("span",[e._v("暂无相关内容")])]),e.id?t("div",{staticClass:"m-comments"},[t("miniprogram-comment-list",{attrs:{id:e.id,category:"knowledge"}})],1):e._e()],1),t("suspend-common",{staticClass:"u-suspend-common",staticStyle:{width:"100%"},attrs:{"btn-options":{showHome:!0,showIcon:!1,showMore:!0},"drawer-options":e.drawerOptions},on:{search:e.onSearch},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"m-more-action"},[t("span",{directives:[{name:"loading",rawName:"v-loading",value:e.favLoading,expression:"favLoading"}],staticClass:"u-action",attrs:{type:"text"},on:{click:e.toggleFav}},[t("i",{class:e.isFav?"el-icon-star-on":"el-icon-star-off"}),e._v(" "+e._s(e.isFav?"取消收藏":"收藏页面")+" ")])])]},proxy:!0}])})],1)},o=[],a=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("b0c0"),n("d3b7"),n("ac1f"),n("5319"),n("500d")),r=n("9616"),c=n("c1cc"),s=function(){var e=this,t=e._self._c;return e.isLogin?t("div",{staticClass:"m-comment-list",attrs:{id:"macro-comment"}},[e._l(e.commentList,(function(n){var i;return t("div",{key:n.id,staticClass:"m-comment-item"},[t("div",{staticClass:"m-main-content"},[t("div",{staticClass:"u-commenter-name",on:{click:function(t){return e.toDetail(n.userId)}}},[e._v(" "+e._s(n.displayName)+" ")]),t("div",{staticClass:"u-comment-content"},[e._v(" "+e._s(n.content)+" ")]),t("div",{staticClass:"u-comment-time"},[e._v(" "+e._s(e.dayjs(null===n||void 0===n?void 0:n.commentDate).format("YYYY-MM-DD"))+" ")])]),null!==(i=n.reply)&&void 0!==i&&i.length?t("div",{staticClass:"m-child-comment"},e._l(n.reply,(function(i){return t("div",{key:i.id,staticClass:"m-reply-item"},[t("div",{staticClass:"u-replier-name",on:{click:function(t){return e.toDetail(i.userId)}}},[e._v(" "+e._s(i.displayName)+" ")]),t("span",{staticClass:"u-reply"},[e._v("回复")]),t("div",{staticClass:"u-replier-name",on:{click:function(t){return e.toDetail(i.replyForUID||n.userId)}}},[e._v(" "+e._s(i.replyForUsername||n.displayName)+" ")]),t("span",{staticClass:"u-reply"},[e._v("：")]),t("div",{staticClass:"u-reply-content"},[e._v(" "+e._s(i.content)+" ")])])})),0):e._e()])})),e.loading?t("div",{staticClass:"u-loading-more"},[e._v("加载中...")]):e._e(),e.noMoreData?t("div",{staticClass:"u-no-more"},[e._v("没有更多评论了")]):e._e()],2):e._e()},d=[],u=n("2909"),l=(n("a9e3"),n("4f7d")),f=n("9047"),m=n("85e4"),p=n("5a0c"),h=n.n(p),g=n("7720"),v=n("c9d2"),w={name:"CommentList",props:{id:{type:[String,Number],default:0},category:{type:String,default:"post"},normal:{type:Boolean,default:!0},order:{type:String,default:"desc"},homework:{type:Boolean,default:!1},postType:{type:String,default:"comment"}},data:function(){return{baseAPI:"",commentPower:{allow:!1,uid:-1},commentList:[],pager:{index:1,pageSize:10,pageTotal:1,total:0},isDesc:"DESC",orderByLikes:!1,openWhiteList:!1,loading:!1,noMoreData:!1,scrollListener:null,isLogin:v["a"].isLogin()}},methods:{dayjs:h.a,formatTime:function(e){return h()(e).format("YYYY-MM-DD HH:mm:ss")},changeOrder:function(){this.reloadCommentList(this.pager.index),Object(l["b"])("ASC"===this.isDesc?"DESC":"ASC")},changeOrderByLikes:function(){this.reloadCommentList(this.pager.index)},changeWhiteList:function(){var e=this;Object(f["d"])("".concat(this.baseAPI,"/meta/white-list/").concat(this.openWhiteList?"open":"close")).then((function(){return e.reloadPower()})).then((function(){e.commentPower.is_white=e.openWhiteList,e.reloadCommentList(e.pager.index)})).catch((function(){}))},setLikeComment:function(e,t){var n=t?"like":"unlike";Object(f["d"])("".concat(this.baseAPI,"/comment/").concat(e,"/").concat(n)).then((function(){})).catch((function(){}))},setTopComment:function(e,t){var n=this,i=t?"set":"cancel";Object(f["d"])("".concat(this.baseAPI,"/comment/").concat(e,"/top/").concat(i)).then((function(){n.reloadCommentList(n.pager.index)})).catch((function(){}))},setStarComment:function(e,t){var n=this,i=t?"set":"cancel";Object(f["d"])("".concat(this.baseAPI,"/comment/").concat(e,"/star/").concat(i)).then((function(){n.reloadCommentList(n.pager.index)})).catch((function(){}))},setWhiteComment:function(e,t){var n=this,i=t?"add":"remove";Object(f["d"])("".concat(this.baseAPI,"/comment/").concat(e,"/white-list/").concat(i)).then((function(){n.reloadCommentList(n.pager.index)})).catch((function(){}))},deleteComment:function(e){var t=this;Object(f["a"])("".concat(this.baseAPI,"/comment/").concat(e)).then((function(){t.$notify({title:"",message:"删除成功!",type:"success",duration:3e3,position:"bottom-right"}),t.reloadCommentList(t.pager.index)})).catch((function(){}))},hideComment:function(e){var t=this;Object(f["d"])("".concat(this.baseAPI,"/comment/").concat(e,"/hide")).then((function(){t.$notify({title:"",message:"操作成功!",type:"success",duration:3e3,position:"bottom-right"}),t.reloadCommentList(t.pager.index)})).catch((function(){}))},handleCurrentChange:function(e){this.reloadCommentList(e)},userSubmitInputForm:function(e){var t=this;Object(f["c"])("".concat(this.baseAPI,"/comment"),null,e).then((function(e){e&&~~e.code>0?t.$notify({title:"评论失败",message:e.msg||"",type:"error",duration:3e3,position:"bottom-right"}):(t.$notify({title:"",message:"评论成功!",type:"success",duration:3e3,position:"bottom-right"}),1==t.pager.index&&t.reloadCommentList(t.pager.index))})).catch((function(){}))},reloadPower:function(){var e=this;Object(f["b"])("".concat(this.baseAPI,"/i-am-author")).then((function(t){e.commentPower=t,e.openWhiteList=t.is_white})).catch((function(){}))},toDetail:function(e){Object(g["b"])(Object(m["a"])(e))},reloadCommentList:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.loading){this.loading=!0;var i={};"DESC"===this.isDesc&&(i["desc"]=!0),i["orderby_likes"]=this.orderByLikes,Object(f["b"])("".concat(this.baseAPI,"/comment/page/").concat(e),i).then((function(i){n&&i.data&&i.data.length?t.commentList=[].concat(Object(u["a"])(t.commentList),Object(u["a"])(i.data)):t.commentList=i.data||[],t.pager=i.page,t.noMoreData=e>=t.pager.pageTotal})).catch((function(){})).finally((function(){t.loading=!1}))}},checkScrollBottom:function(){var e=document.documentElement.scrollHeight,t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight;e-t-n<100&&!this.loading&&!this.noMoreData&&this.loadMore()},loadMore:function(){this.pager.index<this.pager.pageTotal&&(this.reloadCommentList(this.pager.index+1,!0),this.pager.index++)},addScrollListener:function(){this.scrollListener=this.checkScrollBottom.bind(this),window.addEventListener("scroll",this.scrollListener)},removeScrollListener:function(){this.scrollListener&&(window.removeEventListener("scroll",this.scrollListener),this.scrollListener=null)}},filters:{profileLink:function(e){return Object(m["a"])(e)},showAvatar:function(e){return Object(m["r"])(e,144)}},created:function(){this.baseAPI="/api/comment/".concat(this.category,"/article/").concat(this.id)},mounted:function(){var e=this;Object(l["a"])().then((function(t){e.isDesc=t})).then((function(){e.reloadPower()})).finally((function(){e.reloadCommentList(1),e.$nextTick((function(){e.addScrollListener()}))}))},beforeDestroy:function(){this.removeScrollListener()}},y=w,_=(n("fa17"),n("2877")),b=Object(_["a"])(y,s,d,!1,null,null,null),S=b.exports,k=n("a974"),I=n("b78a"),C=n("c123"),T=n("b96b"),L={name:"MobileKnowledgeDetail",components:{FoldCard:T["a"],SuspendCommon:c["a"],MiniprogramCommentList:S,Article:k["a"]},data:function(){return{loading:!1,data:"",favItemList:[],favLoading:!1}},computed:{id:function(){return this.$route.params.source_id},title:function(){var e,t;return null===(e=this.data)||void 0===e||null===(t=e.source)||void 0===t?void 0:t.name},post:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.post},content:function(){var e;return null===(e=this.post)||void 0===e?void 0:e.content},updated_at:function(){var e;return null!==(e=this.post)&&void 0!==e&&e.updated?Object(m["t"])(this.post.updated).split(" ")[0]:""},authors:function(){var e,t,n;return(null===(e=this.data)||void 0===e||null===(t=e.users)||void 0===t||null===(n=t.filter((function(e){return e.id})))||void 0===n?void 0:n.map((function(e){return{user_id:e.id,user_avatar:e.avatar,display_name:e.nickname}})))||[]},isFav:function(){var e=this;return this.favItemList.some((function(t){return t.post_id==e.id}))},drawerOptions:function(){var e,t,n,i;return{hideType:["report"],direction:"btt",drawerTitle:this.title,author:{name:(null===(e=this.authors[0])||void 0===e?void 0:e.display_name)||"",avatar:(null===(t=this.authors[0])||void 0===t?void 0:t.user_avatar)||"",author_id:(null===(n=this.authors[0])||void 0===n?void 0:n.user_id)||0},subscribeType:"wiki",postType:"knowledge",id:null===(i=this.post)||void 0===i?void 0:i.id,title:this.title||document.title,url:window.location.href}}},methods:{showAvatar:m["r"],loadData:function(){var e=this;this.id&&(this.loading=!0,a["a"].get({type:"knowledge",id:this.id}).then((function(t){e.data=t.data.data,e.data.source&&e.data.post&&(e.data.source.post=e.data.post),v["a"].isLogin()&&Object(r["c"])({source_type:"knowledge",source_id:~~e.id,link:location.href,title:e.title}),Object(r["d"])("knowledge",e.id)})).finally((function(){e.loading=!1})))},clearContent:function(e){return(e||"").replace(/ style="[^"]*"/g,"").replace(/<i?frame.*?src="(.*?)".*?>/g,(function(e,t){return'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>")})).replace(/<i?frame.*?src="(.*?)".*?>.*?<\/i?frame>/g,(function(e,t){return'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>")}))},toggleFav:function(){var e=this;if(!this.favLoading&&this.id)if(this.favLoading=!0,this.isFav){var t=this.favItemList.find((function(t){return t.post_id==e.id}));Object(I["a"])(t.id).then((function(){e.favItemList=e.favItemList.filter((function(t){return t.post_id!=e.id}))})).finally((function(){e.favLoading=!1}))}else Object(C["a"])("knowledge",this.id,this.title).then((function(t){e.favItemList.push({id:t.id,post_id:e.id,post_type:"knowledge"})})).finally((function(){e.favLoading=!1}))},loadFavItems:function(){var e=this;v["a"].isLogin()&&Object(I["g"])({post_type:"knowledge",pageSize:50}).then((function(t){var n=t.data.data.list;n&&(e.favItemList=n)}))},onSearch:function(){Object(g["a"])()?wx.miniProgram.navigateTo({url:"/pages/search/search-detail/search-detail?app=wiki&filter_category=通识"}):this.$message.warning("非小程序环境，不支持跳转搜索页")}},created:function(){this.loadData(),this.loadFavItems()}},x=L,O=(n("f341"),Object(_["a"])(x,i,o,!1,null,null,null));t["default"]=O.exports},"4f7d":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var i=n("41cb"),o=n("c9d2");const a="cmt_order";async function r(){return o["a"].isLogin()?Object(i["a"])({mute:!0}).get("/api/cms/user/conf",{params:{key:a}}).then(e=>e.data.data):new Promise(e=>{const t=localStorage.getItem(a)||"DESC";e(t)})}async function c(e){return o["a"].isLogin()?Object(i["a"])().put("/api/cms/user/conf",{val:e},{params:{key:a}}).then(e=>e.data.data):new Promise(t=>{t(localStorage.setItem(a,e))})}},"65ed":function(e,t,n){},7720:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n("3835"),o=(n("99af"),n("a15b"),n("d81d"),n("c1f9"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("88a7"),n("271a"),n("5494"),n("18a0")),a=n.n(o),r=n("85e4");function c(){return window&&"miniprogram"===window.__wxjs_environment}var s=function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")};function d(e){c()||(location.href=e);var t=e.split("?"),n=Object(i["a"])(t,2),o=n[0],r=n[1],d=r?Object.fromEntries(new URLSearchParams(r)):{};d.path=o;var u="/pages/webview/webview?"+s(d);a.a.miniProgram.navigateTo({url:u})}function u(e){Object(r["m"])()?(console.log(e),d(e)):location.href=e}},"78a6":function(e,t,n){"use strict";n("65ed")},"870f":function(e,t,n){},9047:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return m}));var i=n("65c2"),o=n("5c96"),a=n("41cb"),r=n("85e4");const c=function(e,t){let n={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};return f(e,t,n)};var s={};const d=function(e,t,n){if(s[e])if(Date.now()-s[e].lastest<6e4){if(s[e].count>=6)return o["Notification"].warning({title:"系统",message:"你单身多久了? 动作这么快, 系统处理不过来 ( T_T )",duration:3e3,position:"bottom-right"}),new Promise((e,t)=>{t()});s[e].count=s[e].count+1}else Date.now()-s[e].lastest>6e4&&(s[e]={lastest:Date.now(),count:0});else s[e]={lastest:Date.now(),count:0};let i={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)};return f(e,t,i)},u=function(e,t,n){let i={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)};return f(e,t,i)},l=function(e,t){let n={method:"DELETE"};return f(e,t,n)};function f(e,t,n){let a=i["__next"];if("/"==a[a.length-1]&&(a=a.substring(0,a.length-1)),e=a+e,e=e.replace("/api/","/api/next2/"),n.credentials="include",t){let n=[];Object.keys(t).forEach(e=>{n.push(e+"="+t[e])});let o=i["__next"];"/"==o[o.length-1]&&(o=o.substring(0,o.length-1)),e=e+"?"+n.join("&")}let c=Object(r["j"])();if(c=c||localStorage&&localStorage.getItem("token"),c){const e=btoa(c+":next common request");n.headers||(n.headers={}),n.headers["Authorization"]="Basic "+e}return fetch(e,n).then(e=>{switch(e.status){case 200:break;case 401:throw window.location.href=i["__Links"].account.login+"?redirect="+encodeURIComponent(window.location.href),new Error("错误:"+e.statusText);case 403:throw window.location.href=i["__Links"].account.login+"?redirect="+encodeURIComponent(window.location.href),new Error("错误:"+e.statusText);case 423:throw window.location.href=i["__Links"].account.email_verify+"?redirect="+encodeURIComponent(window.location.href),new Error("错误:"+e.statusText);case 406:throw e.text().then(e=>{o["Notification"].warning({title:"系统",message:e||"提交内容不合法,请重新提交",duration:3e3,position:"bottom-right"})}),new Error("错误:"+e.statusText);default:throw e.text().then(t=>{o["Notification"].error({title:"系统:"+e.statusText,message:t||"系统错误,请稍后重试!",duration:3e3,position:"bottom-right"})}),new Error("错误:"+e.statusText)}let t=e.headers.get("Content-Type");switch(t=t&&t.split(";").shift(),t){case"application/json":return e.json().then(e=>e&&e.code>0&&""!=e.msg?(o["Notification"].warning({title:"提示",message:e.code+":"+e.msg,duration:3e3,position:"bottom-right"}),null):e);default:return e.text()}})}const m=(e,t)=>Object(a["e"])().get(`/api/inspire/article/${e}/${t}/history/summary`)},a2a2:function(e,t,n){},b78a:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"m",(function(){return s})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return u})),n.d(t,"r",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return w})),n.d(t,"q",(function(){return y})),n.d(t,"e",(function(){return _})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return S}));n("99af"),n("a15b");var i=n("41cb"),o=Object(i["d"])({mute:!0});function a(e){return Object(i["c"])().get("api/article/favorites/my",{params:e})}function r(e){return Object(i["c"])().delete("api/article/favorites/my/".concat(e))}function c(e){return o.get("api/node/item/menus",{params:e})}function s(e){return o.get("api/node/item/count",{params:e})}function d(e){return o.get("/item/enums",{params:e})}function u(e,t){if(e)return o.get("api/node/item/".concat(e),{params:{client:null!==t&&void 0!==t?t:"std"}})}function l(e,t){if(e)return Object(i["c"])().get("api/item-price/".concat(e,"/detail"),{params:t})}function f(e){if(e.item_id)return Object(i["c"])().post("api/auction/",e)}function m(e){var t,n,i=e.ids instanceof Array?e.ids.join(","):e.ids;return o.get("/item_merged/id/".concat(i),{params:{client:null!==(t=e.client)&&void 0!==t?t:"std",per:null!==(n=e.per)&&void 0!==n?n:20}})}function p(e,t){return o.get("/item_merged/name/".concat(e),{params:t})}function h(e){var t;return o.get("/item/newest",{params:{client:null!==(t=e.client)&&void 0!==t?t:"std"}})}function g(e){return o.get("api/node/item/list",{params:e})}function v(e){return o.get("api/node/item/search",{params:e})}function w(e){return o.get("api/node/item/menu_list",{params:e})}function y(e){return Object(i["a"])().get("/api/cms/wiki/post/waiting",{params:e})}function _(e){return o.get("/manufactures",{params:e})}function b(e){return o.get("/other",{params:e})}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";if(e)return o.get("/resource/".concat(t,"/item_merged.").concat(e))}},b96b:function(e,t,n){"use strict";n("c7cd");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-var w-fold-card",class:{"is-fold":e.isFold},style:e.componentStyle},[t("div",{staticClass:"w-fold-card-title"},[e._t("title",(function(){return[e._v(" "+e._s(e.title)+" ")]}))],2),t("div",{ref:"contentContainer",staticClass:"w-fold-card-content"},[e._t("default")],2),!e.fixed&&e.showFold?t("div",{staticClass:"w-fold-card-footer"},[t("el-button",{attrs:{type:"text"},on:{click:e.toggleFold}},[e._v(" "+e._s(e.isFold?"展示全部":"收起全部")+" ")])],1):e._e()])},o=[],a=n("b85c"),r=(n("a9e3"),{name:"FoldCard",props:{title:{type:String,default:""},fixed:{type:Boolean,default:!1},maxHeight:{type:Number,default:200}},data:function(){return{isFold:!0,contentHeight:0,observer:null}},computed:{showFold:function(){return this.contentHeight>this.maxHeight-100},componentStyle:function(){var e={maxHeight:"".concat(this.maxHeight,"px")};return!this.fixed&&this.isFold||delete e.maxHeight,e}},methods:{toggleFold:function(){this.isFold=!this.isFold}},mounted:function(){var e=this,t=this.$refs.contentContainer;this.observer=new ResizeObserver((function(n){var i,o=Object(a["a"])(n);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.target===t&&(e.contentHeight=r.contentRect.height)}}catch(c){o.e(c)}finally{o.f()}})),this.observer.observe(t)},beforeDestroy:function(){this.observer.disconnect(),this.observer=null}}),c=r,s=(n("78a6"),n("2877")),d=Object(s["a"])(c,i,o,!1,null,null,null);t["a"]=d.exports},c1f9:function(e,t,n){"use strict";var i=n("23e7"),o=n("2266"),a=n("8418");i({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){a(t,e,n)}),{AS_ENTRIES:!0}),t}})},c7cd:function(e,t,n){"use strict";var i=n("23e7"),o=n("857a"),a=n("af03");i({target:"String",proto:!0,forced:a("fixed")},{fixed:function(){return o(this,"tt","","")}})},f341:function(e,t,n){"use strict";n("a2a2")},fa17:function(e,t,n){"use strict";n("870f")}}]);