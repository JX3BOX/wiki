(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05dcd2d0"],{"07ac":function(e,t,n){"use strict";var a=n("23e7"),i=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return i(e)}})},"0d43":function(e,t,n){"use strict";n("f70d")},1344:function(e,t,n){"use strict";t["a"]=function(e){return{all:e=e||new Map,on:function(t,n){var a=e.get(t);a?a.push(n):e.set(t,[n])},off:function(t,n){var a=e.get(t);a&&(n?a.splice(a.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var a=e.get(t);a&&a.slice().map((function(e){e(n)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,n)}))}}}},"13d5":function(e,t,n){"use strict";var a=n("23e7"),i=n("d58f").left,r=n("a640"),s=n("1212"),o=n("9adc"),c=!o&&s>79&&s<83,u=c||!r("reduce");a({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},1450:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("41cb"),i=function(){return Object(a["f"])().get("api/team/my-game-roles?nopage&custom=0")}},"165b":function(e,t,n){},"1f48":function(e,t,n){"use strict";n("234c")},"234c":function(e,t,n){},"262e":function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"r",(function(){return p})),n.d(t,"j",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"l",(function(){return _})),n.d(t,"k",(function(){return y})),n.d(t,"n",(function(){return k})),n.d(t,"s",(function(){return w})),n.d(t,"a",(function(){return C})),n.d(t,"m",(function(){return j})),n.d(t,"g",(function(){return x}));var a=n("5530"),i=(n("caad"),n("2532"),n("41cb")),r=Object(i["d"])();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wiki_cj_ac";return Object(i["a"])().get("/api/cms/breadcrumb/".concat(e)).then((function(e){return e.data.data.html||""}))}function o(e,t){return e?r.get("api/node/achievement/".concat(e),t):null}function c(e){return e?r.get("/api/node/achievement/".concat(e,"/relations")):null}var u=location.href.includes("origin")?"origin":"std";function l(){return r.get("/api/node/achievement/count",{params:{client:u}})}function d(e){return r.get("/api/node/achievement/menus",{params:e})}function m(e){return r.get("/api/node/achievement/points",{params:{general:e,client:u}})}function f(e,t,n){var r="/api/cms/helper/achievements/".concat(e);return t&&(r+="/".concat(t)),Object(i["a"])().get(r,{params:Object(a["a"])({client:u},n)})}function h(e){return r.post("/api/node/achievement/list",Object.assign(e,{client:u}))}function p(e){return r.get("/api/node/achievement/search",{params:Object.assign(e,{client:u})})}function v(e){return r.get("/api/node/achievement/newest",{params:{page:e,client:u}})}function b(e){return r.get("/api/node/achievement/adventure",{params:{page:e,client:u}})}function g(e){return Object(i["a"])().get("/api/cms/helper/achievements/waiting",{params:{page:e,client:u}})}function _(e){return r.get("/api/node/achievement/rare",{params:{page:e,client:u}})}function y(e){return Object(i["b"])().get("/api/achievements/out_print",{params:{page:e,client:u}})}function k(){return Object(i["c"])().get("/api/next2/virtual-achievements")}function w(e){return Object(i["c"])().post("/api/next2/virtual-achievements",e)}function C(e){return Object(i["c"])().post("/api/next2/virtual-achievements/cancel",e)}function j(e){return Object(i["c"])().get("/api/next2/user-achievements",{params:{jx3id:e}})}function x(e){return r.get("/api/node/v2/map/list",{params:e})}},"268d":function(e,t,n){},"291e":function(e,t,n){"use strict";n("c330")},"36ec":function(e,t,n){"use strict";n("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-related-roles"},[e.isLogin?t("el-select",e._b({attrs:{value:e.role,"value-key":"ID",placeholder:"请选择当前角色",disabled:!e.isLogin,"popper-class":"m-related-roles-options",size:"small"},on:{change:function(t){return e.$emit("change",t)}}},"el-select",e.$attrs,!1),[t("span",{staticClass:"u-prefix",attrs:{slot:"prefix"},slot:"prefix"},[e._v(" 角色 "),e._t("tip")],2),e.isLogin?t("el-option",{attrs:{value:e.virtualRole,label:e.virtualRole.name+"<虚拟角色>"}},[t("span",{staticClass:"u-role"},[t("span",{staticClass:"u-role-name"},[t("img",{staticClass:"u-role-icon",attrs:{src:e.virtualRole.avatar}}),e._v(e._s(e.virtualRole.name))]),t("span",{staticClass:"u-role-server"},[e._v(" <虚拟角色>")])])]):e._e(),e._l(e.roleList,(function(n){return t("el-option",{key:n.ID,attrs:{value:n,label:n.name}},[t("span",{staticClass:"u-role"},[t("span",{staticClass:"u-role-name"},[t("img",{staticClass:"u-role-icon",attrs:{src:e.showSchoolIcon(n.mount)}}),e._v(e._s(n.name))]),t("span",{staticClass:"u-role-server"},[e._v(e._s(n.server))])])])}))],2):e._e()],1)},i=[],r=n("5530"),s=n("c9d2"),o=n("85e4"),c=n("1450"),u={name:"RoleSelect",model:{prop:"role",event:"change"},props:["role"],data:function(){return{roleList:[],isLogin:s["a"].isLogin(),virtualRole:Object(r["a"])(Object(r["a"])({},s["a"].getInfo()),{},{jx3id:0,ID:~~s["a"].getInfo().uid})}},methods:{showSchoolIcon:o["r"],loadRoles:function(){var e=this;this.isLogin&&Object(c["a"])().then((function(t){var n,a;e.roleList=(null===(n=t.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.list)||[],e.$emit("list-loaded",e.roleList,e.virtualRole)}))}},mounted:function(){this.loadRoles()}},l=u,d=(n("291e"),n("2877")),m=Object(d["a"])(l,a,i,!1,null,null,null);t["a"]=m.exports},"392b":function(e,t,n){"use strict";n("e9ee")},"3a01":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-wiki-nav"},[t("Menu",{staticClass:"c-wiki-menu"}),t("div",{staticClass:"c-nav-content"},[e._t("default")],2)],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"m-menus"},e._l(e.menus,(function(n){return t("a",{key:n.value,staticClass:"u-menu",class:e.pathname.indexOf(n.value)>-1&&"is-active",attrs:{href:"/".concat(n.value)}},[e._v(" "+e._s(n.label)+" ")])})),0)])},s=[],o={name:"CommonMenu",data:function(){return{menus:[{label:"成就",value:"cj"},{label:"物品",value:"item"},{label:"任务",value:"quest"},{label:"通识",value:"knowledge"}]}},computed:{pathname:function(){return location.pathname}}},c=o,u=n("2877"),l=Object(u["a"])(c,r,s,!1,null,null,null),d=l.exports,m={name:"CommonNav",components:{Menu:d}},f=m,h=(n("799d"),Object(u["a"])(f,a,i,!1,null,null,null));t["a"]=h.exports},"42dd":function(e,t,n){"use strict";n("268d")},"498a":function(e,t,n){"use strict";var a=n("23e7"),i=n("58a8").trim,r=n("c8d2");a({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},"4c53":function(e,t,n){"use strict";var a=n("23e7"),i=n("857a"),r=n("af03");a({target:"String",proto:!0,forced:r("sub")},{sub:function(){return i(this,"sub","","")}})},"4ecf":function(e,t,n){},"52da":function(e,t,n){"use strict";var a=n("1344"),i=Object(a["a"])();t["a"]=i},"5af9":function(e,t,n){"use strict";n("4ecf")},"6f53":function(e,t,n){"use strict";var a=n("83ab"),i=n("d039"),r=n("e330"),s=n("e163"),o=n("df75"),c=n("fc6a"),u=n("d1e7").f,l=r(u),d=r([].push),m=a&&i((function(){var e=Object.create(null);return e[2]=2,!l(e,2)})),f=function(e){return function(t){var n,i=c(t),r=o(i),u=m&&null===s(i),f=r.length,h=0,p=[];while(f>h)n=r[h++],a&&!(u?n in i:l(i,n))||d(p,e?[n,i[n]]:i[n]);return p}};e.exports={entries:f(!0),values:f(!1)}},7575:function(e,t,n){"use strict";n("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",[t("Header"),t("Breadcrumb",{attrs:{name:e.name,slug:e.slug,root:e.computedRoot,publishEnable:e.publishEnable,adminEnable:e.adminEnable,topicEnable:e.topicEnable,feedbackEnable:e.feedbackEnable,overlayEnable:e.overlayEnable,crumbEnable:e.crumbEnable,withoutLeft:e.withoutLeft,adminMarks:e.adminMarks},scopedSlots:e._u([{key:"op-append",fn:function(){return[e.showAdmin?t("div",{staticClass:"m-wiki-admin-drop"},[t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("el-button",{staticClass:"c-admin-button c-admin-drop__button",attrs:{type:"primary",size:"medium"}},[t("i",{staticClass:"el-icon-setting"}),e._v(" 管理"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.hasPermission("push_banner")?t("el-dropdown-item",{attrs:{icon:"el-icon-upload",command:"designTask"}},[t("span",[e._v("推送")])]):e._e(),t("el-dropdown-item",{attrs:{icon:"el-icon-refresh",command:"pictureTask"}},[t("span",[e._v("刷图")])])],1)],1)],1):e._e()]},proxy:!0}])},[t("img",{attrs:{slot:"logo","svg-inline":"",src:e.logo},slot:"logo"}),e._t("breadcrumb")],2),t("LeftSidebar",[e._t("left")],2),t("Main",{attrs:{withoutRight:e.withoutRight}},[t("div",{staticClass:"m-main",class:"p-"+e.pageName},[e._t("default")],2),t("RightSidebar",{staticClass:"m-wiki-right-side",attrs:{"show-toggle":!0}},[e._t("right")],2),t("Footer")],1)],1)},i=[],r=(n("ac1f"),n("466d"),n("65c2")),s=n("c9d2"),o=n("85e4"),c=n("52da"),u=n("c967"),l={name:"DefaultLayout",props:{name:{type:String,default:"成就百科"},slug:{type:String,default:"achievement"},root:{type:String,default:""},withoutRight:{type:Boolean,default:!1},publishEnable:{type:Boolean,default:!1},adminEnable:{type:Boolean,default:!1},topicEnable:{type:Boolean,default:!1},feedbackEnable:{type:Boolean,default:!1},overlayEnable:{type:Boolean,default:!1},crumbEnable:{type:Boolean,default:!0},withoutLeft:{type:Boolean,default:!1},adminMarks:{type:Array,default:function(){return[]}},icon:{type:String,default:""}},computed:{computedRoot:function(){return this.root?this.root:this.slug},pageName:function(){return this.$route.name},showAdmin:function(){return!Object(o["m"])()&&"view"===this.$route.name&&s["a"].isEditor()},logo:function(){var e=this.icon||this.slug;return r["__cdn"]+"logo/logo-light/"+e+".svg"}},methods:{hasPermission:function(e){return s["a"].hasPermission(e)},handleCommand:function(e){this[e]()},designTask:function(){c["a"].emit("openWikiPush",!0)},pictureTask:function(){var e=this,t=location.pathname,n=/\/([^/]+)\/view\/([\d_]+)/,a=t.match(n),i="",r="";a&&(i=a[1],r=a[2]),i&&r?Object(u["k"])({task_type:i,task_target_id:r}).then((function(t){t.data.code||e.$message.success("QQ机器人图片生成提交成功")})):this.$message.error("参数不正确")}}},d=l,m=(n("42dd"),n("2877")),f=Object(m["a"])(d,a,i,!1,null,null,null);t["a"]=f.exports},"799d":function(e,t,n){"use strict";n("165b")},"7c65":function(e,t,n){"use strict";n.r(t);n("ac1f"),n("841c");var a=function(){var e=this,t=e._self._c;return t("DefaultLayout",{attrs:{name:"成就百科",slug:"cj",root:"/cj",publishEnable:!0,feedbackEnable:!0,adminEnable:!1},scopedSlots:e._u([{key:"breadcrumb",fn:function(){return[t("AchievementCount")]},proxy:!0},{key:"left",fn:function(){return[t("CommonNav",[t("Sidebar",{attrs:{sidebar:e.$store.state.sidebar}})],1)]},proxy:!0},{key:"right",fn:function(){return[t("Info",{attrs:{type:"achievement"}})]},proxy:!0}])},[t("Search",{attrs:{placeholder:e.placeholder},on:{search:function(t){return e.search(t)}}},[t("el-cascader",{attrs:{props:{emitPath:!1},"show-all-levels":!1,options:e.regions,filterable:"",clearable:"",placeholder:"地图"},on:{change:e.onChangeMap},model:{value:e.regionId,callback:function(t){e.regionId=t},expression:"regionId"}})],1),t("router-view"),t("schema-select",{ref:"schema-select"})],1)},i=[],r=n("5530"),s=(n("14d9"),n("13d5"),n("b0c0"),n("e9f5"),n("9485"),n("a9e3"),n("d3b7"),n("07ac"),n("5319"),n("498a"),n("4c53"),n("262e")),o=n("7575"),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-achievement-count"},[t("div",{staticClass:"u-stat"},e._l(e.countDict,(function(n,a){return t("span",{key:a},[t("em",[e._v(e._s(n))]),t("b",[e._v(e._s(e.count[a]))])])})),0)])},u=[],l={name:"AchievementCount",data:function(){return{generalNum:137,count:{},countDict:{general:"常规成就数",general_point:"常规资历数",armor:"五甲成就数",armor_point:"五甲资历数"}}},created:function(){var e=this;Object(s["d"])().then((function(t){var n;t=t.data,e.count=t.data.count,e.count.general=~~(null===(n=e.count)||void 0===n?void 0:n.general)+e.generalNum,e.$store.commit("SET_STATE",{key:"generalTotal",value:~~e.count["general"]}),e.$store.commit("SET_STATE",{key:"armorTotal",value:~~e.count["armor"]})}))}},d=l,m=(n("e956"),n("2877")),f=Object(m["a"])(d,c,u,!1,null,null,null),h=f.exports,p=n("9b18"),v=(n("caad"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-left-side"},[t("role-select",{on:{"list-loaded":e.onRoleLoaded},scopedSlots:e._u([{key:"tip",fn:function(){return[e.isVirtual||e.isSync?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"虚拟角色即为魔盒账号本身，可自定义进度",placement:"top"}},[t("a",{attrs:{href:"/tool/74559",target:"_blank"}},[t("i",{staticClass:"el-icon-warning-outline"})])]):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请先在游戏中同步成就",placement:"top"}},[t("a",{attrs:{href:"/tool/74559",target:"_blank"}},[t("i",{staticClass:"el-icon-warning-outline"})])])]},proxy:!0}]),model:{value:e.currentRole,callback:function(t){e.currentRole=t},expression:"currentRole"}}),t("el-select",{attrs:{size:"small"},model:{value:e.sidebar.general,callback:function(t){e.$set(e.sidebar,"general",t)},expression:"sidebar.general"}},e._l(e.menu_types,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.currentRole?t("div",{staticClass:"m-filters"},[t("el-checkbox",{attrs:{label:"只看未完成",border:"",size:"mini"},model:{value:e.uncompleted,callback:function(t){e.uncompleted=t},expression:"uncompleted"}}),[1,2].includes(e.sidebar.general)?t("div",{staticClass:"u-total"},[t("b",{staticClass:"u-completed-num"},[e._v(e._s(e.uncompleted?e.achievementTotal-e.completedNum:e.completedNum))]),t("span",{staticClass:"u-total-num"},[e._v(" / "+e._s(e.achievementTotal))])]):e._e()],1):e._e(),t("div",{staticClass:"m-menus"},[t("el-tree",{ref:"tree",staticClass:"filter-tree",class:{other:[3].includes(e.sidebar.general)},attrs:{data:e.menus,"node-key":"id","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.clickNode},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.data;return t("router-link",{staticClass:"el-tree-node__label",attrs:{to:e.menu_url(a)}},[t("span",{staticClass:"u-name",domProps:{textContent:e._s(a.name)}}),a.achievements_count?t("em",{staticClass:"u-count"},[e._v(" ("),e.currentRole?t("span",[e._v(e._s("".concat(e.uncompleted?a.achievements_count+~~a.own_achievements_count-e.getMenuCompleted(a):e.getMenuCompleted(a),"/")))]):e._e(),t("span",[e._v(e._s("".concat(a.achievements_count+~~a.own_achievements_count)))]),e._v(") ")]):e._e()])}}])})],1)],1)}),b=[],g=(n("99af"),n("4de4"),n("7db0"),n("a630"),n("d81d"),n("910d"),n("f665"),n("ab43"),n("6062"),n("1e70"),n("79a4"),n("c1a1"),n("8b00"),n("a4e7"),n("1e5a"),n("72c3"),n("2532"),n("3ca3"),n("ddb0"),n("36ec")),_=n("76ea"),y=n("c9d2"),k=n("85e4"),w=n("2ef0"),C={name:"Sidebar",props:["sidebar"],components:{RoleSelect:g["a"]},data:function(){return{menus_cache:[],menus:[],old_node:null,menu_types:[{value:1,label:"常规成就"},{value:2,label:"五甲成就"},{value:3,label:"其他板块"}],roleList:[],currentRole:"",isLogin:y["a"].isLogin(),uncompleted:!1,virtualRole:Object(r["a"])(Object(r["a"])({},y["a"].getInfo()),{},{jx3id:0,ID:~~y["a"].getInfo().uid}),isSync:!1}},computed:{generalTotal:function(){return this.$store.state.generalTotal},armorTotal:function(){return this.$store.state.armorTotal},achievementTotal:function(){var e=this.total;return 1===this.sidebar.general&&(e=this.generalTotal),2===this.sidebar.general&&(e=this.armorTotal),e},achievements:function(){return this.$store.state.achievements},achievementsVirtual:function(){return this.$store.state.achievementsVirtual},isVirtual:function(){var e;return!(null!==(e=this.currentRole)&&void 0!==e&&e.jx3id)},completedNum:function(e){var t=this,n=e.menus,a=e.achievementsVirtual,i=e.achievements,r=n.map((function(e){return t.getMenuCompleted(e,a,i)}));return r.reduce((function(e,t){return e+t}),0)},total:function(e){var t=e.menus,n=t.map((function(e){return e.achievements_count+e.own_achievements_count}));return n.reduce((function(e,t){return e+t}),0)}},watch:{$route:function(e){if("normal"!==e.name)for(var t=this.$refs.tree.store._getAllNodes(),n=0;n<t.length;n++)t[n].expanded=!1},sidebar:{immediate:!0,deep:!0,handler:function(e,t){var n=this;n.expand_menu(),n.sidebar.general&&n.get_menus(this.sidebar.general)}},virtualRole:{immediate:!0,deep:!0,handler:function(e){this.currentRole=e}},currentRole:{deep:!0,handler:function(e){if(e){localStorage.setItem("wiki_last_sync",e.jx3id||0),this.$store.commit("SET_STATE",{key:"role",value:e});var t=e.jx3id;t?(this.$store.commit("SET_STATE",{key:"achievementsVirtual",value:[]}),this.loadRoleAchievements(t)):(0===t&&this.loadVirtualAchievements(),this.$store.commit("SET_STATE",{key:"achievements",value:[],isSession:!0}))}}},uncompleted:function(e){this.$store.commit("SET_STATE",{key:"onlyUncompleted",value:e})},isLogin:{immediate:!0,handler:function(e){e||(this.currentRole="",this.$store.commit("SET_STATE",{key:"role",value:""}),this.$store.commit("SET_STATE",{key:"wiki_last_sync",value:0}),localStorage.setItem("wiki_last_sync",0),this.$store.commit("SET_STATE",{key:"achievements",value:[],isSession:!0}))}}},methods:{getLastAchievement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){if(Array.isArray(e)){var t=null===e||void 0===e?void 0:e[e.length-1];return t}return e}))},getMenuCompleted:function(e,t,n){var a,i=this,r=Object(w["cloneDeep"])(e),s=this.isVirtual?Object(w["flattenDeep"])(r.achievements):this.getLastAchievement(r.achievements);r.all_achievements=r.children?Array.from(new Set(s.concat(Object(w["flattenDeep"])(r.children.map((function(e){return i.isVirtual?e.achievements:i.getLastAchievement(e.achievements)})))))):s;var o=this.isVirtual?t||this.achievementsVirtual:n||this.achievements;return null===(a=r.all_achievements.filter((function(e){return o.includes(e+"")})))||void 0===a?void 0:a.length},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},clickNode:function(e,t){var n=this,a=null;0===e.own_achievements_count&&(a=t.childNodes[0],a&&(setTimeout((function(){n.$router.push({name:2==n.sidebar.general?"top_five":"normal",params:{sub:a.data.sub,detail:a.data.detail},query:Object(w["omit"])(n.$route.query,"page")})}),100),this.$refs.tree.store.setCurrentNode(a)));var i=a||t;!0!==t.expanded?t.expanded=!0:this.old_node==i&&(t.expanded=!1),this.old_node=i,window.innerWidth<1024&&t.isLeaf&&_["a"].$emit("toggleLeftSide",!1)},get_menus:function(e){var t=this;t.menus_cache[e]?t.menus=t.menus_cache[e]:3!=e?Object(s["i"])({general:e}).then((function(n){if(n=n.data,200===n.code){var a=[];for(var i in n.data.menus)a.push(n.data.menus[i]);t.menus=a,t.menus_cache[e]=a,t.expand_menu()}}),(function(){t.menus=!1})):t.menus=[{name:"最新成就",id:"newest",router:"newest"},{name:"待攻略成就",id:"waiting",router:"waiting"},{name:"奇遇成就",id:"adventure",router:"adventure"},{name:"珍奇成就",id:"rare",router:"rare"}]},expand_menu:function(){var e=this;e.$nextTick((function(){var t="";if(3!=e.sidebar.general){var n=e.sidebar.sub,a=e.sidebar.detail;t=n+(a?"-".concat(a):"")}else t=e.sidebar.other;if(t){var i=e.$refs.tree.store.getNode(t);if(i)return i.expanded=!0,i.parent&&(i.parent.expanded=!0),void e.$refs.tree.store.setCurrentNode(i)}}))},menu_url:function(e){switch(this.sidebar.general){case 1:return{name:"normal",params:{sub:e.sub,detail:e.detail},query:Object(w["omit"])(this.$route.query,["page"])};case 2:return{name:"top_five",params:{sub:e.sub,detail:e.detail},query:Object(w["omit"])(this.$route.query,["page"])};case 3:return{name:e.router,query:Object(w["omit"])(this.$route.query,["page"])}}return null},onRoleLoaded:function(e,t){var n=localStorage.getItem("wiki_last_sync");n&&"0"!==n?this.currentRole=e.find((function(e){return e.jx3id==n}))||"":(this.currentRole=t,this.$store.commit("SET_STATE",{key:"role",value:t}),this.loadVirtualAchievements())},loadRoleAchievements:function(e){var t=this;Object(s["m"])(e).then((function(e){var n,a,i,r,s=(null===(n=e.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.achievements)||"",o=null===(i=e.data)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.jx3id;t.isSync=!!o;var c=s.split(",");t.$store.commit("SET_STATE",{key:"achievements",value:c,isSession:!0})}))},showSchoolIcon:k["r"],loadVirtualAchievements:function(){var e=this;this.currentRole&&!this.currentRole.jx3id&&Object(s["n"])().then((function(t){var n,a,i=(null===(n=t.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.achievements)||"",r=i.split(",");e.$store.commit("SET_STATE",{key:"achievementsVirtual",value:r})}))}}},j=C,x=(n("5af9"),Object(m["a"])(j,v,b,!1,null,null,null)),$=x.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-right-side",class:{isHome:e.isHome}},[t("SideMsg"),t("Rank"),t("div",{staticClass:"m-group"},[t("h2",{staticClass:"m-title"},[t("svg",{class:"u-icon",attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M256 256h85.333v21.333C341.333 300.897 360.436 320 384 320s42.667-19.103 42.667-42.667V256H512V42.667C512 19.103 492.897 0 469.333 0H256z",fill:"#dd636e"}}),t("path",{attrs:{d:"M469.333 0H384v320c23.564 0 42.667-19.103 42.667-42.667V256H512V42.667C512 19.103 492.897 0 469.333 0z",fill:"#d82e3d"}}),t("path",{attrs:{d:"M256 256v-85.333h21.333C300.897 170.667 320 151.564 320 128s-19.103-42.667-42.667-42.667H256V0H42.667C19.103 0 0 19.103 0 42.667V256z",fill:"#ffe646"}}),t("path",{attrs:{d:"M277.333 85.333H256V0H128v256h128v-85.333h21.333C300.898 170.667 320 151.564 320 128s-19.102-42.667-42.667-42.667z",fill:"#ffc81e"}}),t("path",{attrs:{d:"M256 256h-85.333v-21.333C170.667 211.102 151.564 192 128 192s-42.667 19.102-42.667 42.667V256H0v213.333C0 492.897 19.103 512 42.667 512H256z",fill:"#d49eee"}}),t("path",{attrs:{d:"M256 512V256h-85.333v-21.333C170.667 211.103 151.564 192 128 192v320z",fill:"#b77ede"}}),t("path",{attrs:{d:"M256 256v85.333h-21.333C211.102 341.333 192 360.436 192 384s19.102 42.667 42.667 42.667H256V512h213.333C492.897 512 512 492.897 512 469.333V256z",fill:"#badc1e"}}),t("path",{attrs:{d:"M384 512h85.333C492.897 512 512 492.897 512 469.333V256H384z",fill:"#73be14"}}),t("path",{attrs:{d:"M341.333 249v28.333C341.333 300.897 360.436 320 384 320s42.667-19.103 42.667-42.667V249z",fill:"#dd636e"}}),t("path",{attrs:{d:"M384 246v74c23.564 0 42.667-19.103 42.667-42.667V246z",fill:"#d82e3d"}})]),t("span",{staticClass:"u-text"},[e._v("各区服成就群")]),t("a",{staticClass:"u-show-message",attrs:{target:"_blank",href:"https://www.jx3box.com/tool/13659/"}},[e._v("申请展示 »")])]),t("div",{staticClass:"m-group-content"},[t("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.groups,(function(n){return t("el-collapse-item",{key:n.uuid,attrs:{title:n.label,name:n.label}},e._l(n.children,(function(n){return t("div",{key:n.uuid,staticClass:"u-zones"},[t("el-tag",{staticClass:"u-zone",attrs:{size:"mini"}},[e._v(e._s(n.label))]),e._l(n.children,(function(n){return t("span",{key:n.uuid,staticClass:"u-qq",attrs:{size:"mini"},on:{click:function(t){return e.copy(n.label)}}},[e._v(e._s(n.label))])}))],2)})),0)})),1)],1)])],1)},O=[],T=(n("7d54"),n("9911"),n("159b"),n("41cb"));function E(e){return Object(T["a"])({mute:!0}).get("/api/cms/menu-group/".concat(e),{})}n("65c2");var R=n("fe53"),L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-wiki-rank"},[t("h2",{staticClass:"m-title"},[t("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("g",{attrs:{fill:"#ffa91e"}},[t("path",{attrs:{d:"M324.891 167.266l16.262 94.815L256 217.314l-85.153 44.767 16.262-94.815-68.891-67.16 95.205-13.833L256 0l42.577 86.273 95.205 13.833z"}}),t("path",{attrs:{d:"M409.944 253.46v87.673L256.9 403.303l-.9-.36-153.944-61.76V253.46L256 315.219z"}}),t("path",{attrs:{d:"M409.944 362.157v87.673L256.9 512l-.9-.36-153.944-61.76v-87.723L256 423.916z"}})]),t("g",{attrs:{fill:"#ff8900"}},[t("path",{attrs:{d:"M341.153 262.081L256 217.314V0l42.577 86.273 95.205 13.833-68.891 67.16zM409.944 253.46v87.673L256.9 403.303l-.9-.36v-87.724zM256 423.916l153.944-61.759v87.673L256.9 512l-.9-.36z"}})])]),t("span",{staticClass:"u-text"},[e._v("排行榜")])]),t("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabs,(function(n){return t("el-tab-pane",{key:n.name,attrs:{label:n.label,name:n.name}},[t("ul",{staticClass:"u-list"},e._l(e.ranks,(function(n,a){return t("li",{key:a},[t("a",{staticClass:"u-contributor",attrs:{href:n.id?e.authorLink(n.id):null}},[t("span",{staticClass:"u-left"},[t("span",{staticClass:"u-order",class:a<3&&"t".concat(a+1)},[e._v(e._s(a+1))]),t("img",{staticClass:"u-avatar",attrs:{src:e.showAvatar(n.avatar),alt:n.nickname}}),t("span",{staticClass:"u-name",domProps:{textContent:e._s(n.nickname)}})]),t("em",{staticClass:"u-count"},[e._v("+ "+e._s(n.count))])])])})),0)])})),1)],1)},q=[],M=(n("fb6a"),n("c967")),A={name:"WikiRanks",props:{type:{type:String,default:"achievement"}},data:function(){return{ranks:[],activeTab:"achievement",tabs:[{name:"achievement",label:"成就"},{name:"item",label:"物品"},{name:"quest",label:"任务"},{name:"knowledge",label:"通识"},{name:"skill",label:"技能"}]}},computed:{client:function(){return this.$store.state.client}},watch:{activeTab:function(){this.loadData()}},mounted:function(){this.loadData()},methods:{showAvatar:k["q"],authorLink:k["a"],loadData:function(){var e=this,t={type:this.activeTab,client:this.client};Object(M["j"])(t).then((function(t){var n;e.ranks=((null===(n=t.data)||void 0===n?void 0:n.data)||[]).slice(0,10)}))}}},N=A,z=(n("d922"),Object(m["a"])(N,L,q,!1,null,null,null)),V=z.exports,I=n("ec26"),H={name:"Extend",components:{SideMsg:R["a"],Rank:V},props:{type:{type:String,default:"achievement"}},data:function(){return{ranks:[],groups:[],isHome:!0,activeName:"",qq:"614370825"}},computed:{client:function(){return this.$store.state.client}},methods:{clickNode:function(e){if(!e.children){var t=e.label;this.copy(t)}},copy:function(e){var t=this;navigator.clipboard.writeText(e).then((function(){t.$notify({title:"复制成功",message:e,type:"success"})}))},copy_success:function(){this.$notify({title:"复制成功",type:"success"})},copy_error:function(){this.$notify({title:"浏览器不支持",type:"error"})},checkIsHome:function(){this.isHome="home"==this.$route.name||!this.$route.name},onQQClick:function(){var e=this;navigator.clipboard.writeText(this.qq).then((function(){e.$notify({title:"复制成功",message:"内容："+e.qq,type:"success"})}))},loadGroups:function(){var e=this;E("wiki_cj_group").then((function(t){var n,a,i=(null===(n=t.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.menus)||[],r=i.map((function(e){var t;return{zone:e.label.split("/")[0],server:(null===(t=e.label.split("/"))||void 0===t?void 0:t[1])||"",children:e.link.split("/"),priority:e.priority}}));e.groups=e.convertToTree(r)}))},convertToTree:function(e){var t={};return e.forEach((function(e){var n=e.zone;t[n]||(t[n]={label:n,children:[],uuid:Object(I["a"])()});var a={label:e.server,children:e.children.map((function(e){return{label:e,uuid:Object(I["a"])()}})),priority:e.priority,uuid:Object(I["a"])()};t[n].children.push(a)})),Object.values(t)}},mounted:function(){this.loadGroups(),this.checkIsHome()},watch:{"$route.name":function(){this.checkIsHome()}}},D=H,B=(n("0d43"),Object(m["a"])(D,S,O,!1,null,null,null)),P=B.exports,F=n("3a01"),Q=n("52da"),W=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"m-schema-select",attrs:{visible:e.visible,title:"添加至方案","append-to-body":"","before-close":e.onFinish},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onFinish}},[e._v("完成")])]},proxy:!0}])},[t("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:e.schemas}},[t("el-table-column",{attrs:{prop:"title",label:"方案名称"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[a.schema.includes(e.achievement_id)?t("el-button",{attrs:{type:"info",size:"mini",loading:e.loading},on:{click:function(t){return e.removeFromSchema(a)}}},[e._v(" 移出 ")]):t("el-button",{attrs:{type:"primary",size:"mini",loading:e.loading},on:{click:function(t){return e.addToSchema(a)}}},[e._v("添加")])]}}])})],1)],1)},G=[],J=n("2909"),U={name:"SchemaSelect",data:function(){return{visible:!1,schemas:[],loading:!1,achievement_id:0}},methods:{open:function(e){this.visible=!0,this.achievement_id=e},addToSchema:function(e){var t=this,n=e.id,a=this.achievement_id,i=[].concat(Object(J["a"])(e.schema),[a]);this.loading=!0,Object(M["l"])(n,{schema:i}).then((function(e){var a=e.data.data;t.$message.success("添加成功"),t.schemas=t.schemas.map((function(e){return e.id===n?a:e}))})).finally((function(){t.loading=!1}))},removeFromSchema:function(e){var t=this,n=e.id,a=this.achievement_id,i=e.schema.filter((function(e){return e!==a}));this.loading=!0,Object(M["l"])(n,{schema:i}).then((function(e){var a=e.data.data;t.$message.success("移出成功"),t.schemas=t.schemas.map((function(e){return e.id===n?a:e}))})).finally((function(){t.loading=!1}))},onFinish:function(){this.visible=!1}},mounted:function(){var e=this;y["a"].isLogin()&&Object(M["h"])({is_official:0,_no_page:1}).then((function(t){e.schemas=t.data.data}))}},K=U,X=(n("1f48"),Object(m["a"])(K,W,G,!1,null,null,null)),Y=X.exports,Z={name:"App",data:function(){return{placeholder:"输入成就名称/成就描述/称号/奖励物品「回车」进行搜索",regionId:null,regions:[]}},components:{AchievementCount:h,Sidebar:$,Search:p["a"],Info:P,DefaultLayout:o["a"],CommonNav:F["a"],SchemaSelect:Y},computed:{isSingle:function(){return"view"==this.$route.name}},watch:{$route:{immediate:!0,handler:function(){this.$route.query.scene&&(this.regionId=Number(this.$route.query.scene)),this.$route.params.sub||this.$route.params.detail||this.$route.params.source_id?(this.$route.params.sub&&(this.$store.state.sidebar.sub=this.$route.params.sub),this.$route.params.detail&&(this.$store.state.sidebar.detail=this.$route.params.detail)):(this.$store.state.sidebar.sub=null,this.$store.state.sidebar.detail=null),3==this.$store.state.sidebar.general&&this.$route.name&&this.$set(this.$store.state.sidebar,"other",this.$route.name)}}},methods:{onChangeMap:function(e){if(!e){var t=Object(r["a"])({},this.$route.query);return delete t.scene,void this.$router.replace({name:"search",query:t})}var n=Object(r["a"])(Object(r["a"])({},this.$route.query),{},{scene:e});n.scene!=this.$route.query.scene&&this.$router.replace({name:"search",query:n})},getAppIcon:k["e"],search:function(e){delete this.$store.state.scroll_tops["search"];var t={name:"search",params:{keyword:e.trim().replace(/(?:^\[)|(?:\]$)/gi,"")},query:this.$route.query};this.$router.push(t)},loadMapList:function(){var e=this,t=this.$store.state.client,n={client:t,_no_page:1};Object(s["g"])(n).then((function(t){var n=t.data.data||[];e.regions=Object.values(n.reduce((function(e,t){return t.RegionName?(e[t.RegionName]||(e[t.RegionName]={value:Number(t.Region),label:t.RegionName,children:[]}),e[t.RegionName].children.push({value:Number(t.ID),label:t.MapName}),e):e}),{}))}))}},mounted:function(){var e=this;this.loadMapList(),Q["a"].on("append-to-leap-schema",(function(t){console.log(t),e.$refs["schema-select"].open(t)}))}},ee=Z,te=(n("bfe2"),Object(m["a"])(ee,a,i,!1,null,null,null));t["default"]=te.exports},9485:function(e,t,n){"use strict";var a=n("23e7"),i=n("2266"),r=n("59ed"),s=n("825a"),o=n("46c4"),c=n("2a62"),u=n("f99f"),l=n("2ba4"),d=n("d039"),m=TypeError,f=d((function(){[].keys().reduce((function(){}),void 0)})),h=!f&&u("reduce",m);a({target:"Iterator",proto:!0,real:!0,forced:f||h},{reduce:function(e){s(this);try{r(e)}catch(d){c(this,"throw",d)}var t=arguments.length<2,n=t?void 0:arguments[1];if(h)return l(h,this,t?[e]:[e,n]);var a=o(this),u=0;if(i(a,(function(a){t?(t=!1,n=a):n=e(n,a,u),u++}),{IS_RECORD:!0}),t)throw new m("Reduce of empty iterator with no initial value");return n}})},"9b18":function(e,t,n){"use strict";n("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-search-bar m-cj-search",class:"view"==e.$route.name?"can-return":""},[t("div",{staticClass:"m-return"},[t("el-button",{staticClass:"u-return-btn",on:{click:e.returnHandle}},[t("i",{staticClass:"el-icon-arrow-left"}),e._v("返回")])],1),t("div",{staticClass:"m-search"},[t("el-input",{staticClass:"u-search-input",attrs:{placeholder:e.placeholder,clearable:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchHandle.apply(null,arguments)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._t("default",(function(){return[t("i",{staticClass:"el-icon-search"}),e._v(" "),t("span",{staticClass:"u-text"},[e._v("关键词")])]}))]},proxy:!0}],null,!0),model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[t("el-button",{staticClass:"u-search-btn",attrs:{slot:"append",type:"primary",plain:""},on:{click:e.searchHandle},slot:"append"},[t("i",{staticClass:"el-icon-position"}),e._v(" "),t("span",{staticClass:"u-text"},[e._v("搜索")])])],1),e._t("filter")],2)])},i=[],r=(n("14d9"),{props:{name:{type:String,default:"CommonSearch"},placeholder:{type:String,default:"输入关键词「回车」进行搜索"}},data:function(){return{keyword:""}},methods:{returnHandle:function(){history.length<=1?this.$router.push({name:"home"}):history.back()},searchHandle:function(){var e=this.keyword;this.$emit("search",e)}}}),s=r,o=(n("392b"),n("2877")),c=Object(o["a"])(s,a,i,!1,null,null,null);t["a"]=c.exports},b49c:function(e,t,n){},be73:function(e,t,n){},bfe2:function(e,t,n){"use strict";n("be73")},c330:function(e,t,n){},c8d2:function(e,t,n){"use strict";var a=n("5e77").PROPER,i=n("d039"),r=n("5899"),s="​᠎";e.exports=function(e){return i((function(){return!!r[e]()||s[e]()!==s||a&&r[e].name!==e}))}},c967:function(e,t,n){"use strict";n.d(t,"j",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"l",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"k",(function(){return p}));var a=n("41cb");function i(e){return Object(a["a"])().get("/api/cms/wiki/post/rank",{params:e})}function r(e,t){return Object(a["a"])().get("/api/cms/wiki/post/id/".concat(e),{params:t})}function s(e){return Object(a["a"])({mute:!0}).get("/api/cms/user/".concat(e,"/info"))}function o(e){return Object(a["a"])().get("/api/cms/user/kith/my")}function c(e){return Object(a["a"])().get("/api/cms/user/kith/game-roles/".concat(e))}function u(e){return Object(a["a"])().get("/api/cms/pvx/wiki_achievement_leap_schema",{params:e})}function l(e){return Object(a["a"])().post("/api/cms/pvx/wiki_achievement_leap_schema",e)}function d(e){return Object(a["a"])().get("/api/cms/pvx/wiki_achievement_leap_schema/".concat(e))}function m(e,t){return Object(a["a"])().put("/api/cms/pvx/wiki_achievement_leap_schema/".concat(e),t)}function f(e){return Object(a["a"])().delete("/api/cms/pvx/wiki_achievement_leap_schema/".concat(e))}function h(e){return Object(a["a"])().post("/api/cms/pvx/wiki_achievement_difficulty/list",e)}function p(e){return Object(a["a"])().post("/api/cms/qqbot/picture_task",e)}},d58f:function(e,t,n){"use strict";var a=n("59ed"),i=n("7b0b"),r=n("44ad"),s=n("07fa"),o=TypeError,c="Reduce of empty array with no initial value",u=function(e){return function(t,n,u,l){var d=i(t),m=r(d),f=s(d);if(a(n),0===f&&u<2)throw new o(c);var h=e?f-1:0,p=e?-1:1;if(u<2)while(1){if(h in m){l=m[h],h+=p;break}if(h+=p,e?h<0:f<=h)throw new o(c)}for(;e?h>=0:f>h;h+=p)h in m&&(l=n(l,m[h],h,d));return l}};e.exports={left:u(!1),right:u(!0)}},d922:function(e,t,n){"use strict";n("b49c")},e956:function(e,t,n){"use strict";n("f435")},e9ee:function(e,t,n){},f435:function(e,t,n){},f70d:function(e,t,n){},fe53:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-wiki-side-msg"},[t("RightSideMsg",[t("em",[e._v("魔盒成就群")]),e._v(" : "),t("strong",[t("a",{attrs:{href:"https://jq.qq.com/?_wv=1027&k=5S50j08"}},[e._v(e._s(e.qq))])])])],1)},i=[],r={name:"CommonSideMsg",data:function(){return{qq:"614370825"}}},s=r,o=n("2877"),c=Object(o["a"])(s,a,i,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-05dcd2d0.7e1c9a99.js.map