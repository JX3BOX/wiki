{"version":3,"sources":["webpack:///./node_modules/@jx3box/jx3box-common/js/wiki_v2.js","webpack:///./src/components/wiki-panel.vue?9bc9","webpack:///./src/components/common/qr-code.vue?d0f9","webpack:///./src/components/wiki-panel.vue","webpack:///./src/components/common/qr-code.vue","webpack:///src/components/common/qr-code.vue","webpack:///./src/components/common/qr-code.vue?fe86","webpack:///./src/components/common/qr-code.vue?1da4","webpack:///src/components/wiki-panel.vue","webpack:///./src/components/wiki-panel.vue?12e1","webpack:///./src/components/wiki-panel.vue?40a7"],"names":["getPet","petid","params","get","client","location","href","includes","wiki","type","id","post_id","data","post","put","delete","source_type","source_id","source","isEmpty","compatible","users","res","this","console","log","res_1","then","res_2","pet","ItemTabType","ItemTabIndex","handleMix","wikiComment","comment_id","render","_vm","_c","_self","staticClass","class","borderNone","wikiPost","scene","_t","showQR","_e","length","_v","_l","slice","user","key","attrs","author_url","thumbnail_url","avatar","nickname","level","i","stat","domProps","_s","views","updated","ts2str","currentPost","model","value","showDesignTask","callback","$$v","expression","staticRenderFns","mode","on","active","togglePic","size","name","props","s","v","computed","methods","e","stopPropagation","mounted","vm","document","addEventListener","components","QrcodeVue","component","Object","String","default","Boolean","isEditor","User","watch","immediate","handler","_this","getStat","status","authorLink","val","showAvatar","onPush","_this$wikiPost","_this$wikiPost2","_this$wikiPost2$post","_this$wikiPost3","_this$wikiPost3$post","_this$wikiPost4","_this$wikiPost4$post","_objectSpread","post_title","title","post_type","ID","QRcode","DesignTask"],"mappings":"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","file":"js/chunk-d5b9e9c8.881963a0.js","sourcesContent":["import { $cms, $node } from \"./https\";\n\nconst getPet = (petid, params) => {\n    return $node().get(`/pet/${petid}`, {\n        params\n    });\n}\n\nconst client = location.href.includes(\"origin\") ? \"origin\" : \"std\";\n\nexport const wiki = {\n    // 最新攻略\n    latest({ type }, params) {\n        return $cms().get(`/api/cms/wiki/post/latest`, {\n            params: {\n                client,\n                ...params,\n                type,\n            }\n        })\n    },\n    // 我的\n    mine(params) {\n        return $cms().get(`/api/cms/wiki/post/mine`, {\n            params\n        })\n    },\n    // 统计\n    counter({ type }, params) {\n        return $cms().get(`/api/cms/wiki/post/counter`, {\n            params: {\n                client,\n                ...params,\n                type,\n            }\n        })\n    },\n    // 成就列表\n    achievements(params) {\n        return $node().get(`/achievement/list`, {\n            params: {\n                client,\n                ...params,\n            }\n        })\n    },\n    // 详情\n    get({ type, id }, params) {\n        return $cms().get(`/api/cms/wiki/post/type/${type}/source/${id}`, {\n            params: {\n                client,\n                ...params,\n            }\n        })\n    },\n    getById(post_id) {\n        return $cms().get(`/api/cms/wiki/post/id/${post_id}`)\n    },\n    post(data) {\n        return $cms().post(`/api/cms/wiki/post`, data)\n    },\n    update(post_id, data) {\n        return $cms().put(`/api/cms/wiki/post/${post_id}`, data)\n    },\n    remove(post_id) {\n        return $cms().delete(`/api/cms/wiki/post/${post_id}`)\n    },\n    // 获取历史版本\n    versions({ type, id }, params) {\n        return $cms().get(`/api/cms/wiki/post/type/${type}/source/${id}/versions`, {\n            params: {\n                client,\n                ...params,\n            }\n        })\n    },\n    // 获取兼容攻略\n    async handleMix(source_type, source_id, client, params) {\n        let post = '';\n        let source = '';\n        let isEmpty = true;\n        let compatible = false;\n        let users = [];\n        if (client === 'std') {\n            const res = await this.get({ type: source_type, id: source_id }, { client, ...params });\n            post = res.data.data.post;\n            source = res.data.data.source;\n            users = res.data.data.users;\n            post && (isEmpty = false);\n            console.log(\"获取旗舰攻略\");\n            return { post, source, isEmpty, compatible, type: source_type, source_id: source_id, users };\n        } else {\n            const res_1 = await this.get({ type: source_type, id: source_id }, { client, ...params });\n            source = res_1.data.data.source;\n            post = res_1.data.data.post;\n            users = res_1.data.data.users;\n            post && (isEmpty = false);\n            console.log(\"获取缘起攻略\");\n            const data = !!res_1.data.data.post;\n            if (!data) {\n                console.log(\"兼容：获取旗舰攻略\");\n                return this.get({ type: source_type, id: source_id }, { client: 'std', ...params }).then(res_2 => {\n                    post = res_2.data.data.post;\n                    if (!source)\n                        source = res_2.data.data.source;\n                    post && (isEmpty = false);\n                    users = res_2.data.data.users;\n                    compatible = true;\n                    return { post, source, isEmpty, compatible, type: source_type, source_id: source_id, users };\n                });\n            }\n            return { post, source, isEmpty, compatible, type: source_type, source_id: source_id, users };\n        }\n    },\n    // 兼容怀旧服\n    async mix({ type, id, client }, params) {\n        let source_type = '';\n        let source_id = '';\n        if (type === 'cj') {\n            source_type = 'achievement';\n        } else if (type === 'pet') {\n            source_type = 'item';\n        } else {\n            source_type = type || 'achievement';\n        }\n\n        if (id) {\n            source_id = id;\n            if (type === 'pet') {\n                const res = await getPet(id, { client });\n                let pet = res.data;\n                let source_id = pet.ItemTabType + \"_\" + pet.ItemTabIndex;\n                return this.handleMix(source_type, source_id, client, params);\n            } else {\n                return this.handleMix(source_type, source_id, client, params);\n            }\n        }\n    },\n}\n\nexport const wikiComment = {\n    // 百科评论列表\n    list({ type, id }, params) {\n        return $cms().get(`/api/cms/wiki/comment`, {\n            params: {\n                ...params,\n                type,\n                source_id: id,\n            }\n        })\n    },\n    post(data) {\n        return $cms().post(`/api/cms/wiki/comment`, data)\n    },\n    delete(comment_id) {\n        return $cms().delete(`/api/cms/wiki/comment/${comment_id}`)\n    },\n    myList(params) {\n        return $cms().get(`/api/cms/wiki/comment/mine`, {\n            params\n        })\n    }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./wiki-panel.vue?vue&type=style&index=0&id=283b9559&prod&lang=less\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./qr-code.vue?vue&type=style&index=0&id=263e2756&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"c-wiki-panel\",class:{\n        'border-none': _vm.borderNone,\n        'm-detail-scene': _vm.wikiPost || _vm.scene === 'detail',\n    }},[_c('div',{staticClass:\"m-panel-head\"},[_vm._t(\"head-before\"),_c('div',{staticClass:\"m-panel-actions\"},[(_vm.wikiPost && _vm.showQR)?_c('QRcode',{staticClass:\"u-qr\"}):_vm._e(),_vm._t(\"head-actions\")],2),_c('div',{staticClass:\"m-panel-title\"},[_vm._t(\"head-title\")],2),_vm._t(\"head-after\")],2),_c('div',{staticClass:\"m-panel-body\"},[_vm._t(\"body-before\"),_vm._t(\"meta\",function(){return [(_vm.wikiPost && _vm.wikiPost.post)?_c('div',{staticClass:\"m-wiki-metas\"},[(_vm.wikiPost.users && _vm.wikiPost.users.length)?_c('div',{staticClass:\"u-meta\"},[_c('em',{staticClass:\"u-label\"},[_vm._v(\"参与贡献\")]),_vm._l((_vm.wikiPost.users.slice(0, 5)),function(user,key){return _c('a',{key:key,staticClass:\"u-value u-creator\",attrs:{\"target\":\"_blank\",\"href\":user.id ? _vm.author_url(user.id) : null}},[_c('img',{attrs:{\"src\":_vm.thumbnail_url(user.avatar),\"alt\":user.nickname,\"title\":user.nickname}})])})],2):_vm._e(),(_vm.wikiPost.post && _vm.wikiPost.post.level)?_c('div',{staticClass:\"u-meta\"},[_c('em',{staticClass:\"u-label\"},[_vm._v(\"综合难度\")]),_c('span',{staticClass:\"u-value\"},_vm._l((_vm.wikiPost.post.level),function(i){return _c('i',{key:i,staticClass:\"el-icon-star-on\"})}),0)]):_vm._e(),(_vm.stat)?_c('div',{staticClass:\"u-meta\"},[_c('em',{staticClass:\"u-label\"},[_vm._v(\"热度\")]),_c('span',{staticClass:\"u-value\",domProps:{\"textContent\":_vm._s(_vm.stat.views)}})]):_vm._e(),(_vm.wikiPost.post && _vm.wikiPost.post.updated)?_c('div',{staticClass:\"u-meta\"},[_c('em',{staticClass:\"u-label\"},[_vm._v(\"更新时间\")]),_c('span',{staticClass:\"u-value\",domProps:{\"textContent\":_vm._s(_vm.ts2str(_vm.wikiPost.post.updated))}})]):_vm._e()]):_vm._e()]}),_vm._t(\"body\"),_vm._t(\"body-after\")],2),_c('design-task',{attrs:{\"post\":_vm.currentPost},model:{value:(_vm.showDesignTask),callback:function ($$v) {_vm.showDesignTask=$$v},expression:\"showDesignTask\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.mode == 'cms')?_c('div',{staticClass:\"w-qrcode\",class:{ on: _vm.active },on:{\"click\":_vm.togglePic}},[_c('svg',{class:'u-icon',attrs:{\"height\":\"512\",\"viewBox\":\"0 0 512 512\",\"width\":\"512\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zM127 482H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zM497 370c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z\"}})]),_c('span',{staticClass:\"u-text\"},[_vm._v(\"二维码\")]),_c('div',{staticClass:\"u-qrcode\"},[_c('qrcode-vue',{staticClass:\"u-pic\",attrs:{\"value\":_vm.value,\"size\":_vm.size,\"level\":\"H\"}}),_c('span',[_vm._v(\"扫一扫即可访问\")])],1)]):(_vm.mode == 'static')?_c('div',{staticClass:\"w-qrcode-static\"},[_c('div',{staticClass:\"u-qrcode\"},[_c('qrcode-vue',{staticClass:\"u-pic\",attrs:{\"value\":_vm.value,\"size\":_vm.size,\"level\":\"H\"}}),_c('span',{staticClass:\"u-txt\"},[_c('svg',{class:'u-icon',attrs:{\"height\":\"512\",\"viewBox\":\"0 0 512 512\",\"width\":\"512\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"d\":\"M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zM127 482H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zM497 370c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z\"}})]),_vm._v(\"扫一扫手机访问\")])],1)]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"w-qrcode\" @click=\"togglePic\" :class=\"{ on: active }\" v-if=\"mode == 'cms'\">\r\n        <svg height=\"512\" viewBox=\"0 0 512 512\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:class=\"'u-icon'\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zM127 482H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zM497 370c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z\"/></svg>\r\n        <span class=\"u-text\">二维码</span>\r\n        <div class=\"u-qrcode\">\r\n            <qrcode-vue class=\"u-pic\" :value=\"value\" :size=\"size\" level=\"H\"></qrcode-vue>\r\n            <span>扫一扫即可访问</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"w-qrcode-static\" v-else-if=\"mode == 'static'\">\r\n        <div class=\"u-qrcode\">\r\n            <qrcode-vue class=\"u-pic\" :value=\"value\" :size=\"size\" level=\"H\"></qrcode-vue>\r\n            <span class=\"u-txt\"><svg height=\"512\" viewBox=\"0 0 512 512\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\" v-bind:class=\"'u-icon'\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zM127 482H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zM497 370c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z\"/></svg>扫一扫手机访问</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport QrcodeVue from \"qrcode.vue\";\r\nexport default {\r\n    name: \"QRcode\",\r\n    props: [\"href\", \"v\", \"s\"],\r\n    data: function () {\r\n        return {\r\n            value: this.href || location.href,\r\n            size: this.s || 100,\r\n            active: false,\r\n            mode: this.v || \"cms\",\r\n        };\r\n    },\r\n    computed: {},\r\n    methods: {\r\n        togglePic: function (e) {\r\n            e.stopPropagation();\r\n            this.active = !this.active;\r\n        },\r\n    },\r\n    mounted: function () {\r\n        const vm = this;\r\n        document.addEventListener(\"click\", function () {\r\n            vm.active = false;\r\n        });\r\n    },\r\n    components: {\r\n        QrcodeVue,\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"~@/assets/css/common/qrcode.less\";\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./qr-code.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./qr-code.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./qr-code.vue?vue&type=template&id=263e2756\"\nimport script from \"./qr-code.vue?vue&type=script&lang=js\"\nexport * from \"./qr-code.vue?vue&type=script&lang=js\"\nimport style0 from \"./qr-code.vue?vue&type=style&index=0&id=263e2756&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div\n        class=\"c-wiki-panel\"\n        :class=\"{\n            'border-none': borderNone,\n            'm-detail-scene': wikiPost || scene === 'detail',\n        }\"\n    >\n        <div class=\"m-panel-head\">\n            <slot name=\"head-before\"></slot>\n            <div class=\"m-panel-actions\">\n                <!-- <el-button class=\"u-push\" v-if=\"wikiPost && isEditor\" type=\"warning\" @click=\"onPush\">\n                    <i class=\"el-icon-position\"></i>\n                    推送</el-button\n                > -->\n                <QRcode v-if=\"wikiPost && showQR\" class=\"u-qr\" />\n                <slot name=\"head-actions\"></slot>\n            </div>\n            <div class=\"m-panel-title\">\n                <slot name=\"head-title\"></slot>\n            </div>\n            <slot name=\"head-after\"></slot>\n        </div>\n        <div class=\"m-panel-body\">\n            <slot name=\"body-before\"></slot>\n            <slot name=\"meta\">\n                <div class=\"m-wiki-metas\" v-if=\"wikiPost && wikiPost.post\">\n                    <!-- 参与贡献 -->\n                    <div class=\"u-meta\" v-if=\"wikiPost.users && wikiPost.users.length\">\n                        <em class=\"u-label\">参与贡献</em>\n                        <a\n                            class=\"u-value u-creator\"\n                            v-for=\"(user, key) in wikiPost.users.slice(0, 5)\"\n                            :key=\"key\"\n                            target=\"_blank\"\n                            :href=\"user.id ? author_url(user.id) : null\"\n                        >\n                            <img :src=\"thumbnail_url(user.avatar)\" :alt=\"user.nickname\" :title=\"user.nickname\" />\n                        </a>\n                    </div>\n                    <!-- 综合难度 -->\n                    <div class=\"u-meta\" v-if=\"wikiPost.post && wikiPost.post.level\">\n                        <em class=\"u-label\">综合难度</em>\n                        <span class=\"u-value\">\n                            <i class=\"el-icon-star-on\" v-for=\"i in wikiPost.post.level\" :key=\"i\"></i>\n                        </span>\n                    </div>\n                    <!-- 热度 -->\n                    <div class=\"u-meta\" v-if=\"stat\">\n                        <em class=\"u-label\">热度</em>\n                        <span class=\"u-value\" v-text=\"stat.views\"></span>\n                    </div>\n                    <!-- 更新时间 -->\n                    <div class=\"u-meta\" v-if=\"wikiPost.post && wikiPost.post.updated\">\n                        <em class=\"u-label\">更新时间</em>\n                        <span class=\"u-value\" v-text=\"ts2str(wikiPost.post.updated)\"></span>\n                    </div>\n                </div>\n            </slot>\n            <slot name=\"body\"></slot>\n            <slot name=\"body-after\"></slot>\n        </div>\n        <design-task v-model=\"showDesignTask\" :post=\"currentPost\"></design-task>\n    </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nimport QRcode from \"@/components/common/qr-code\";\nimport { authorLink, ts2str, showAvatar } from \"@jx3box/jx3box-common/js/utils\";\nimport { getStat } from \"@jx3box/jx3box-common/js/stat\";\nimport DesignTask from \"@jx3box/jx3box-common-ui/src/bread/DesignTask.vue\";\nimport { wiki } from \"@jx3box/jx3box-common/js/wiki_v2\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nexport default {\n    name: \"WikiPost\",\n    props: {\n        wikiPost: {\n            type: [Object, String],\n            default: null,\n        },\n        scene: {\n            type: String,\n            default: \"default\",\n        },\n        borderNone: {\n            type: Boolean,\n            default: false,\n        },\n        showQR: {\n            type: Boolean,\n            default: true,\n        },\n    },\n    data() {\n        return {\n            stat: null,\n            showDesignTask: false,\n            currentPost: {},\n            isEditor: User.isEditor(),\n        };\n    },\n    watch: {\n        wikiPost: {\n            immediate: true,\n            handler() {\n                if (!this.wikiPost) return;\n                // 获取热度信息\n                if (this.wikiPost.type && this.wikiPost.source_id) {\n                    let type = this.wikiPost.type;\n                    if (type === \"achievement\") type = \"cj\";\n                    getStat(type, this.wikiPost.source_id).then((data) => {\n                        if (data.status === 200) this.stat = data.data;\n                    });\n                }\n            },\n        },\n    },\n    methods: {\n        author_url: authorLink,\n        ts2str,\n        thumbnail_url: function (val) {\n            return showAvatar(val);\n        },\n        onPush() {\n            this.showDesignTask = true;\n            this.currentPost = {\n                ...(this.wikiPost?.post || {}),\n                post_title: this.wikiPost?.post?.title,\n                post_type: this.wikiPost?.post?.type,\n                ID: this.wikiPost?.post?.source_id,\n            };\n        },\n    },\n    components: {\n        QRcode,\n        DesignTask,\n    },\n    mounted() {},\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/wiki-panel.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./wiki-panel.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./wiki-panel.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./wiki-panel.vue?vue&type=template&id=283b9559\"\nimport script from \"./wiki-panel.vue?vue&type=script&lang=js\"\nexport * from \"./wiki-panel.vue?vue&type=script&lang=js\"\nimport style0 from \"./wiki-panel.vue?vue&type=style&index=0&id=283b9559&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}